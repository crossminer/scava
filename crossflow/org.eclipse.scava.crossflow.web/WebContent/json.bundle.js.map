{"version":3,"sources":["webpack:///webpack/bootstrap 24a07b66a7b2f2e95504?3b33*","webpack:///./~/inversify/lib/inversify.js?021e*","webpack:///./~/sprotty/lib/base/types.js?c9ef*","webpack:///./~/sprotty/lib/base/model/smodel.js?9a0e*","webpack:///./~/sprotty/lib/utils/geometry.js?b5d4*","webpack:///./~/inversify/lib/constants/metadata_keys.js?2f00*","webpack:///./~/sprotty/lib/base/commands/command.js?2473*","webpack:///./~/sprotty/lib/base/model/smodel-utils.js?c6e8*","webpack:///./~/sprotty/lib/features/bounds/model.js?7415*","webpack:///./~/inversify/lib/constants/error_msgs.js?9ada*","webpack:///./~/inversify/lib/planning/metadata.js?d7a7*","webpack:///./~/sprotty/lib/base/model/smodel-factory.js?56c5*","webpack:///./~/sprotty/lib/base/views/vnode-utils.js?f9ac*","webpack:///./~/sprotty/lib/features/select/model.js?e700*","webpack:///./~/inversify/lib/annotation/decorator_utils.js?ef31*","webpack:///./~/inversify/lib/constants/literal_types.js?57ed*","webpack:///./~/sprotty/lib/base/views/mouse-tool.js?2a5a*","webpack:///./~/sprotty/lib/features/viewport/model.js?0243*","webpack:///./~/inversify/lib/utils/guid.js?2e55*","webpack:///./~/snabbdom-jsx/snabbdom-jsx.js?0d6f*","webpack:///./~/sprotty/lib/base/animations/animation.js?9b41*","webpack:///./~/sprotty/lib/base/views/key-tool.js?3351*","webpack:///./~/sprotty/lib/features/edit/model.js?06ba*","webpack:///./~/sprotty/lib/features/move/model.js?97d3*","webpack:///./~/sprotty/lib/base/actions/action-handler.js?6ad0*","webpack:///./~/sprotty/lib/features/export/svg-exporter.js?def0*","webpack:///./~/sprotty/lib/features/viewport/viewport.js?4946*","webpack:///./~/sprotty/lib/utils/registry.js?22ce*","webpack:///(webpack)/buildin/global.js?3698*","webpack:///./~/process/browser.js?82e4*","webpack:///./~/inversify/lib/utils/serialization.js?6281*","webpack:///./~/sprotty/lib/base/animations/animation-frame-syncer.js?d3c3*","webpack:///./~/sprotty/lib/base/features/set-model.js?eb46*","webpack:///./~/sprotty/lib/features/bounds/bounds-manipulation.js?7eaf*","webpack:///./~/sprotty/lib/features/fade/model.js?ecee*","webpack:///./~/sprotty/lib/features/hover/hover.js?4521*","webpack:///./~/sprotty/lib/features/hover/model.js?fd67*","webpack:///./~/sprotty/lib/utils/keyboard.js?b435*","webpack:///./~/sprotty/lib/index.js?c42c*","webpack:///./~/sprotty/lib/base/features/initialize-canvas.js?5846*","webpack:///./~/sprotty/lib/features/edit/edit-routing.js?e14a*","webpack:///./~/sprotty/lib/features/expand/expand.js?91d4*","webpack:///./~/sprotty/lib/features/export/model.js?79be*","webpack:///./~/sprotty/lib/features/move/move.js?4346*","webpack:///./~/sprotty/lib/graph/sgraph.js?c77c*","webpack:///./~/inversify/lib/syntax/binding_on_syntax.js?21ac*","webpack:///./~/inversify/lib/syntax/binding_when_syntax.js?52ad*","webpack:///./~/snabbdom/h.js?4f9e*","webpack:///./~/snabbdom/vnode.js?cf2a*","webpack:///./~/sprotty/lib/base/actions/action-dispatcher.js?61ef*","webpack:///./~/sprotty/lib/base/actions/action.js?d5d5*","webpack:///./~/sprotty/lib/base/model/smodel-storage.js?32f8*","webpack:///./~/sprotty/lib/base/views/dom-helper.js?d2d4*","webpack:///./~/sprotty/lib/features/bounds/abstract-layout.js?a7e4*","webpack:///./~/sprotty/lib/features/bounds/layout.js?4ae9*","webpack:///./~/sprotty/lib/features/button/button-handler.js?f3b4*","webpack:///./~/sprotty/lib/features/button/model.js?34df*","webpack:///./~/sprotty/lib/features/expand/model.js?eba7*","webpack:///./~/sprotty/lib/features/fade/fade.js?267c*","webpack:///./~/sprotty/lib/features/open/open.js?9281*","webpack:///./~/sprotty/lib/features/undo-redo/undo-redo.js?d37f*","webpack:///./~/sprotty/lib/features/update/model-matching.js?281a*","webpack:///./~/sprotty/lib/features/update/update-model.js?8556*","webpack:///./~/sprotty/lib/features/viewport/center-fit.js?e706*","webpack:///./~/sprotty/lib/features/viewport/viewport-root.js?2ac7*","webpack:///./~/sprotty/lib/model-source/model-source.js?8af5*","webpack:///./~/sprotty/lib/utils/browser.js?2437*","webpack:///./~/sprotty/lib/utils/iterable.js?2918*","webpack:///./~/sprotty/lib/utils/logging.js?8769*","webpack:///./~/file-saver/FileSaver.js?5ec9*","webpack:///./~/inversify/lib/planning/metadata_reader.js?bd81*","webpack:///./~/inversify/lib/planning/target.js?a4cb*","webpack:///./~/inversify/lib/syntax/binding_when_on_syntax.js?e1c6*","webpack:///./~/inversify/lib/syntax/constraint_helpers.js?dc83*","webpack:///./~/snabbdom/is.js?0f2c*","webpack:///./~/snabbdom/snabbdom.js?1b22*","webpack:///./~/sprotty/lib/base/animations/easing.js?42bd*","webpack:///./~/sprotty/lib/base/commands/command-stack.js?808f*","webpack:///./~/sprotty/lib/base/views/thunk-view.js?aff4*","webpack:///./~/sprotty/lib/base/views/view.js?de43*","webpack:///./~/sprotty/lib/base/views/viewer-cache.js?bca6*","webpack:///./~/sprotty/lib/base/views/viewer-options.js?2748*","webpack:///./~/sprotty/lib/base/views/viewer.js?d82f*","webpack:///./~/sprotty/lib/base/views/vnode-decorators.js?0253*","webpack:///./~/sprotty/lib/features/bounds/hbox-layout.js?faa8*","webpack:///./~/sprotty/lib/features/bounds/stack-layout.js?7497*","webpack:///./~/sprotty/lib/features/bounds/vbox-layout.js?f7fe*","webpack:///./~/sprotty/lib/features/export/export.js?3c13*","webpack:///./~/sprotty/lib/features/open/model.js?e762*","webpack:///./~/sprotty/lib/features/select/select.js?58f9*","webpack:///./~/sprotty/lib/features/viewport/scroll.js?dcc8*","webpack:///./~/sprotty/lib/features/viewport/zoom.js?b2e2*","webpack:///./~/sprotty/lib/model-source/diagram-server.js?0efb*","webpack:///./~/sprotty/lib/model-source/diagram-state.js?fef3*","webpack:///./~/sprotty/lib/utils/anchors.js?00cf*","webpack:///(webpack)/buildin/amd-options.js?5f71*","webpack:///./lib/sprotty-config.js?86fc*","webpack:///./lib/url-parameters.js?01bf*","webpack:///./~/reflect-metadata/Reflect.js?ae60*","webpack:///./lib/sprotty-model.js?dab3*","webpack:///./lib/views.js?7598*","webpack:///./~/html-parse-stringify2/lib/parse-tag.js?b79c*","webpack:///./~/html-parse-stringify2/lib/parse.js?0ea9*","webpack:///./~/inversify/lib/annotation/inject.js?9ea8*","webpack:///./~/inversify/lib/annotation/injectable.js?e3f3*","webpack:///./~/inversify/lib/annotation/multi_inject.js?bb0c*","webpack:///./~/inversify/lib/annotation/named.js?781b*","webpack:///./~/inversify/lib/annotation/optional.js?8b78*","webpack:///./~/inversify/lib/annotation/post_construct.js?1a18*","webpack:///./~/inversify/lib/annotation/tagged.js?7ed4*","webpack:///./~/inversify/lib/annotation/target_name.js?b425*","webpack:///./~/inversify/lib/annotation/unmanaged.js?e77d*","webpack:///./~/inversify/lib/bindings/binding.js?4a03*","webpack:///./~/inversify/lib/bindings/binding_count.js?37f6*","webpack:///./~/inversify/lib/container/container.js?e406*","webpack:///./~/inversify/lib/container/container_module.js?cdd9*","webpack:///./~/inversify/lib/container/container_snapshot.js?eb22*","webpack:///./~/inversify/lib/container/lookup.js?12d3*","webpack:///./~/inversify/lib/planning/context.js?6fb2*","webpack:///./~/inversify/lib/planning/plan.js?63d2*","webpack:///./~/inversify/lib/planning/planner.js?195f*","webpack:///./~/inversify/lib/planning/queryable_string.js?c06e*","webpack:///./~/inversify/lib/planning/reflection_utils.js?f89a*","webpack:///./~/inversify/lib/planning/request.js?40b8*","webpack:///./~/inversify/lib/resolution/instantiation.js?4f5e*","webpack:///./~/inversify/lib/resolution/resolver.js?23be*","webpack:///./~/inversify/lib/syntax/binding_in_syntax.js?e7df*","webpack:///./~/inversify/lib/syntax/binding_in_when_on_syntax.js?8684*","webpack:///./~/inversify/lib/syntax/binding_to_syntax.js?6ef1*","webpack:///./~/inversify/lib/utils/template.js?5149*","webpack:///./~/snabbdom-virtualize/lib/strings.js?338c*","webpack:///./~/snabbdom-virtualize/lib/utils.js?56fe*","webpack:///./~/snabbdom-virtualize/strings.js?a776*","webpack:///./~/snabbdom/htmldomapi.js?3c28*","webpack:///./~/snabbdom/modules/attributes.js?2f27*","webpack:///./~/snabbdom/modules/class.js?ac56*","webpack:///./~/snabbdom/modules/eventlisteners.js?e19c*","webpack:///./~/snabbdom/modules/props.js?aff6*","webpack:///./~/snabbdom/modules/style.js?6625*","webpack:///./~/snabbdom/thunk.js?c3e8*","webpack:///./~/sprotty/lib/base/commands/command-stack-options.js?278f*","webpack:///./~/sprotty/lib/base/di.config.js?3f9e*","webpack:///./~/sprotty/lib/base/views/id-decorator.js?5123*","webpack:///./~/sprotty/lib/features/bounds/di.config.js?8a28*","webpack:///./~/sprotty/lib/features/bounds/hidden-bounds-updater.js?e3ef*","webpack:///./~/sprotty/lib/features/bounds/resize.js?7abc*","webpack:///./~/sprotty/lib/features/button/di.config.js?2574*","webpack:///./~/sprotty/lib/features/edit/di.config.js?5e99*","webpack:///./~/sprotty/lib/features/expand/di.config.js?3563*","webpack:///./~/sprotty/lib/features/expand/views.js?a030*","webpack:///./~/sprotty/lib/features/export/di.config.js?ecb3*","webpack:///./~/sprotty/lib/features/fade/di.config.js?bccb*","webpack:///./~/sprotty/lib/features/hover/di.config.js?6f66*","webpack:///./~/sprotty/lib/features/hover/initializer.js?298f*","webpack:///./~/sprotty/lib/features/hover/popup-position-updater.js?8959*","webpack:///./~/sprotty/lib/features/move/di.config.js?f7bb*","webpack:///./~/sprotty/lib/features/open/di.config.js?6f8c*","webpack:///./~/sprotty/lib/features/select/di.config.js?a843*","webpack:///./~/sprotty/lib/features/undo-redo/di.config.js?ad78*","webpack:///./~/sprotty/lib/features/viewport/di.config.js?7d99*","webpack:///./~/sprotty/lib/graph/routing.js?a778*","webpack:///./~/sprotty/lib/graph/sgraph-factory.js?a84c*","webpack:///./~/sprotty/lib/graph/views.js?13cc*","webpack:///./~/sprotty/lib/lib/generic-views.js?6811*","webpack:///./~/sprotty/lib/lib/html-views.js?cc63*","webpack:///./~/sprotty/lib/lib/model.js?0e4f*","webpack:///./~/sprotty/lib/lib/svg-views.js?85f0*","webpack:///./~/sprotty/lib/model-source/di.config.js?cb71*","webpack:///./~/sprotty/lib/model-source/local-model-source.js?2875*","webpack:///./~/sprotty/lib/model-source/logging.js?f8a1*","webpack:///./~/sprotty/lib/model-source/websocket.js?524e*","webpack:///./~/sprotty/lib/utils/async.js?f0cd*","webpack:///./~/sprotty/lib/utils/color.js?6800*","webpack:///./~/void-elements/index.js?cd9d*","webpack:///(webpack)/buildin/amd-define.js?0bba*","webpack:///./lib/json/elkgraph-to-sprotty.js?2ca1","webpack:///./~/elkjs/lib/elk-api.js?45f1","webpack:///./~/json5/lib/json5.js?a13c","webpack:///./lib/json/elkgraph-json.js?569d","webpack:///./~/lz-string/libs/lz-string.js?c325","webpack:///./lib/json/editor.js","webpack:///./lib/json/main.js"],"names":["Object","defineProperty","exports","value","container_1","require","Container","container_module_1","ContainerModule","injectable_1","injectable","tagged_1","tagged","named_1","named","inject_1","inject","optional_1","optional","unmanaged_1","unmanaged","multi_inject_1","multiInject","target_name_1","targetName","post_construct_1","postConstruct","metadata_reader_1","MetadataReader","guid_1","guid","decorator_utils_1","decorate","constraint_helpers_1","traverseAncerstors","taggedConstraint","namedConstraint","typeConstraint","serialization_1","getServiceIdentifierAsString","TYPES","IActionDispatcher","Symbol","IActionDispatcherProvider","IActionHandlerInitializer","ActionHandlerRegistry","AnimationFrameSyncer","CommandStackOptions","IButtonHandler","ICommand","ICommandStack","ICommandStackProvider","DOMHelper","HiddenVNodeDecorator","HoverState","KeyListener","Layouter","LayoutRegistry","ILogger","LogLevel","IModelFactory","IModelLayoutEngine","ModelRendererFactory","ModelSource","ModelSourceProvider","MouseListener","PopupModelFactory","IPopupModelProvider","PopupMouseListener","PopupVNodeDecorator","SModelElementRegistration","SModelRegistry","SModelStorage","StateAwareModelProvider","SvgExporter","IViewer","ViewerOptions","IViewerProvider","ViewRegistration","ViewRegistry","IVNodeDecorator","isParent","element","children","undefined","constructor","Array","createRandomId","length","id","i","ID_CHARS","charAt","Math","floor","random","__extends","this","extendStatics","setPrototypeOf","__proto__","d","b","p","hasOwnProperty","__","prototype","create","geometry_1","iterable_1","SModelElement","get","current","SModelRoot","SChildElement","parent","Error","enumerable","configurable","root","index","hasFeature","feature","SParentElement","_super","_this","apply","arguments","add","child","push","splice","remove","indexOf","removeAll","filter","forEach","move","newIndex","localToParent","point","isBounds","x","y","width","height","parentToLocal","SModelIndex","call","canvasBounds","EMPTY_BOUNDS","writable","id2element","Map","contains","set","_i","_a","delete","has","getById","getAttachedElements","all","mapIterable","p1","p2","subtract","isValidDimension","combine","b0","b1","minX","min","minY","max","translate","center","centerOfLine","s","e","abs","includes","euclideanDistance","a","dx","dy","sqrt","manhattanDistance","maxDistance","angleOfPoint","atan2","angleBetweenPoints","lengthProduct","isNaN","NaN","dotProduct","acos","toDegrees","PI","toRadians","almostEquals","ORIGIN_POINT","freeze","EMPTY_DIMENSION","Direction","NAMED_TAG","NAME_TAG","UNMANAGED_TAG","OPTIONAL_TAG","INJECT_TAG","MULTI_INJECT_TAG","TAGGED","TAGGED_PROP","PARAM_TYPES","DESIGN_PARAM_TYPES","POST_CONSTRUCT","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","__metadata","k","v","metadata","__param","paramIndex","decorator","inversify_1","types_1","Command","MergeableCommand","merge","command","context","HiddenCommand","undo","logger","error","redo","PopupCommand","SystemCommand","CommandActionHandler","commandType","handle","action","CommandActionHandlerInitializer","commandCtrs","initialize","registry","commandCtr","registerCommand","getBasicType","schema","type","colonIndex","substring","getSubType","findElement","elementId","result","findParent","predicate","smodel_1","findParentByFeature","translatePoint","source","targetTrace","isBoundsAware","isLayoutContainer","layoutContainerFeature","isLayoutableChild","layoutableChildFeature","isSizeable","boundsFeature","isAlignable","alignFeature","getAbsoluteBounds","boundsAware","smodel_utils_1","bounds","parent_1","SShapeElement","position","size","newBounds","template_1","DUPLICATED_INJECTABLE_DECORATOR","DUPLICATED_METADATA","NULL_ARGUMENT","KEY_NOT_FOUND","AMBIGUOUS_MATCH","CANNOT_UNBIND","NOT_REGISTERED","MISSING_INJECTABLE_ANNOTATION","MISSING_INJECT_ANNOTATION","CIRCULAR_DEPENDENCY","NOT_IMPLEMENTED","INVALID_BINDING_TYPE","NO_MORE_SNAPSHOTS_AVAILABLE","INVALID_MIDDLEWARE_RETURN","INVALID_FUNCTION_BINDING","INVALID_TO_SELF_VALUE","INVALID_DECORATOR_OPERATION","ARGUMENTS_LENGTH_MISMATCH_1","ARGUMENTS_LENGTH_MISMATCH_2","CONTAINER_OPTIONS_MUST_BE_AN_OBJECT","CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE","MULTIPLE_POST_CONSTRUCT_METHODS","POST_CONSTRUCT_ERROR","raw","template","METADATA_KEY","Metadata","toString","registry_1","SModelFactory","createElement","hasKey","regElement","initializeChild","createRoot","initializeRoot","createSchema","isReserved","map","initializeElement","propertyName","obj","descriptor","getPrototypeOf","initializeParent","childSchema","EMPTY_ROOT","registrations","registration","register","constr","ProviderRegistry","setAttr","vnode","name","getAttrs","setClass","getClass","copyClassesFromVNode","classList","copyClassesFromElement","item","mergeStyle","style","getData","__assign","on","event","listener","val","getOn","data","attrs","class","assign","t","n","isSelectable","selectFeature","tagParameter","annotationTarget","parameterIndex","_tagParameterOrProperty","tagProperty","metadataKey","paramsOrPropertiesMetadata","isParameterDecorator","ERROR_MSGS","hasOwnMetadata","getMetadata","paramOrPropertyMetadata","isArray","m","defineMetadata","_decorate","_param","BindingScopeEnum","Singleton","Transient","BindingTypeEnum","ConstantValue","Constructor","DynamicValue","Factory","Function","Instance","Invalid","Provider","TargetTypeEnum","ClassProperty","ConstructorArgument","Variable","action_1","vnode_utils_1","dom_helper_1","MouseTool","actionDispatcher","domHelper","mouseListeners","mouseListener","deregister","getTargetElement","model","findSModelIdByDOMElement","parentNode","handleEvent","methodName","focusOnMouseEvent","actions","reduce","concat","preventDefault","actions_1","actionOrPromise","isAction","dispatch","then","document","domElement","getElementById","createUniqueDOMElementId","focus","mouseOver","mouseOut","mouseEnter","mouseLeave","mouseDown","mouseMove","mouseUp","wheel","doubleClick","bind","postUpdate","PopupMouseTool","isViewport","viewportFeature","s4","isPrimitive","normalizeAttrs","nsURI","defNS","modules","addAttr","namespace","ns","len","mod","idx","slice","buildFromStringTag","tag","selector","classNames","cns","join","replace","sel","text","buildFromComponent","res","view","render","flatten","nested","start","flat","maybeFlatten","array","buildVnode","JSX","modulesNS","SVGNS","module","html","svg","easing_1","Animation","ease","easeInOut","Promise","resolve","reject","frames","lambda","time","dtime","duration","tween","modelChanged","update","log","syncer","onNextFrame","isAvailable","finalModel","CompoundAnimation","components","include","animation","KeyTool","keyListeners","keyListener","dispatchAll","keyDown","isRoutable","routingPoints","canEditRouting","editFeature","filterEditModeHandles","route","curr","pointIndex","find","SRoutingHandle","kind","editMode","prev","next","prevDiff","nextDiff","angle","HANDLE_REMOVE_THRESHOLD","model_1","model_2","model_3","hoverFeedback","selected","moveFeature","hoverFeedbackFeature","isLocateable","isMoveable","command_1","initializers","initializer","initializeActionHandler","KIND","MultiInstanceRegistry","action_dispatcher_1","ExportSvgAction","options","export","div","hiddenDiv","firstElementChild","tagName","svgElement","createSvg","svgElementOrig","serializer","XMLSerializer","svgCopy","serializeToString","iframe","body","appendChild","contentWindow","docCopy","open","write","close","svgElementNew","removeAttribute","copyStyles","setAttribute","getBounds","svgCode","removeChild","skipedProperties","sourceStyle","getComputedStyle","targetStyle","diffStyle","getPropertyValue","childNodes","sourceChild","targetChild","Element","allBounds","one","two","ActionDispatcher","animation_1","ViewportAction","newViewport","animate","ViewportCommand","execute","oldViewport","scroll","zoom","ViewportAnimation","zoomFactor","exp","elements","cstr","arg","existingCstr","missing","InstanceRegistry","instance","existingInstance","instances","deregisterAll","existingInstances","g","eval","window","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","run","Item","noop","process","nextTick","args","title","browser","env","argv","version","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","serviceIdentifier","_serviceIdentifier","listRegisteredBindingsForServiceIdentifier","container","getBindings","registeredBindingsList","registeredBindings","implementationType","getFunctionName","constraint","metaData","circularDependencyToException","request","previousServiceIdentifiers","parentServiceIdentifier","childRequests","childRequest","childServiceIdentifier","services","listMetadataForTarget","serviceIdentifierString","isTagged","isNamed","m_1","namedTag","getNamedTag","otherTags","getCustomTags","name_1","match","tasks","endTasks","triggered","requestAnimationFrame","task","trigger","onEndOfNextFrame","initialize_canvas_1","RequestModelAction","SetModelAction","newRoot","SetModelCommand","oldRoot","modelFactory","InitializeCanvasBoundsCommand","SetBoundsAction","SetBoundsCommand","RequestBoundsAction","RequestBoundsCommand","ComputedBoundsAction","revision","alignments","oldBounds","isFadeable","fadeFeature","keyboard_1","mouse_tool_1","smodel_factory_1","key_tool_1","HoverFeedbackAction","mouseoverElement","mouseIsOver","HoverFeedbackCommand","modelElement","isHoverable","RequestPopupModelAction","SetPopupModelAction","SetPopupModelCommand","AbstractHoverMouseListener","state","stopMouseOutTimer","mouseOutTimer","startMouseOutTimer","popupOpen","previousPopupElement","popupCloseDelay","stopMouseOverTimer","mouseOverTimer","HoverMouseListener","computePopupBounds","mousePosition","offset","targetBounds","boundsInWindow","distRight","distBottom","allowSidePosition","round","leftPopupPosition","canvasRightBorderPosition","topPopupPosition","canvasBottomBorderPosition","side","distance","startMouseOverTimer","popupBounds","pageX","pageY","popupOpenDelay","popupTarget","hasPopupFeature","hoverTarget","closeOnMouseMove","PopupHoverMouseListener","HoverKeyListener","matchesKeystroke","popupFeature","code","modifiers","getActualCode","browser_1","isMac","ctrlKey","findIndex","metaKey","altKey","shiftKey","keyCode","STRING_CODE","addKeyCode","stringCode","numericCode","__export","di_config_1","defaultModule","default","di_config_2","moveModule","di_config_3","boundsModule","di_config_4","fadeModule","di_config_5","selectModule","di_config_6","undoRedoModule","di_config_7","viewportModule","di_config_8","hoverModule","di_config_9","edgeEditModule","di_config_10","exportModule","di_config_11","expandModule","di_config_12","openModule","di_config_13","buttonModule","di_config_14","modelSourceModule","CanvasBoundsInitializer","rootAndVnode","elm","getBoundsInPage","InitializeCanvasBoundsAction","getBoundingClientRect","scrollX","scrollY","left","top","newCanvasBounds","createRoutingHandle","parentId","createRoutingHandles","editTarget","rpCount","targetId","SwitchEditModeAction","elementsToActivate","elementsToDeactivate","SwitchEditModeCommand","handlesToRemove","shouldRemoveHandle","doExecute","entry","rp","MoveRoutingHandleAction","moves","MoveRoutingHandleCommand","resolvedMoves","originalRoutingPoints","resolvedMove","parent_2","MoveHandlesAnimation","doMove","fromPosition","toPosition","points","index_1","handleMoves","reverse","handleMove","revPoints","CollapseExpandAction","expandIds","collapseIds","CollapseExpandAllAction","expand","ExpandButtonHandler","buttonPressed","button","expandable","isExpandable","expanded","TYPE","isExportable","exportFeature","smodel_2","model_4","edit_routing_1","model_5","MoveAction","MoveCommand","resolvedRoutes","attachedElements","Set","handleAttachedElement","MoveAnimation","sourceMove","targetMove","deltaX_1","deltaY_1","fromRoute","toRoute","otherMove","existingMove","elementMoves","elementRoutes","elementMove","elementRoute","fp","tp","MoveMouseListener","hasDragged","moveable","isRoutingHandle","lastDragPosition","buttons","viewport","dx_1","dy_1","nodeMoves_1","handleMoves_1","getHandlePosition","getIndex","rp1","rp2","route_1","LocationDecorator","alignment","viewport_root_1","model_6","model_7","routing_1","SGraph","SGraphIndex","ViewportRootElement","SConnectableElement","getIncomingEdges","getOutgoingEdges","getAnchor","referencePoint","getTranslatedAnchor","refPoint","refContainer","edge","translatedRefPoint","anchor","SNode","opacity","SPort","SEdge","sourceId","router","LinearEdgeRouter","SLabel","SCompartment","outgoing","incoming","sourceArr","targetArr","FluentIterableImpl","nextOutgoingIndex","nextIncomingIndex","done","binding_when_syntax_1","BindingOnSyntax","_binding","onActivation","handler","BindingWhenSyntax","binding_on_syntax_1","when","whenTargetNamed","whenTargetIsDefault","whenTargetTagged","whenInjectedInto","parentRequest","whenParentNamed","whenParentTagged","whenAnyAncestorIs","ancestor","whenNoAncestorIs","whenAnyAncestorNamed","whenNoAncestorNamed","whenAnyAncestorTagged","whenNoAncestorTagged","whenAnyAncestorMatches","whenNoAncestorMatches","addNS","childData","h","is","primitive","vnode_1","animation_frame_syncer_1","set_model_1","undo_redo_1","action_handler_1","actionHandlerRegistry","commandStack","postponedActions","initialCommand","blockUntil","handleBlocked","UndoAction","RedoAction","handleAction","handlers","promises","handlers_1","warn","object","localCache","store","isLocalStorageAvailable","localStorage","setItem","JSON","stringify","load","getItem","parse","viewerOptions","baseDiv","getPrefix","AbstractLayout","layout","layouter","boundsData","getBoundsData","getLayoutOptions","childrenSize","getChildrenSize","maxWidth","paddingFactor","resizeContainer","getFixedContainerBounds","paddingLeft","paddingRight","maxHeight","paddingTop","paddingBottom","layoutChildren","getFinalContainerBounds","boundsChanged","lastOffset","layoutOptions","currentContainer","containerOptions","currentOffset","childOptions","getChildLayoutOptions","layoutChild","getDx","hAlign","getDy","vAlign","spread","allOptions","getDefaultLayoutOptions","vbox_layout_1","hbox_layout_1","stack_layout_1","VBoxLayouter","HBoxLayouter","StackLayouter","layoutRegistry","element2boundsData","StatefulLayouter","toBeLayouted","doLayout","alignmentChanged","ButtonHandlerRegistry","buttonHandlerFactories","factory","SButton","enabled","expandFeature","FadeAnimation","elementFades","removeAfterFadeOut","elementFade","ElementFader","OpenAction","OpenMouseListener","openableTarget","isOpenable","UndoRedoKeyListener","forEachMatch","matchResult","callback","applyMatches","matches","matches_1","newElementInserted","leftParentId","right","rightParentId","ModelMatcher","matchLeft","matchRight","fade_1","move_1","model_matching_1","resize_1","UpdateModelAction","input","UpdateModelCommand","performUpdate","convertToMatchResult","animationOrRoot","computeAnimation","leftRoot","rightRoot","matches_2","converted","animationData","fades","updateElement","leftCopy","animations","createAnimations","leftPos","rightPos","resizes","fromDimension","toDimension","movesMap","resizesMap","_b","_c","resize","ResizeAnimation","viewport_1","CenterAction","elementIds","CenterCommand","FitToScreenAction","padding","maxZoom","FitToScreenCommand","BoundsAwareViewportCommand","allBounds_1","getElementIds","boundsInViewport","getNewViewport","equal","vp1","vp2","delta","CenterKeyboardListener","svg_exporter_1","isCtrlOrCmd","navigator","userAgent","isCrossSite","url","location","baseURL","protocol","host","startsWith","toArray","filterIterable","createIterator","iterator","DONE_RESULT","collection","method","ArrayIterator","startFn","nextFn","NullLogger","logLevel","none","thisArg","message","params","info","ConsoleLogger","viewOptions","console","consoleArguments","caller","Date","toLocaleTimeString","Number","saveAs","test","doc","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","click","node","MouseEvent","dispatchEvent","is_safari","HTMLElement","safari","is_chrome_ios","throw_outside","ex","setImmediate","revoke","file","revoker","revokeObjectURL","filesaver","event_types","auto_bom","blob","Blob","String","fromCharCode","FileSaver","no_auto_bom","object_url","force","dispatch_all","split","readyState","INIT","createObjectURL","href","download","DONE","FileReader","reader","onloadend","readAsDataURL","FS_proto","msSaveOrOpenBlob","abort","WRITING","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","self","content","define","amd","getConstructorMetadata","constructorFunc","compilerGeneratedMetadata","userGeneratedMetadata","getPropertiesMetadata","metadata_1","queryable_string_1","Target","namedOrTagged","QueryableString","metadataItem","hasTag","matchesArray","matchesTag","some","isOptional","matchesNamedTag","BindingWhenOnSyntax","_bindingWhenSyntax","_bindingOnSyntax","bindings","isUndef","isDef","sameVnode","vnode1","vnode2","isVnode","createKeyToOldIdx","beginIdx","endIdx","ch","init","domApi","emptyNodeAt","className","api","toLowerCase","createRmCb","childElm","createElm","insertedVnodeQueue","hook","createComment","hashIdx","dotIdx","hash","dot","cbs","emptyNode","createTextNode","insert","addVnodes","parentElm","before","vnodes","startIdx","insertBefore","invokeDestroyHook","j","destroy","removeVnodes","i_1","rm","updateChildren","oldCh","newCh","oldKeyToIdx","idxInOld","elmToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","patchVnode","nextSibling","oldVnode","prepatch","setTextContent","postpatch","htmldomapi_1","hooks","pre","post","h_1","thunk_1","thunk","__awaiter","_arguments","P","generator","fulfilled","step","rejected","__generator","verb","op","f","TypeError","_","label","ops","pop","trys","sent","throw","return","CommandStack","viewerProvider","undoStack","redoStack","offStack","currentPromise","hiddenRoot","popupRoot","rootChanged","hiddenRootChanged","popupChanged","executeAll","commands","handleCommand","mergeOrPush","thenUpdate","undoOffStackSystemCommands","undoPreceedingSystemCommands","pushToUndoStack","redoFollowingSystemCommands","operation","beforeResolve","newResult","createContext","newModel","undoHistoryLimit","updateHidden","updatePopup","currentModel","viewer","lastCommand","defaultDuration","isThunk","snabbdom_1","ThunkView","fn","renderAndDecorate","watchedArgs","doRender","copyToThunk","cur","old","equals","oldArg","newArg","keys","configureModelElement","modelConstr","viewConstr","toConstantValue","snabbdom","registerDefaults","EmptyView","MissingView","class-sprotty-empty","class-sprotty-missing","ViewerCache","delegate","isCacheEmpty","cachedModelRoot","cachedHiddenModelRoot","cachedPopup","scheduleUpdate","hiddenModel","nextHiddenModelRoot","nextModelRoot","configureViewerOptions","opt","defaultViewerOptions","isBound","rebind","overrideViewerOptions","baseClass","hiddenClass","popupDiv","popupClass","popupClosedClass","needsClientLayout","needsServerLayout","props_1","attributes_1","style_1","eventlisteners_1","class_1","thunk_view_1","ModelRenderer","viewRegistry","renderElement","vNode","renderChildren","Viewer","modelRendererFactory","hiddenDecorators","popupDecorators","actiondispatcher","onWindowResize","vdom","patcher","createPatcher","renderer","hiddenRenderer","popupRenderer","createModules","propsModule","attributesModule","classModule","styleModule","eventListenersModule","newVDOM","lastVDOM","hadFocus","hasFocus","restoreFocus","placeholder","addEventListener","activeElement","lastRootVNode","lastElement","hiddenVNode","lastHiddenVDOM","popupClosed","inlineStyle","lastPopupVDOM","FocusFixDecorator","FocusFixDecorator_1","tabIndex","abstract_layout_1","isFirst","hGap","vGap","ExportSvgKeyListener","RequestExportSvgAction","ExportSvgCommand","ExportSvgDecorator","svgExporter","openFeature","button_handler_1","SelectAction","selectedElementsIDs","deselectedElementsIDs","SelectCommand","SelectAllAction","select","SelectAllCommand","deselected","selection","childrenLength","previousSelection","selectAll","newState","SelectMouseListener","buttonHandlerRegistry","wasSelected","buttonHandler","selectableTarget_1","deselect","routableDeselect","selectableTarget","SelectKeyboardListener","isScrollable","ScrollMouseListener","lastScrollPosition","isZoomable","ZoomMouseListener","newZoom","deltaY","factor","offsetX","offsetY","isActionMessage","smodel_storage_1","update_model_1","bounds_manipulation_1","hover_1","model_source_1","file_saver_1","expand_1","open_1","ServerStatusAction","receivedFromServerProperty","DiagramServer","storage","currentRoot","clientId","handleLocally","sendMessage","messageReceived","storeNewModel","handleComputedBounds","handleExportSvgAction","handleServerStateAction","lastSubmittedModelType","applyBounds","applyAlignment","newAlignment","ExpansionState","expandedElementIds","collapsed","collapseAll","computeCircleAnchor","radius","cx","cy","getXIntersection","yIntersection","centerPoint","getYIntersection","xIntersection","computeRectangleAnchor","finder","NearestPointFinder","xTop","addCandidate","xBottom","yLeft","yRight","best","currentDist","dist","currentBest","lib_1","views_1","sprotty_model_1","FilteringSvgExporter","isExported","styleSheet","endsWith","elkGraphModule","unbind","to","inSingletonScope","SGraphFactory","SGraphView","ElkNode","ElkNodeView","ElkPort","ElkPortView","ElkEdge","ElkEdgeView","ElkLabelView","ElkJunction","JunctionView","getParameters","search","nextParamIndex","param","valueIndex","setupModelLink","editor","contentChangeTimeout","parameters","newHref","assembleHref","onDidChangeModelContent","queryIndex","combineParameters","propertyKey","attributes","IsUndefined","IsArray","IsConstructor","DecorateConstructor","IsObject","IsNull","ToPropertyKey","DecorateProperty","metadataValue","IsPropertyKey","OrdinaryDefineOwnMetadata","hasMetadata","OrdinaryHasMetadata","OrdinaryHasOwnMetadata","OrdinaryGetMetadata","getOwnMetadata","OrdinaryGetOwnMetadata","getMetadataKeys","OrdinaryMetadataKeys","getOwnMetadataKeys","OrdinaryOwnMetadataKeys","deleteMetadata","metadataMap","GetOrCreateMetadataMap","targetMetadata","decorated","O","Create","_Map","MetadataKey","OrdinaryGetPrototypeOf","ToBoolean","MetadataValue","ownKeys","parentKeys","_Set","ownKeys_1","parentKeys_1","keysObj","GetIterator","IteratorStep","nextValue","IteratorValue","IteratorClose","Type","IsSymbol","ToPrimitive","PreferredType","hint","exoticToPrim","GetMethod","toPrimitiveSymbol","OrdinaryToPrimitive","toString_1","IsCallable","valueOf","toString_2","argument","ToString","V","func","iteratorSymbol","iterResult","proto","functionPrototype","prototypeProto","MakeDictionary","HashMap","hasOwn","supportsSymbol","toPrimitive","supportsCreate","supportsProto","downLevel","usePolyfill","entries","getKey","getValue","getEntry","cacheSentinel","arraySentinel","MapIterator","values","_index","_keys","_values","_selector","_cacheKey","_cacheIndex","_find","clear","_map","_WeakMap","WeakMap","CreateUniqueKey","CreateUUID","GetOrCreateWeakMapTable","rootKey","FillRandomBytes","buffer","GenRandomBytes","Uint8Array","crypto","getRandomValues","msCrypto","UUID_SIZE","byte","_key","table","__global","global","RectangularNode","RectangularPort","class-elknode","class-mouseover","class-selected","RectangularNodeView","port","class-elkport","renderLine","segments","firstPoint","path","class-elkedge","renderAdditionals","class-edge","class-arrow","transform","PolylineEdgeView","class-elklabel","getRadius","class-elkjunction","CircularNodeView","attrRE","voidElements","expectingValueAfterEquals","voidElement","pushTextNode","list","level","ignoreWhitespace","end","tagRE","parseTag","empty","arr","byTag","inComponent","isOpen","isComment","nextChar","targetKey","ERRORS_MSGS","types","literal_types_1","Binding","defaultScope","activated","scope","cache","provider","dynamicValue","clone","BindingCount","MultipleBindingsAvailable","NoBindingsAvailable","OnlyOneBindingAvailable","binding_1","lookup_1","planner_1","resolver_1","binding_to_syntax_1","container_snapshot_1","_bindingDictionary","Lookup","_snapshots","_middleware","_metadataReader","container1","container2","copyDictionary","origin","destination","traverse","bindingDictionary","getBindingDictionary","bindingDictionary1","bindingDictionary2","setModuleId","bindingToSyntax","moduleId","getBindFunction","getUnbindFunction","getIsboundFunction","getRebindFunction","bindFunction","unbindFunction","isboundFunction","rebindFunction","unload","conditionFactory","expected","condition","removeByCondition","BindingToSyntax","unbindAll","bound","isBoundNamed","isBoundTagged","request_1","createMockRequest","snapshot","ContainerSnapshot","of","restore","middleware","createChild","applyMiddleware","middlewares","initial","_planAndResolve","applyCustomMetadataReader","metadataReader","_get","getTagged","getNamed","getAll","getAllTagged","getAllNamed","constructorFunction","tempContainer","toSelf","avoidConstraints","isMultiInject","targetType","defaultArgs","contextInterceptor","plan","getMap","updatedEntries","copy","Context","addPlan","Plan","parentContext","rootRequest","cntnr","_createTarget","injectMetadata","target_1","tagMetadata","_getActiveBindings","activeBindings","Request","_validateActiveBindingCount","binding_count_1","msg","_createSubRequests","childRequest_1","thePlan","plan_1","addChildRequest","subChildRequest","reflection_utils_1","getDependencies","dependency","RangeError","context_1","str","searchString","reverseString","reverseSearchString","compareString","getTargets","constructorName","isBaseClass","serviceIdentifiers","constructorArgsMetadata","hasUserDeclaredUnknownInjections","iterations","constructorTargets","getConstructorArgsAsTargets","propertyTargets","getClassPropsAsTargets","targets","baseClassDependencyCount","getBaseClassDependencyCount","getConstructorArgsAsTarget","formatTargetMetadata","isManaged","injectIdentifier","isObject","isFunction","isUndefined","isUnknownType","classPropsMetadata","baseConstructor","baseTargets","baseConstructorName","unmanagedCount","dependencyCount","targetMetadataMap","_injectProperties","resolveRequest","propertyInjectionsRequests","propertyInjections","injection","_createInstance","Func","injections","_postConstruct","error_msgs_1","resolveInstance","_resolveRequest","targetIsAnArray","targetParentIsNotAnArray","isSingleton","instantiation_1","binding_when_on_syntax_1","BindingInSyntax","inTransientScope","binding_in_syntax_1","BindingInWhenOnSyntax","_bindingInSyntax","binding_in_when_on_syntax_1","toDynamicValue","toConstructor","toFactory","toFunction","bindingWhenOnSyntax","toAutoFactory","toProvider","strings","isInteger","_interopRequireDefault","__esModule","_defineProperty","convertNodes","nodes","createdVNodes","toVNode","newNode","_utils","createTextVNode","_h2","buildVNodeData","memo","unescapeEntities","parseStyle","classes","parseClass","styleProp","transformName","trim","_parse2","_parse","_h","_vnode2","$1","$2","toUpperCase","el","entityRegex","entity","innerHTML","textContent","_vnode","RegExp","namespaceURI","qualifiedName","referenceNode","getTextContent","isElement","nodeType","isText","htmlDomApi","updateAttrs","oldAttrs","charCodeAt","xChar","colonChar","setAttributeNS","xmlNS","xlinkNS","updateClass","oldClass","klass","invokeHandler","createListener","updateEventListeners","oldOn","oldListener","oldElm","removeEventListener","updateProps","oldProps","props","setNextFrame","prop","nextFrame","updateStyle","oldStyle","oldHasDel","removeProperty","delayed","name2","setProperty","applyDestroyStyle","applyRemoveStyle","compStyle","amount","applied","ev","raf","oldArgs","overrideCommandStackOptions","defaultOptions","logging_1","command_stack_1","viewer_1","viewer_options_1","vnode_decorators_1","view_1","viewer_cache_1","id_decorator_1","defaultContainerModule","IdDecorator","hidden_bounds_updater_1","layout_1","HiddenBoundsUpdater","BoundsData","getBoundsFromDOM","realignments","boundingBox","getBBox","elementResizes","elementResize","newDimension","ExpandButtonView","class-sprotty-button","class-enabled","export_1","exportSvgModule","popup_position_updater_1","initializer_1","PopupPositionUpdater","PopupActionHandlerInitializer","center_fit_1","ClosePopupActionHandler","closePopupActionHandler","boundingClientRect","innerHeight","innerWidth","select_1","scroll_1","zoom_1","minimalPointDistance","sourceAnchor","targetAnchor","p0","sourceAnchorCorrection","pn","targetAnchorCorrection","startRef","endRef","sgraph_1","isNodeSchema","isPortSchema","isEdgeSchema","isLabelSchema","isCompartmentSchema","isButtonSchema","isGraphSchema","class-sprotty-graph","renderDanglingEdge","class-sprotty-edge","class-sprotty-edge-dangling","SRoutingHandleView","getPosition","class-sprotty-routing-handle","getLinePosition","getJunctionPosition","SLabelView","class-sprotty-label","subType","SCompartmentView","class-sprotty-comp","strings_1","PreRenderedView","correctNamespace","setNamespace","HtmlRootView","anchors_1","CircularNode","strokeWidth","strokeCorrection","CircularPort","HtmlRoot","PreRenderedElement","ShapedPreRenderedElement","SvgViewportView","class-sprotty-node","class-sprotty-port","async_1","diagram_state_1","LocalModelSource","modelProvider","popupModelProvider","layoutEngine","diagramState","expansionState","pendingUpdates","setModel","submitModel","updateModel","deferred","Deferred","promise","doSubmitModel","layoutResult","error_1","updates","stack","addElements","elements_1","anye","removeElements","elements_2","handleRequestModel","handleRequestPopupModel","handleCollapseExpandAction","handleCollapseExpandAllAction","getModel","getPopupModel","expandedModel","LoggingAction","severity","ForwardingLogger","modelSourceProvider","forward","date","modelSource","diagram_server_1","WebSocketDiagramServer","listen","webSocket","disconnect","send","rgb","red","green","blue","toSVG","ColorMap","stops","getColor","area","base","br","col","embed","hr","img","keygen","link","menuitem","meta","track","wbr","elkgraph_json_1","ElkGraphJsonToSprotty","nodeIds","edgeIds","portIds","labelIds","sectionIds","elkGraph","sGraph","transformElkNode","edges","sEdges","transformElkEdge","elkNode","checkAndRememberId","sNode","pos","sNodes","ports","sPorts","transformElkPort","labels","sLabels","l","transformElkLabel","_d","elkPort","sPort","elkLabel","elkEdge","sEdge","sourcePoint","bendPoints","targetPoint","isExtended","sources","sections","section","startPoint","endPoint","junctionPoints","jp","sJunction","elkShape","ELK","o","u","1","_classCallCheck","_createClass","defineProperties","protoProps","staticProps","_ref","_ref$defaultLayoutOpt","defaultLayoutOptions","_ref$algorithms","algorithms","workerFactory","workerUrl","initialized","Worker","worker","postMessage","PromisedWorker","cmd","catch","err","graph","_ref2","_ref2$layoutOptions","terminate","_this2","resolvers","onmessage","answer","receive","json","resolver","2","./elk-api.js","JSON5","at","lineNumber","columnNumber","escapee","'","\"","\\","/","\n","ws","renderChar","chr","SyntaxError","peek","identifier","number","sign","string","word","isFinite","hex","delim","uffff","parseInt","inlineComment","blockComment","comment","white","Infinity","reviver","walk","holder","","replacer","space","isWordChar","isWordStart","isWord","isDate","checkForCircular","objStack","makeIndent","num","noNewLine","indent","escapeString","escapable","lastIndex","internalStringify","isTopLevel","obj_part","getReplacedValueOrUndefined","indentStr","nonEmpty","toJSON","\b","\t","\f","\r","topLevelHolder","LZString","getBaseValue","alphabet","character","baseReverseDic","keyStrBase64","keyStrUriSafe","compressToBase64","_compress","decompressFromBase64","_decompress","compressToUTF16","decompressFromUTF16","compressed","compressToUint8Array","uncompressed","compress","buf","TotalLen","current_value","decompressFromUint8Array","decompress","compressToEncodedURIComponent","decompressFromEncodedURIComponent","bitsPerChar","getCharFromInt","ii","context_dictionary","context_dictionaryToCreate","context_c","context_wc","context_w","context_enlargeIn","context_dictSize","context_numBits","context_data","context_data_val","context_data_position","pow","resetValue","getNextValue","w","bits","resb","maxpower","power","dictionary","enlargeIn","dictSize","numBits","monaco","setModelMarkers","elk","elkgraph_to_sprotty_1","markers","errorToMarker","Severity","startLineNumber","startColumn","url_parameters_1","sprotty_config_1","elk_api_1","urlParameters","initialContent","compressedContent","decodeURIComponent","languages","extensions","aliases","mimetypes","createModel","Uri","updateOptions","minimap","sprottyContainer","onDidChangeContent","onload"],"mappings":"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","file":"json.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 235);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 24a07b66a7b2f2e95504","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = require(\"./container/container\");\nexports.Container = container_1.Container;\nvar container_module_1 = require(\"./container/container_module\");\nexports.ContainerModule = container_module_1.ContainerModule;\nvar injectable_1 = require(\"./annotation/injectable\");\nexports.injectable = injectable_1.injectable;\nvar tagged_1 = require(\"./annotation/tagged\");\nexports.tagged = tagged_1.tagged;\nvar named_1 = require(\"./annotation/named\");\nexports.named = named_1.named;\nvar inject_1 = require(\"./annotation/inject\");\nexports.inject = inject_1.inject;\nvar optional_1 = require(\"./annotation/optional\");\nexports.optional = optional_1.optional;\nvar unmanaged_1 = require(\"./annotation/unmanaged\");\nexports.unmanaged = unmanaged_1.unmanaged;\nvar multi_inject_1 = require(\"./annotation/multi_inject\");\nexports.multiInject = multi_inject_1.multiInject;\nvar target_name_1 = require(\"./annotation/target_name\");\nexports.targetName = target_name_1.targetName;\nvar post_construct_1 = require(\"./annotation/post_construct\");\nexports.postConstruct = post_construct_1.postConstruct;\nvar metadata_reader_1 = require(\"./planning/metadata_reader\");\nexports.MetadataReader = metadata_reader_1.MetadataReader;\nvar guid_1 = require(\"./utils/guid\");\nexports.guid = guid_1.guid;\nvar decorator_utils_1 = require(\"./annotation/decorator_utils\");\nexports.decorate = decorator_utils_1.decorate;\nvar constraint_helpers_1 = require(\"./syntax/constraint_helpers\");\nexports.traverseAncerstors = constraint_helpers_1.traverseAncerstors;\nexports.taggedConstraint = constraint_helpers_1.taggedConstraint;\nexports.namedConstraint = constraint_helpers_1.namedConstraint;\nexports.typeConstraint = constraint_helpers_1.typeConstraint;\nvar serialization_1 = require(\"./utils/serialization\");\nexports.getServiceIdentifierAsString = serialization_1.getServiceIdentifierAsString;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/inversify.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TYPES = {\n    IActionDispatcher: Symbol('IActionDispatcher'),\n    IActionDispatcherProvider: Symbol('IActionDispatcherProvider'),\n    IActionHandlerInitializer: Symbol('IActionHandlerInitializer'),\n    ActionHandlerRegistry: Symbol('ActionHandlerRegistry'),\n    AnimationFrameSyncer: Symbol('AnimationFrameSyncer'),\n    CommandStackOptions: Symbol('CommandStackOptions'),\n    IButtonHandler: Symbol('IButtonHandler'),\n    ICommand: Symbol('ICommand'),\n    ICommandStack: Symbol('ICommandStack'),\n    ICommandStackProvider: Symbol('ICommandStackProvider'),\n    DOMHelper: Symbol('DOMHelper'),\n    HiddenVNodeDecorator: Symbol('HiddenVNodeDecorator'),\n    HoverState: Symbol('HoverState'),\n    KeyListener: Symbol('KeyListener'),\n    Layouter: Symbol('Layouter'),\n    LayoutRegistry: Symbol('LayoutRegistry'),\n    ILogger: Symbol('ILogger'),\n    LogLevel: Symbol('LogLevel'),\n    IModelFactory: Symbol('IModelFactory'),\n    IModelLayoutEngine: Symbol('IModelLayoutEngine'),\n    ModelRendererFactory: Symbol('ModelRendererFactory'),\n    ModelSource: Symbol('ModelSource'),\n    ModelSourceProvider: Symbol('ModelSourceProvider'),\n    MouseListener: Symbol('MouseListener'),\n    /**\n     * @deprecated Use IPopupModelProvider instead.\n     */\n    PopupModelFactory: Symbol('PopupModelFactory'),\n    IPopupModelProvider: Symbol('IPopupModelProvider'),\n    PopupMouseListener: Symbol('PopupMouseListener'),\n    PopupVNodeDecorator: Symbol('PopupVNodeDecorator'),\n    SModelElementRegistration: Symbol('SModelElementRegistration'),\n    SModelRegistry: Symbol('SModelRegistry'),\n    SModelStorage: Symbol('SModelStorage'),\n    StateAwareModelProvider: Symbol('StateAwareModelProvider'),\n    SvgExporter: Symbol('SvgExporter'),\n    IViewer: Symbol('IViewer'),\n    ViewerOptions: Symbol('ViewerOptions'),\n    IViewerProvider: Symbol('IViewerProvider'),\n    ViewRegistration: Symbol('ViewRegistration'),\n    ViewRegistry: Symbol('ViewRegistry'),\n    IVNodeDecorator: Symbol('IVNodeDecorator')\n};\n//# sourceMappingURL=types.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/types.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar iterable_1 = require(\"../../utils/iterable\");\n/**\n * Base class for all elements of the diagram model.\n * Each model element must have a unique ID and a type that is used to look up its view.\n */\nvar SModelElement = /** @class */ (function () {\n    function SModelElement() {\n    }\n    Object.defineProperty(SModelElement.prototype, \"root\", {\n        get: function () {\n            var current = this;\n            while (current) {\n                if (current instanceof SModelRoot)\n                    return current;\n                else if (current instanceof SChildElement)\n                    current = current.parent;\n                else\n                    current = undefined;\n            }\n            throw new Error(\"Element has no root\");\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SModelElement.prototype, \"index\", {\n        get: function () {\n            return this.root.index;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * A feature is a symbol identifying some functionality that can be enabled or disabled for\n     * a model element. The base implementation always returns false, so it disables all features.\n     */\n    SModelElement.prototype.hasFeature = function (feature) {\n        return false;\n    };\n    return SModelElement;\n}());\nexports.SModelElement = SModelElement;\nfunction isParent(element) {\n    var children = element.children;\n    return children !== undefined && children.constructor === Array;\n}\nexports.isParent = isParent;\n/**\n * A parent element may contain child elements, thus the diagram model forms a tree.\n */\nvar SParentElement = /** @class */ (function (_super) {\n    __extends(SParentElement, _super);\n    function SParentElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.children = [];\n        return _this;\n    }\n    SParentElement.prototype.add = function (child, i) {\n        var children = this.children;\n        if (i === undefined) {\n            children.push(child);\n        }\n        else {\n            if (i < 0 || i > this.children.length) {\n                throw new Error(\"Child index \" + i + \" out of bounds (0..\" + children.length + \")\");\n            }\n            children.splice(i, 0, child);\n        }\n        child.parent = this;\n        this.index.add(child);\n    };\n    SParentElement.prototype.remove = function (child) {\n        var children = this.children;\n        var i = children.indexOf(child);\n        if (i < 0) {\n            throw new Error(\"No such child \" + child.id);\n        }\n        children.splice(i, 1);\n        delete child.parent;\n        this.index.remove(child);\n    };\n    SParentElement.prototype.removeAll = function (filter) {\n        var _this = this;\n        var children = this.children;\n        if (filter !== undefined) {\n            for (var i = children.length - 1; i >= 0; i--) {\n                if (filter(children[i])) {\n                    var child = children.splice(i, 1)[0];\n                    delete child.parent;\n                    this.index.remove(child);\n                }\n            }\n        }\n        else {\n            children.forEach(function (child) {\n                delete child.parent;\n                _this.index.remove(child);\n            });\n            children.splice(0, children.length);\n        }\n    };\n    SParentElement.prototype.move = function (child, newIndex) {\n        var children = this.children;\n        var i = children.indexOf(child);\n        if (i === -1) {\n            throw new Error(\"No such child \" + child.id);\n        }\n        else {\n            if (newIndex < 0 || newIndex > children.length - 1) {\n                throw new Error(\"Child index \" + newIndex + \" out of bounds (0..\" + children.length + \")\");\n            }\n            children.splice(i, 1);\n            children.splice(newIndex, 0, child);\n        }\n    };\n    /**\n     * Transform the given bounds from the local coordinate system of this element to the coordinate\n     * system of its parent. This function should consider any transformation that is applied to the\n     * view of this element and its contents.\n     * The base implementation assumes that this element does not define a local coordinate system,\n     * so it leaves the bounds unchanged.\n     */\n    SParentElement.prototype.localToParent = function (point) {\n        return geometry_1.isBounds(point) ? point : { x: point.x, y: point.y, width: -1, height: -1 };\n    };\n    /**\n     * Transform the given bounds from the coordinate system of this element's parent to its local\n     * coordinate system. This function should consider any transformation that is applied to the\n     * view of this element and its contents.\n     * The base implementation assumes that this element does not define a local coordinate system,\n     * so it leaves the bounds unchanged.\n     */\n    SParentElement.prototype.parentToLocal = function (point) {\n        return geometry_1.isBounds(point) ? point : { x: point.x, y: point.y, width: -1, height: -1 };\n    };\n    return SParentElement;\n}(SModelElement));\nexports.SParentElement = SParentElement;\n/**\n * A child element is contained in a parent element. All elements except the model root are child\n * elements. In order to keep the model class hierarchy simple, every child element is also a\n * parent element, although for many elements the array of children is empty (i.e. they are\n * leafs in the model element tree).\n */\nvar SChildElement = /** @class */ (function (_super) {\n    __extends(SChildElement, _super);\n    function SChildElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return SChildElement;\n}(SParentElement));\nexports.SChildElement = SChildElement;\n/**\n * Base class for the root element of the diagram model tree.\n */\nvar SModelRoot = /** @class */ (function (_super) {\n    __extends(SModelRoot, _super);\n    function SModelRoot(index) {\n        if (index === void 0) { index = new SModelIndex(); }\n        var _this = _super.call(this) || this;\n        _this.canvasBounds = geometry_1.EMPTY_BOUNDS;\n        // Override the index property from SModelElement, which has a getter, with a data property\n        Object.defineProperty(_this, 'index', {\n            value: index,\n            writable: false\n        });\n        return _this;\n    }\n    return SModelRoot;\n}(SParentElement));\nexports.SModelRoot = SModelRoot;\nvar ID_CHARS = \"0123456789abcdefghijklmnopqrstuvwxyz\";\nfunction createRandomId(length) {\n    if (length === void 0) { length = 8; }\n    var id = \"\";\n    for (var i = 0; i < length; i++) {\n        id += ID_CHARS.charAt(Math.floor(Math.random() * ID_CHARS.length));\n    }\n    return id;\n}\nexports.createRandomId = createRandomId;\n/**\n * Used to speed up model element lookup by id.\n */\nvar SModelIndex = /** @class */ (function () {\n    function SModelIndex() {\n        this.id2element = new Map;\n    }\n    SModelIndex.prototype.add = function (element) {\n        if (!element.id) {\n            do {\n                element.id = createRandomId();\n            } while (this.contains(element));\n        }\n        else if (this.contains(element)) {\n            throw new Error(\"Duplicate ID in model: \" + element.id);\n        }\n        this.id2element.set(element.id, element);\n        if (element.children !== undefined && element.children.constructor === Array) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.add(child);\n            }\n        }\n    };\n    SModelIndex.prototype.remove = function (element) {\n        this.id2element.delete(element.id);\n        if (element.children !== undefined && element.children.constructor === Array) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.remove(child);\n            }\n        }\n    };\n    SModelIndex.prototype.contains = function (element) {\n        return this.id2element.has(element.id);\n    };\n    SModelIndex.prototype.getById = function (id) {\n        return this.id2element.get(id);\n    };\n    SModelIndex.prototype.getAttachedElements = function (element) {\n        return [];\n    };\n    SModelIndex.prototype.all = function () {\n        return iterable_1.mapIterable(this.id2element, function (_a) {\n            var key = _a[0], value = _a[1];\n            return value;\n        });\n    };\n    return SModelIndex;\n}());\nexports.SModelIndex = SModelIndex;\n//# sourceMappingURL=smodel.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/model/smodel.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * (x,y) coordinates of the origin.\n */\nexports.ORIGIN_POINT = Object.freeze({\n    x: 0,\n    y: 0\n});\n/**\n * Adds two points.\n * @param {Point} p1 - First point\n * @param {Point} p2 - Second point\n * @returns {Point} The sum of the two points\n */\nfunction add(p1, p2) {\n    return {\n        x: p1.x + p2.x,\n        y: p1.y + p2.y\n    };\n}\nexports.add = add;\n/**\n * Subtracts two points.\n * @param {Point} p1 - First point\n * @param {Point} p2 - Second point\n * @returns {Point} The difference of the two points\n */\nfunction subtract(p1, p2) {\n    return {\n        x: p1.x - p2.x,\n        y: p1.y - p2.y\n    };\n}\nexports.subtract = subtract;\n/**\n * A dimension with both width and height set to a negative value, which is considered as undefined.\n */\nexports.EMPTY_DIMENSION = Object.freeze({\n    width: -1,\n    height: -1\n});\n/**\n * Checks whether the given dimention is valid, i.e. the width and height are non-zero.\n * @param {Dimension} b - Dimension object\n * @returns {boolean}\n */\nfunction isValidDimension(d) {\n    return d.width >= 0 && d.height >= 0;\n}\nexports.isValidDimension = isValidDimension;\nexports.EMPTY_BOUNDS = Object.freeze({\n    x: 0,\n    y: 0,\n    width: -1,\n    height: -1\n});\nfunction isBounds(element) {\n    return 'x' in element\n        && 'y' in element\n        && 'width' in element\n        && 'height' in element;\n}\nexports.isBounds = isBounds;\n/**\n * Combines the bounds of two objects into one, so that the new bounds\n * are the minimum bounds that covers both of the original bounds.\n * @param {Bounds} b0 - First bounds object\n * @param {Bounds} b1 - Second bounds object\n * @returns {Bounds} The combined bounds\n */\nfunction combine(b0, b1) {\n    var minX = Math.min(b0.x, b1.x);\n    var minY = Math.min(b0.y, b1.y);\n    var maxX = Math.max(b0.x + (b0.width >= 0 ? b0.width : 0), b1.x + (b1.width >= 0 ? b1.width : 0));\n    var maxY = Math.max(b0.y + (b0.height >= 0 ? b0.height : 0), b1.y + (b1.height >= 0 ? b1.height : 0));\n    return {\n        x: minX, y: minY, width: maxX - minX, height: maxY - minY\n    };\n}\nexports.combine = combine;\n/**\n * Translates the given bounds.\n * @param {Bounds} b - Bounds object\n * @param {Point} p - Vector by which to translate the bounds\n * @returns {Bounds} The translated bounds\n */\nfunction translate(b, p) {\n    return {\n        x: b.x + p.x,\n        y: b.y + p.y,\n        width: b.width,\n        height: b.height\n    };\n}\nexports.translate = translate;\n/**\n * Returns the center point of the bounds of an object\n * @param {Bounds} b - Bounds object\n * @returns {Point} the center point\n */\nfunction center(b) {\n    return {\n        x: b.x + (b.width >= 0 ? 0.5 * b.width : 0),\n        y: b.y + (b.height >= 0 ? 0.5 * b.height : 0)\n    };\n}\nexports.center = center;\nfunction centerOfLine(s, e) {\n    var b = {\n        x: s.x > e.x ? e.x : s.x,\n        y: s.y > e.y ? e.y : s.y,\n        width: Math.abs(e.x - s.x),\n        height: Math.abs(e.y - s.y)\n    };\n    return center(b);\n}\nexports.centerOfLine = centerOfLine;\n/**\n * Checks whether the point p is included in the bounds b.\n */\nfunction includes(b, p) {\n    return p.x >= b.x && p.x <= b.x + b.width && p.y >= b.y && p.y <= b.y + b.height;\n}\nexports.includes = includes;\n/**\n * Enumeration of possible directions (left, right, up, down)\n */\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"left\"] = 0] = \"left\";\n    Direction[Direction[\"right\"] = 1] = \"right\";\n    Direction[Direction[\"up\"] = 2] = \"up\";\n    Direction[Direction[\"down\"] = 3] = \"down\";\n})(Direction = exports.Direction || (exports.Direction = {}));\n/**\n * Returns the \"straight line\" distance between two points.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The Eucledian distance\n */\nfunction euclideanDistance(a, b) {\n    var dx = b.x - a.x;\n    var dy = b.y - a.y;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nexports.euclideanDistance = euclideanDistance;\n/**\n * Returns the distance between two points in a grid, using a\n * strictly vertical and/or horizontal path (versus straight line).\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The Manhattan distance\n */\nfunction manhattanDistance(a, b) {\n    return Math.abs(b.x - a.x) + Math.abs(b.y - a.y);\n}\nexports.manhattanDistance = manhattanDistance;\n/**\n * Returns the maximum of the horizontal and the vertical distance.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The maximum distance\n */\nfunction maxDistance(a, b) {\n    return Math.max(Math.abs(b.x - a.x), Math.abs(b.y - a.y));\n}\nexports.maxDistance = maxDistance;\n/**\n * Computes the angle in radians of the given point to the x-axis of the coordinate system.\n * The result is in the range [-pi, pi].\n * @param {Point} p - A point in the Eucledian plane\n */\nfunction angleOfPoint(p) {\n    return Math.atan2(p.y, p.x);\n}\nexports.angleOfPoint = angleOfPoint;\n/**\n * Computes the angle in radians between the two given points (relative to the origin of the coordinate system).\n * The result is in the range [0, pi]. Returns NaN if the points are equal.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n */\nfunction angleBetweenPoints(a, b) {\n    var lengthProduct = Math.sqrt((a.x * a.x + a.y * a.y) * (b.x * b.x + b.y * b.y));\n    if (isNaN(lengthProduct) || lengthProduct === 0)\n        return NaN;\n    var dotProduct = a.x * b.x + a.y * b.y;\n    return Math.acos(dotProduct / lengthProduct);\n}\nexports.angleBetweenPoints = angleBetweenPoints;\n/**\n * Converts from radians to degrees\n * @param {number} a - A value in radians\n * @returns {number} The converted value\n */\nfunction toDegrees(a) {\n    return a * 180 / Math.PI;\n}\nexports.toDegrees = toDegrees;\n/**\n * Converts from degrees to radians\n * @param {number} a - A value in degrees\n * @returns {number} The converted value\n */\nfunction toRadians(a) {\n    return a * Math.PI / 180;\n}\nexports.toRadians = toRadians;\n/**\n * Returns whether two numbers are almost equal, within a small margin (0.001)\n * @param {number} a - First number\n * @param {number} b - Second number\n * @returns {boolean} True if the two numbers are almost equal\n */\nfunction almostEquals(a, b) {\n    return Math.abs(a - b) < 1e-3;\n}\nexports.almostEquals = almostEquals;\n//# sourceMappingURL=geometry.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/geometry.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NAMED_TAG = \"named\";\nexports.NAME_TAG = \"name\";\nexports.UNMANAGED_TAG = \"unmanaged\";\nexports.OPTIONAL_TAG = \"optional\";\nexports.INJECT_TAG = \"inject\";\nexports.MULTI_INJECT_TAG = \"multi_inject\";\nexports.TAGGED = \"inversify:tagged\";\nexports.TAGGED_PROP = \"inversify:tagged_props\";\nexports.PARAM_TYPES = \"inversify:paramtypes\";\nexports.DESIGN_PARAM_TYPES = \"design:paramtypes\";\nexports.POST_CONSTRUCT = \"post_construct\";\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/constants/metadata_keys.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\n/**\n * Base class for all commands.\n */\nvar Command = /** @class */ (function () {\n    function Command() {\n    }\n    return Command;\n}());\nexports.Command = Command;\n/**\n * A mergeable command can accumulate subsequent commands of the same kind.\n *\n * For example, multiple subsequent move commands can be merged to yield a\n * single command, such that undo will roll them back altogether. Otherwise\n * the user would have to push CTRL-Z for each mouse move element that\n * resuted in a command.\n */\nvar MergeableCommand = /** @class */ (function (_super) {\n    __extends(MergeableCommand, _super);\n    function MergeableCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Tries to merge the given command with this.\n     *\n     * @param command\n     * @param context\n     */\n    MergeableCommand.prototype.merge = function (command, context) {\n        return false;\n    };\n    return MergeableCommand;\n}(Command));\nexports.MergeableCommand = MergeableCommand;\n/**\n * A hidden command is used to trigger the rendering of a model on a\n * hidden canvas.\n *\n * Some graphical elements are styled using CSS, others have bounds that\n * require to layout their children before being computed. In such cases\n * we cannot tell about the size of elements without acutally rendering\n * the DOM. We render them to an invisible canvas. This can be achieved\n * using hidden commands.\n *\n * Hidden commands do not change the model directly, and are as such\n * neither undoable nor redoable. The command stack does not push them on\n * any stack and forwards the resulting model to the invisible viewer.\n */\nvar HiddenCommand = /** @class */ (function (_super) {\n    __extends(HiddenCommand, _super);\n    function HiddenCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HiddenCommand.prototype.undo = function (context) {\n        context.logger.error(this, 'Cannot undo a hidden command');\n        return context.root;\n    };\n    HiddenCommand.prototype.redo = function (context) {\n        context.logger.error(this, 'Cannot redo a hidden command');\n        return context.root;\n    };\n    return HiddenCommand;\n}(Command));\nexports.HiddenCommand = HiddenCommand;\nvar PopupCommand = /** @class */ (function (_super) {\n    __extends(PopupCommand, _super);\n    function PopupCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PopupCommand;\n}(Command));\nexports.PopupCommand = PopupCommand;\n/**\n * A system command is triggered by the system, e.g. in order to update bounds\n * in the model with data fetched from the DOM.\n *\n * As it is automatically triggered it should not count as a single command in\n * undo/redo operations. Into the bargain, such an automatic command could occur\n * after an undo and as such make the next redo command invalid because it is\n * based on a model state that has changed. The command stack handles system\n * commands in a special way to overcome these issues.\n */\nvar SystemCommand = /** @class */ (function (_super) {\n    __extends(SystemCommand, _super);\n    function SystemCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return SystemCommand;\n}(Command));\nexports.SystemCommand = SystemCommand;\nvar CommandActionHandler = /** @class */ (function () {\n    function CommandActionHandler(commandType) {\n        this.commandType = commandType;\n    }\n    CommandActionHandler.prototype.handle = function (action) {\n        return new this.commandType(action);\n    };\n    return CommandActionHandler;\n}());\nexports.CommandActionHandler = CommandActionHandler;\nvar CommandActionHandlerInitializer = /** @class */ (function () {\n    function CommandActionHandlerInitializer(commandCtrs) {\n        this.commandCtrs = commandCtrs;\n    }\n    CommandActionHandlerInitializer.prototype.initialize = function (registry) {\n        this.commandCtrs.forEach(function (commandCtr) { return registry.registerCommand(commandCtr); });\n    };\n    CommandActionHandlerInitializer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.ICommand)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], CommandActionHandlerInitializer);\n    return CommandActionHandlerInitializer;\n}());\nexports.CommandActionHandlerInitializer = CommandActionHandlerInitializer;\n//# sourceMappingURL=command.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/commands/command.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"./smodel\");\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the basic type of a model element.\n */\nfunction getBasicType(schema) {\n    if (!schema.type)\n        return '';\n    var colonIndex = schema.type.indexOf(':');\n    if (colonIndex >= 0)\n        return schema.type.substring(0, colonIndex);\n    else\n        return schema.type;\n}\nexports.getBasicType = getBasicType;\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the sub-type of a model element.\n */\nfunction getSubType(schema) {\n    if (!schema.type)\n        return '';\n    var colonIndex = schema.type.indexOf(':');\n    if (colonIndex >= 0)\n        return schema.type.substring(colonIndex + 1);\n    else\n        return schema.type;\n}\nexports.getSubType = getSubType;\n/**\n * Find the element with the given identifier. If you need to find multiple elements, using an\n * SModelIndex might be more effective.\n */\nfunction findElement(parent, elementId) {\n    if (parent.id === elementId)\n        return parent;\n    if (parent.children !== undefined) {\n        for (var _i = 0, _a = parent.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            var result = findElement(child, elementId);\n            if (result !== undefined)\n                return result;\n        }\n    }\n    return undefined;\n}\nexports.findElement = findElement;\n/**\n * Find a parent element that satisfies the given predicate.\n */\nfunction findParent(element, predicate) {\n    var current = element;\n    while (current !== undefined) {\n        if (predicate(current))\n            return current;\n        else if (current instanceof smodel_1.SChildElement)\n            current = current.parent;\n        else\n            current = undefined;\n    }\n    return current;\n}\nexports.findParent = findParent;\n/**\n * Find a parent element that implements the feature identified with the given predicate.\n */\nfunction findParentByFeature(element, predicate) {\n    var current = element;\n    while (current !== undefined) {\n        if (predicate(current))\n            return current;\n        else if (current instanceof smodel_1.SChildElement)\n            current = current.parent;\n        else\n            current = undefined;\n    }\n    return current;\n}\nexports.findParentByFeature = findParentByFeature;\n/**\n * Translate a point from the coordinate system of the source element to the coordinate system\n * of the target element.\n */\nfunction translatePoint(point, source, target) {\n    if (source !== target) {\n        // Translate from the source to the root element\n        while (source instanceof smodel_1.SChildElement) {\n            point = source.localToParent(point);\n            source = source.parent;\n            if (source === target)\n                return point;\n        }\n        // Translate from the root to the target element\n        var targetTrace = [];\n        while (target instanceof smodel_1.SChildElement) {\n            targetTrace.push(target);\n            target = target.parent;\n        }\n        if (source !== target)\n            throw new Error(\"Incompatible source and target: \" + source.id + \", \" + target.id);\n        for (var i = targetTrace.length - 1; i >= 0; i--) {\n            point = targetTrace[i].parentToLocal(point);\n        }\n    }\n    return point;\n}\nexports.translatePoint = translatePoint;\n//# sourceMappingURL=smodel-utils.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/model/smodel-utils.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nexports.boundsFeature = Symbol('boundsFeature');\nexports.layoutContainerFeature = Symbol('layoutContainerFeature');\nexports.layoutableChildFeature = Symbol('layoutableChildFeature');\nexports.alignFeature = Symbol('alignFeature');\nfunction isBoundsAware(element) {\n    return 'bounds' in element;\n}\nexports.isBoundsAware = isBoundsAware;\nfunction isLayoutContainer(element) {\n    return isBoundsAware(element)\n        && element.hasFeature(exports.layoutContainerFeature)\n        && 'layout' in element;\n}\nexports.isLayoutContainer = isLayoutContainer;\nfunction isLayoutableChild(element) {\n    return isBoundsAware(element)\n        && element.hasFeature(exports.layoutableChildFeature);\n}\nexports.isLayoutableChild = isLayoutableChild;\nfunction isSizeable(element) {\n    return element.hasFeature(exports.boundsFeature) && isBoundsAware(element);\n}\nexports.isSizeable = isSizeable;\nfunction isAlignable(element) {\n    return element.hasFeature(exports.alignFeature)\n        && 'alignment' in element;\n}\nexports.isAlignable = isAlignable;\nfunction getAbsoluteBounds(element) {\n    var boundsAware = smodel_utils_1.findParentByFeature(element, isBoundsAware);\n    if (boundsAware !== undefined) {\n        var bounds = boundsAware.bounds;\n        var current = boundsAware;\n        while (current instanceof smodel_1.SChildElement) {\n            var parent_1 = current.parent;\n            bounds = parent_1.localToParent(bounds);\n            current = parent_1;\n        }\n        return bounds;\n    }\n    else if (element instanceof smodel_1.SModelRoot) {\n        var canvasBounds = element.canvasBounds;\n        return { x: 0, y: 0, width: canvasBounds.width, height: canvasBounds.height };\n    }\n    else {\n        return geometry_1.EMPTY_BOUNDS;\n    }\n}\nexports.getAbsoluteBounds = getAbsoluteBounds;\n/**\n * Abstract class for elements with a position and a size.\n */\nvar SShapeElement = /** @class */ (function (_super) {\n    __extends(SShapeElement, _super);\n    function SShapeElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.position = geometry_1.ORIGIN_POINT;\n        _this.size = geometry_1.EMPTY_DIMENSION;\n        return _this;\n    }\n    Object.defineProperty(SShapeElement.prototype, \"bounds\", {\n        get: function () {\n            return {\n                x: this.position.x,\n                y: this.position.y,\n                width: this.size.width,\n                height: this.size.height\n            };\n        },\n        set: function (newBounds) {\n            this.position = {\n                x: newBounds.x,\n                y: newBounds.y\n            };\n            this.size = {\n                width: newBounds.width,\n                height: newBounds.height\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SShapeElement.prototype.localToParent = function (point) {\n        var result = {\n            x: point.x + this.position.x,\n            y: point.y + this.position.y,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point)) {\n            result.width = point.width;\n            result.height = point.height;\n        }\n        return result;\n    };\n    SShapeElement.prototype.parentToLocal = function (point) {\n        var result = {\n            x: point.x - this.position.x,\n            y: point.y - this.position.y,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point)) {\n            result.width = point.width;\n            result.height = point.height;\n        }\n        return result;\n    };\n    return SShapeElement;\n}(smodel_1.SChildElement));\nexports.SShapeElement = SShapeElement;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/model.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar template_1 = require(\"../utils/template\");\nexports.DUPLICATED_INJECTABLE_DECORATOR = \"Cannot apply @injectable decorator multiple times.\";\nexports.DUPLICATED_METADATA = \"Metadata key was used more than once in a parameter:\";\nexports.NULL_ARGUMENT = \"NULL argument\";\nexports.KEY_NOT_FOUND = \"Key Not Found\";\nexports.AMBIGUOUS_MATCH = \"Ambiguous match found for serviceIdentifier:\";\nexports.CANNOT_UNBIND = \"Could not unbind serviceIdentifier:\";\nexports.NOT_REGISTERED = \"No matching bindings found for serviceIdentifier:\";\nexports.MISSING_INJECTABLE_ANNOTATION = \"Missing required @injectable annotation in:\";\nexports.MISSING_INJECT_ANNOTATION = \"Missing required @inject or @multiInject annotation in:\";\nexports.CIRCULAR_DEPENDENCY = \"Circular dependency found:\";\nexports.NOT_IMPLEMENTED = \"Sorry, this feature is not fully implemented yet.\";\nexports.INVALID_BINDING_TYPE = \"Invalid binding type:\";\nexports.NO_MORE_SNAPSHOTS_AVAILABLE = \"No snapshot available to restore.\";\nexports.INVALID_MIDDLEWARE_RETURN = \"Invalid return type in middleware. Middleware must return!\";\nexports.INVALID_FUNCTION_BINDING = \"Value provided to function binding must be a function!\";\nexports.INVALID_TO_SELF_VALUE = \"The toSelf function can only be applied when a constructor is \" +\n    \"used as service identifier\";\nexports.INVALID_DECORATOR_OPERATION = \"The @inject @multiInject @tagged and @named decorators \" +\n    \"must be applied to the parameters of a class constructor or a class property.\";\nexports.ARGUMENTS_LENGTH_MISMATCH_1 = \"The number of constructor arguments in the derived class \";\nexports.ARGUMENTS_LENGTH_MISMATCH_2 = \" must be >= than the number of constructor arguments of its base class.\";\nexports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = \"Invalid Container constructor argument. Container options \" +\n    \"must be an object.\";\nexports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = \"Invalid Container option. Default scope must \" +\n    \"be a string ('singleton' or 'transient').\";\nexports.MULTIPLE_POST_CONSTRUCT_METHODS = \"Cannot apply @postConstruct decorator multiple times in the same class\";\nexports.POST_CONSTRUCT_ERROR = (_a = [\"@postConstruct error in class \", \": \", \"\"], _a.raw = [\"@postConstruct error in class \", \": \", \"\"], template_1.template(_a, 0, 1));\nvar _a;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/constants/error_msgs.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar Metadata = (function () {\n    function Metadata(key, value) {\n        this.key = key;\n        this.value = value;\n    }\n    Metadata.prototype.toString = function () {\n        if (this.key === METADATA_KEY.NAMED_TAG) {\n            return \"named: \" + this.value.toString() + \" \";\n        }\n        else {\n            return \"tagged: { key:\" + this.key.toString() + \", value: \" + this.value + \" }\";\n        }\n    };\n    return Metadata;\n}());\nexports.Metadata = Metadata;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/metadata.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar smodel_1 = require(\"./smodel\");\n/**\n * The default model factory creates SModelRoot for the root element and SChildElement for all other\n * model elements.\n */\nvar SModelFactory = /** @class */ (function () {\n    function SModelFactory(registry) {\n        this.registry = registry;\n    }\n    SModelFactory.prototype.createElement = function (schema, parent) {\n        var child;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SChildElement))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SChildElement.\");\n            child = regElement;\n        }\n        else {\n            child = new smodel_1.SChildElement();\n        }\n        return this.initializeChild(child, schema, parent);\n    };\n    SModelFactory.prototype.createRoot = function (schema) {\n        var root;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SModelRoot))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SModelRoot.\");\n            root = regElement;\n        }\n        else {\n            root = new smodel_1.SModelRoot();\n        }\n        return this.initializeRoot(root, schema);\n    };\n    SModelFactory.prototype.createSchema = function (element) {\n        var _this = this;\n        var schema = {};\n        for (var key in element) {\n            if (!this.isReserved(element, key)) {\n                var value = element[key];\n                if (typeof value !== 'function')\n                    schema[key] = value;\n            }\n        }\n        if (element instanceof smodel_1.SParentElement)\n            schema['children'] = element.children.map(function (child) { return _this.createSchema(child); });\n        return schema;\n    };\n    SModelFactory.prototype.initializeElement = function (element, schema) {\n        for (var key in schema) {\n            if (!this.isReserved(element, key)) {\n                var value = schema[key];\n                if (typeof value !== 'function')\n                    element[key] = value;\n            }\n        }\n        return element;\n    };\n    SModelFactory.prototype.isReserved = function (element, propertyName) {\n        if (['children', 'parent', 'index'].indexOf(propertyName) >= 0)\n            return true;\n        var obj = element;\n        do {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, propertyName);\n            if (descriptor !== undefined)\n                return descriptor.get !== undefined;\n            obj = Object.getPrototypeOf(obj);\n        } while (obj);\n        return false;\n    };\n    SModelFactory.prototype.initializeParent = function (parent, schema) {\n        var _this = this;\n        this.initializeElement(parent, schema);\n        if (smodel_1.isParent(schema)) {\n            parent.children = schema.children.map(function (childSchema) { return _this.createElement(childSchema, parent); });\n        }\n        return parent;\n    };\n    SModelFactory.prototype.initializeChild = function (child, schema, parent) {\n        this.initializeParent(child, schema);\n        if (parent !== undefined) {\n            child.parent = parent;\n        }\n        return child;\n    };\n    SModelFactory.prototype.initializeRoot = function (root, schema) {\n        this.initializeParent(root, schema);\n        root.index.add(root);\n        return root;\n    };\n    SModelFactory = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.SModelRegistry)),\n        __metadata(\"design:paramtypes\", [SModelRegistry])\n    ], SModelFactory);\n    return SModelFactory;\n}());\nexports.SModelFactory = SModelFactory;\nexports.EMPTY_ROOT = Object.freeze({\n    type: 'NONE',\n    id: 'EMPTY'\n});\n/**\n * Model element classes registered here are considered automatically when constructring a model from its schema.\n */\nvar SModelRegistry = /** @class */ (function (_super) {\n    __extends(SModelRegistry, _super);\n    function SModelRegistry(registrations) {\n        var _this = _super.call(this) || this;\n        registrations.forEach(function (registration) { return _this.register(registration.type, registration.constr); });\n        return _this;\n    }\n    SModelRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.SModelElementRegistration)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], SModelRegistry);\n    return SModelRegistry;\n}(registry_1.ProviderRegistry));\nexports.SModelRegistry = SModelRegistry;\n//# sourceMappingURL=smodel-factory.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/model/smodel-factory.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction setAttr(vnode, name, value) {\n    getAttrs(vnode)[name] = value;\n}\nexports.setAttr = setAttr;\nfunction setClass(vnode, name, value) {\n    getClass(vnode)[name] = value;\n}\nexports.setClass = setClass;\nfunction copyClassesFromVNode(source, target) {\n    var classList = getClass(source);\n    for (var c in classList) {\n        if (classList.hasOwnProperty(c))\n            setClass(target, c, true);\n    }\n}\nexports.copyClassesFromVNode = copyClassesFromVNode;\nfunction copyClassesFromElement(element, target) {\n    var classList = element.classList;\n    for (var i = 0; i < classList.length; i++) {\n        var item = classList.item(i);\n        if (item)\n            setClass(target, item, true);\n    }\n}\nexports.copyClassesFromElement = copyClassesFromElement;\nfunction mergeStyle(vnode, style) {\n    getData(vnode).style = __assign({}, (getData(vnode).style || {}), style);\n}\nexports.mergeStyle = mergeStyle;\nfunction on(vnode, event, listener, element) {\n    var val = getOn(vnode);\n    if (val[event]) {\n        throw new Error('EventListener for ' + event + ' already registered on VNode');\n    }\n    val[event] = [listener, element];\n}\nexports.on = on;\nfunction getAttrs(vnode) {\n    var data = getData(vnode);\n    if (!data.attrs)\n        data.attrs = {};\n    return data.attrs;\n}\nexports.getAttrs = getAttrs;\nfunction getData(vnode) {\n    if (!vnode.data)\n        vnode.data = {};\n    return vnode.data;\n}\nfunction getClass(vnode) {\n    var data = getData(vnode);\n    if (!data.class)\n        data.class = {};\n    return data.class;\n}\nfunction getOn(vnode) {\n    var data = getData(vnode);\n    if (!data.on)\n        data.on = {};\n    return data.on;\n}\n//# sourceMappingURL=vnode-utils.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/vnode-utils.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.selectFeature = Symbol('selectFeature');\nfunction isSelectable(element) {\n    return element.hasFeature(exports.selectFeature);\n}\nexports.isSelectable = isSelectable;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/select/model.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction tagParameter(annotationTarget, propertyName, parameterIndex, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED;\n    _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex);\n}\nexports.tagParameter = tagParameter;\nfunction tagProperty(annotationTarget, propertyName, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED_PROP;\n    _tagParameterOrProperty(metadataKey, annotationTarget.constructor, propertyName, metadata);\n}\nexports.tagProperty = tagProperty;\nfunction _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex) {\n    var paramsOrPropertiesMetadata = {};\n    var isParameterDecorator = (typeof parameterIndex === \"number\");\n    var key = (parameterIndex !== undefined && isParameterDecorator) ? parameterIndex.toString() : propertyName;\n    if (isParameterDecorator === true && propertyName !== undefined) {\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\n    }\n    if (Reflect.hasOwnMetadata(metadataKey, annotationTarget) === true) {\n        paramsOrPropertiesMetadata = Reflect.getMetadata(metadataKey, annotationTarget);\n    }\n    var paramOrPropertyMetadata = paramsOrPropertiesMetadata[key];\n    if (Array.isArray(paramOrPropertyMetadata) !== true) {\n        paramOrPropertyMetadata = [];\n    }\n    else {\n        for (var i = 0; i < paramOrPropertyMetadata.length; i++) {\n            var m = paramOrPropertyMetadata[i];\n            if (m.key === metadata.key) {\n                throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + m.key);\n            }\n        }\n    }\n    paramOrPropertyMetadata.push(metadata);\n    paramsOrPropertiesMetadata[key] = paramOrPropertyMetadata;\n    Reflect.defineMetadata(metadataKey, paramsOrPropertiesMetadata, annotationTarget);\n}\nfunction _decorate(decorators, target) {\n    Reflect.decorate(decorators, target);\n}\nfunction _param(paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); };\n}\nfunction decorate(decorator, target, parameterIndex) {\n    if (typeof parameterIndex === \"number\") {\n        _decorate([_param(parameterIndex, decorator)], target);\n    }\n    else if (typeof parameterIndex === \"string\") {\n        Reflect.decorate([decorator], target, parameterIndex);\n    }\n    else {\n        _decorate([decorator], target);\n    }\n}\nexports.decorate = decorate;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/decorator_utils.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BindingScopeEnum = {\n    Singleton: \"Singleton\",\n    Transient: \"Transient\"\n};\nexports.BindingScopeEnum = BindingScopeEnum;\nvar BindingTypeEnum = {\n    ConstantValue: \"ConstantValue\",\n    Constructor: \"Constructor\",\n    DynamicValue: \"DynamicValue\",\n    Factory: \"Factory\",\n    Function: \"Function\",\n    Instance: \"Instance\",\n    Invalid: \"Invalid\",\n    Provider: \"Provider\"\n};\nexports.BindingTypeEnum = BindingTypeEnum;\nvar TargetTypeEnum = {\n    ClassProperty: \"ClassProperty\",\n    ConstructorArgument: \"ConstructorArgument\",\n    Variable: \"Variable\"\n};\nexports.TargetTypeEnum = TargetTypeEnum;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/constants/literal_types.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_1 = require(\"../model/smodel\");\nvar action_1 = require(\"../actions/action\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar dom_helper_1 = require(\"./dom-helper\");\nvar MouseTool = /** @class */ (function () {\n    function MouseTool(actionDispatcher, domHelper, mouseListeners) {\n        if (mouseListeners === void 0) { mouseListeners = []; }\n        this.actionDispatcher = actionDispatcher;\n        this.domHelper = domHelper;\n        this.mouseListeners = mouseListeners;\n    }\n    MouseTool.prototype.register = function (mouseListener) {\n        this.mouseListeners.push(mouseListener);\n    };\n    MouseTool.prototype.deregister = function (mouseListener) {\n        var index = this.mouseListeners.indexOf(mouseListener);\n        if (index >= 0)\n            this.mouseListeners.splice(index, 1);\n    };\n    MouseTool.prototype.getTargetElement = function (model, event) {\n        var target = event.target;\n        var index = model.index;\n        while (target) {\n            if (target.id) {\n                var element = index.getById(this.domHelper.findSModelIdByDOMElement(target));\n                if (element !== undefined)\n                    return element;\n            }\n            target = target.parentNode;\n        }\n        return undefined;\n    };\n    MouseTool.prototype.handleEvent = function (methodName, model, event) {\n        var _this = this;\n        this.focusOnMouseEvent(methodName, model);\n        var element = this.getTargetElement(model, event);\n        if (!element)\n            return;\n        var actions = this.mouseListeners\n            .map(function (listener) { return listener[methodName].apply(listener, [element, event]); })\n            .reduce(function (a, b) { return a.concat(b); });\n        if (actions.length > 0) {\n            event.preventDefault();\n            for (var _i = 0, actions_1 = actions; _i < actions_1.length; _i++) {\n                var actionOrPromise = actions_1[_i];\n                if (action_1.isAction(actionOrPromise)) {\n                    this.actionDispatcher.dispatch(actionOrPromise);\n                }\n                else {\n                    actionOrPromise.then(function (action) {\n                        _this.actionDispatcher.dispatch(action);\n                    });\n                }\n            }\n        }\n    };\n    MouseTool.prototype.focusOnMouseEvent = function (methodName, model) {\n        if (document) {\n            var domElement = document.getElementById(this.domHelper.createUniqueDOMElementId(model));\n            if (methodName === 'mouseDown' && domElement !== null && typeof domElement.focus === 'function')\n                domElement.focus();\n        }\n    };\n    MouseTool.prototype.mouseOver = function (model, event) {\n        this.handleEvent('mouseOver', model, event);\n    };\n    MouseTool.prototype.mouseOut = function (model, event) {\n        this.handleEvent('mouseOut', model, event);\n    };\n    MouseTool.prototype.mouseEnter = function (model, event) {\n        this.handleEvent('mouseEnter', model, event);\n    };\n    MouseTool.prototype.mouseLeave = function (model, event) {\n        this.handleEvent('mouseLeave', model, event);\n    };\n    MouseTool.prototype.mouseDown = function (model, event) {\n        this.handleEvent('mouseDown', model, event);\n    };\n    MouseTool.prototype.mouseMove = function (model, event) {\n        this.handleEvent('mouseMove', model, event);\n    };\n    MouseTool.prototype.mouseUp = function (model, event) {\n        this.handleEvent('mouseUp', model, event);\n    };\n    MouseTool.prototype.wheel = function (model, event) {\n        this.handleEvent('wheel', model, event);\n    };\n    MouseTool.prototype.doubleClick = function (model, event) {\n        this.handleEvent('doubleClick', model, event);\n    };\n    MouseTool.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot) {\n            vnode_utils_1.on(vnode, 'mouseover', this.mouseOver.bind(this), element);\n            vnode_utils_1.on(vnode, 'mouseout', this.mouseOut.bind(this), element);\n            vnode_utils_1.on(vnode, 'mouseenter', this.mouseEnter.bind(this), element);\n            vnode_utils_1.on(vnode, 'mouseleave', this.mouseLeave.bind(this), element);\n            vnode_utils_1.on(vnode, 'mousedown', this.mouseDown.bind(this), element);\n            vnode_utils_1.on(vnode, 'mouseup', this.mouseUp.bind(this), element);\n            vnode_utils_1.on(vnode, 'mousemove', this.mouseMove.bind(this), element);\n            vnode_utils_1.on(vnode, 'wheel', this.wheel.bind(this), element);\n            vnode_utils_1.on(vnode, 'contextmenu', function (target, event) {\n                event.preventDefault();\n            }, element);\n            vnode_utils_1.on(vnode, 'dblclick', this.doubleClick.bind(this), element);\n        }\n        vnode = this.mouseListeners.reduce(function (n, listener) { return listener.decorate(n, element); }, vnode);\n        return vnode;\n    };\n    MouseTool.prototype.postUpdate = function () {\n    };\n    MouseTool = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.inject(types_1.TYPES.DOMHelper)),\n        __param(2, inversify_1.multiInject(types_1.TYPES.MouseListener)), __param(2, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Object, dom_helper_1.DOMHelper, Array])\n    ], MouseTool);\n    return MouseTool;\n}());\nexports.MouseTool = MouseTool;\nvar PopupMouseTool = /** @class */ (function (_super) {\n    __extends(PopupMouseTool, _super);\n    function PopupMouseTool(actionDispatcher, domHelper, mouseListeners) {\n        if (mouseListeners === void 0) { mouseListeners = []; }\n        var _this = _super.call(this, actionDispatcher, domHelper, mouseListeners) || this;\n        _this.actionDispatcher = actionDispatcher;\n        _this.domHelper = domHelper;\n        _this.mouseListeners = mouseListeners;\n        return _this;\n    }\n    PopupMouseTool = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.inject(types_1.TYPES.DOMHelper)),\n        __param(2, inversify_1.multiInject(types_1.TYPES.PopupMouseListener)), __param(2, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Object, dom_helper_1.DOMHelper, Array])\n    ], PopupMouseTool);\n    return PopupMouseTool;\n}(MouseTool));\nexports.PopupMouseTool = PopupMouseTool;\nvar MouseListener = /** @class */ (function () {\n    function MouseListener() {\n    }\n    MouseListener.prototype.mouseOver = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseOut = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseEnter = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseLeave = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseDown = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseMove = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseUp = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.wheel = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.doubleClick = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.decorate = function (vnode, element) {\n        return vnode;\n    };\n    MouseListener = __decorate([\n        inversify_1.injectable()\n    ], MouseListener);\n    return MouseListener;\n}());\nexports.MouseListener = MouseListener;\n//# sourceMappingURL=mouse-tool.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/mouse-tool.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nexports.viewportFeature = Symbol('viewportFeature');\nfunction isViewport(element) {\n    return element instanceof smodel_1.SModelRoot\n        && element.hasFeature(exports.viewportFeature)\n        && 'zoom' in element\n        && 'scroll' in element;\n}\nexports.isViewport = isViewport;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/model.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction guid() {\n    function s4() {\n        return Math.floor((1 + Math.random()) * 0x10000)\n            .toString(16)\n            .substring(1);\n    }\n    return s4() + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" +\n        s4() + \"-\" + s4() + s4() + s4();\n}\nexports.guid = guid;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/utils/guid.js","\"use strict\";\r\n\r\nvar SVGNS = 'http://www.w3.org/2000/svg';\r\nvar modulesNS = ['hook', 'on', 'style', 'class', 'props', 'attrs', 'dataset'];\r\nvar slice = Array.prototype.slice;\r\n\r\nfunction isPrimitive(val) {\r\n  return  typeof val === 'string'   ||\r\n          typeof val === 'number'   ||\r\n          typeof val === 'boolean'  ||\r\n          typeof val === 'symbol'   ||\r\n          val === null              ||\r\n          val === undefined;\r\n}\r\n\r\nfunction normalizeAttrs(attrs, nsURI, defNS, modules) {\r\n  var map = { ns: nsURI };\r\n  for (var i = 0, len = modules.length; i < len; i++) {\r\n    var mod = modules[i];\r\n    if(attrs[mod])\r\n      map[mod] = attrs[mod];\r\n  }\r\n  for(var key in attrs) {\r\n    if(key !== 'key' && key !== 'classNames' && key !== 'selector') {\r\n      var idx = key.indexOf('-');\r\n      if(idx > 0)\r\n        addAttr(key.slice(0, idx), key.slice(idx+1), attrs[key]);\r\n      else if(!map[key])\r\n        addAttr(defNS, key, attrs[key]);\r\n    }\r\n  }\r\n  return map;\r\n\r\n  function addAttr(namespace, key, val) {\r\n    var ns = map[namespace] || (map[namespace] = {});\r\n    ns[key] = val;\r\n  }\r\n}\r\n\r\nfunction buildFromStringTag(nsURI, defNS, modules, tag, attrs, children) {\r\n\r\n  if(attrs.selector) {\r\n    tag = tag + attrs.selector;\r\n  }\r\n  if(attrs.classNames) {\r\n    var cns = attrs.classNames;\r\n    tag = tag + '.' + (\r\n      Array.isArray(cns) ? cns.join('.') : cns.replace(/\\s+/g, '.')\r\n    );\r\n  }\r\n\r\n  return {\r\n    sel       : tag,\r\n    data      : normalizeAttrs(attrs, nsURI, defNS, modules),\r\n    children  : children.map( function(c) {\r\n      return isPrimitive(c) ? {text: c} : c;\r\n    }),\r\n    key: attrs.key\r\n  };\r\n}\r\n\r\nfunction buildFromComponent(nsURI, defNS, modules, tag, attrs, children) {\r\n  var res;\r\n  if(typeof tag === 'function')\r\n    res = tag(attrs, children);\r\n  else if(tag && typeof tag.view === 'function')\r\n    res = tag.view(attrs, children);\r\n  else if(tag && typeof tag.render === 'function')\r\n    res = tag.render(attrs, children);\r\n  else\r\n    throw \"JSX tag must be either a string, a function or an object with 'view' or 'render' methods\";\r\n  res.key = attrs.key;\r\n  return res;\r\n}\r\n\r\nfunction flatten(nested, start, flat) {\r\n  for (var i = start, len = nested.length; i < len; i++) {\r\n    var item = nested[i];\r\n    if (Array.isArray(item)) {\r\n      flatten(item, 0, flat);\r\n    } else {\r\n      flat.push(item);\r\n    }\r\n  }\r\n}\r\n\r\nfunction maybeFlatten(array) {\r\n  if (array) {\r\n    for (var i = 0, len = array.length; i < len; i++) {\r\n      if (Array.isArray(array[i])) {\r\n        var flat = array.slice(0, i);\r\n        flatten(array, i, flat);\r\n        array = flat;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return array;\r\n}\r\n\r\nfunction buildVnode(nsURI, defNS, modules, tag, attrs, children) {\r\n  attrs = attrs || {};\r\n  children = maybeFlatten(children);\r\n  if(typeof tag === 'string') {\r\n    return buildFromStringTag(nsURI, defNS, modules, tag, attrs, children)\r\n  } else {\r\n    return buildFromComponent(nsURI, defNS, modules, tag, attrs, children)\r\n  }\r\n}\r\n\r\nfunction JSX(nsURI, defNS, modules) {\r\n  return function jsxWithCustomNS(tag, attrs, children) {\r\n    if(arguments.length > 3 || !Array.isArray(children))\r\n      children = slice.call(arguments, 2);\r\n    return buildVnode(nsURI, defNS || 'props', modules || modulesNS, tag, attrs, children);\r\n  };\r\n}\r\n\r\nmodule.exports = {\r\n  html: JSX(undefined),\r\n  svg: JSX(SVGNS, 'attrs'),\r\n  JSX: JSX\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom-jsx/snabbdom-jsx.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar easing_1 = require(\"./easing\");\n/**\n * An animation uses the rendering loop of the browser to smoothly\n * calculate a transition between two states of a model element.\n */\nvar Animation = /** @class */ (function () {\n    function Animation(context, ease) {\n        if (ease === void 0) { ease = easing_1.easeInOut; }\n        this.context = context;\n        this.ease = ease;\n    }\n    Animation.prototype.start = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var start = undefined;\n            var frames = 0;\n            var lambda = function (time) {\n                frames++;\n                var dtime;\n                if (start === undefined) {\n                    start = time;\n                    dtime = 0;\n                }\n                else {\n                    dtime = time - start;\n                }\n                var t = Math.min(1, dtime / _this.context.duration);\n                var current = _this.tween(_this.ease(t), _this.context);\n                _this.context.modelChanged.update(current);\n                if (t === 1) {\n                    _this.context.logger.log(_this, (frames * 1000 / _this.context.duration) + ' fps');\n                    resolve(current);\n                }\n                else {\n                    _this.context.syncer.onNextFrame(lambda);\n                }\n            };\n            if (_this.context.syncer.isAvailable()) {\n                _this.context.syncer.onNextFrame(lambda);\n            }\n            else {\n                var finalModel = _this.tween(1, _this.context);\n                resolve(finalModel);\n            }\n        });\n    };\n    return Animation;\n}());\nexports.Animation = Animation;\nvar CompoundAnimation = /** @class */ (function (_super) {\n    __extends(CompoundAnimation, _super);\n    function CompoundAnimation(model, context, components, ease) {\n        if (components === void 0) { components = []; }\n        if (ease === void 0) { ease = easing_1.easeInOut; }\n        var _this = _super.call(this, context, ease) || this;\n        _this.model = model;\n        _this.context = context;\n        _this.components = components;\n        _this.ease = ease;\n        return _this;\n    }\n    CompoundAnimation.prototype.include = function (animation) {\n        this.components.push(animation);\n        return this;\n    };\n    CompoundAnimation.prototype.tween = function (t, context) {\n        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {\n            var a = _a[_i];\n            a.tween(t, context);\n        }\n        return this.model;\n    };\n    return CompoundAnimation;\n}(Animation));\nexports.CompoundAnimation = CompoundAnimation;\n//# sourceMappingURL=animation.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/animations/animation.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_1 = require(\"../model/smodel\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar KeyTool = /** @class */ (function () {\n    function KeyTool(actionDispatcher, keyListeners) {\n        if (keyListeners === void 0) { keyListeners = []; }\n        this.actionDispatcher = actionDispatcher;\n        this.keyListeners = keyListeners;\n    }\n    KeyTool.prototype.register = function (keyListener) {\n        this.keyListeners.push(keyListener);\n    };\n    KeyTool.prototype.deregister = function (keyListener) {\n        var index = this.keyListeners.indexOf(keyListener);\n        if (index >= 0)\n            this.keyListeners.splice(index, 1);\n    };\n    KeyTool.prototype.handleEvent = function (methodName, model, event) {\n        var actions = this.keyListeners\n            .map(function (listener) { return listener[methodName].apply(listener, [model, event]); })\n            .reduce(function (a, b) { return a.concat(b); });\n        if (actions.length > 0) {\n            event.preventDefault();\n            this.actionDispatcher.dispatchAll(actions);\n        }\n    };\n    KeyTool.prototype.keyDown = function (element, event) {\n        this.handleEvent('keyDown', element, event);\n    };\n    KeyTool.prototype.focus = function () { };\n    KeyTool.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot) {\n            vnode_utils_1.on(vnode, 'focus', this.focus.bind(this), element);\n            vnode_utils_1.on(vnode, 'keydown', this.keyDown.bind(this), element);\n        }\n        return vnode;\n    };\n    KeyTool.prototype.postUpdate = function () {\n    };\n    KeyTool = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.multiInject(types_1.TYPES.KeyListener)), __param(1, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Object, Array])\n    ], KeyTool);\n    return KeyTool;\n}());\nexports.KeyTool = KeyTool;\nvar KeyListener = /** @class */ (function () {\n    function KeyListener() {\n    }\n    KeyListener.prototype.keyDown = function (element, event) {\n        return [];\n    };\n    KeyListener = __decorate([\n        inversify_1.injectable()\n    ], KeyListener);\n    return KeyListener;\n}());\nexports.KeyListener = KeyListener;\n//# sourceMappingURL=key-tool.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/key-tool.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"../select/model\");\nvar model_2 = require(\"../move/model\");\nvar model_3 = require(\"../hover/model\");\nexports.editFeature = Symbol('editFeature');\nfunction isRoutable(element) {\n    return element.routingPoints !== undefined && typeof (element.route) === 'function';\n}\nexports.isRoutable = isRoutable;\nfunction canEditRouting(element) {\n    return isRoutable(element) && element.hasFeature(exports.editFeature);\n}\nexports.canEditRouting = canEditRouting;\nvar SRoutingHandle = /** @class */ (function (_super) {\n    __extends(SRoutingHandle, _super);\n    function SRoutingHandle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /** Whether the routing point is being dragged. */\n        _this.editMode = false;\n        _this.hoverFeedback = false;\n        _this.selected = false;\n        return _this;\n    }\n    SRoutingHandle.prototype.hasFeature = function (feature) {\n        return feature === model_1.selectFeature || feature === model_2.moveFeature || feature === model_3.hoverFeedbackFeature;\n    };\n    return SRoutingHandle;\n}(smodel_1.SChildElement));\nexports.SRoutingHandle = SRoutingHandle;\n/** The angle in radians below which a routing handle is removed. */\nvar HANDLE_REMOVE_THRESHOLD = 0.1;\n/**\n * Remove routed points that are in edit mode and for which the angle between the preceding and\n * following points falls below a threshold.\n */\nfunction filterEditModeHandles(route, parent) {\n    if (parent.children.length === 0)\n        return route;\n    var i = 0;\n    var _loop_1 = function () {\n        var curr = route[i];\n        if (curr.pointIndex !== undefined) {\n            var handle = parent.children.find(function (child) {\n                return child instanceof SRoutingHandle && child.kind === 'junction' && child.pointIndex === curr.pointIndex;\n            });\n            if (handle !== undefined && handle.editMode && i > 0 && i < route.length - 1) {\n                var prev = route[i - 1], next = route[i + 1];\n                var prevDiff = { x: prev.x - curr.x, y: prev.y - curr.y };\n                var nextDiff = { x: next.x - curr.x, y: next.y - curr.y };\n                var angle = geometry_1.angleBetweenPoints(prevDiff, nextDiff);\n                if (Math.abs(Math.PI - angle) < HANDLE_REMOVE_THRESHOLD) {\n                    route.splice(i, 1);\n                    return \"continue\";\n                }\n            }\n        }\n        i++;\n    };\n    while (i < route.length) {\n        _loop_1();\n    }\n    return route;\n}\nexports.filterEditModeHandles = filterEditModeHandles;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/edit/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.moveFeature = Symbol('moveFeature');\nfunction isLocateable(element) {\n    return element['position'] !== undefined;\n}\nexports.isLocateable = isLocateable;\nfunction isMoveable(element) {\n    return element.hasFeature(exports.moveFeature) && isLocateable(element);\n}\nexports.isMoveable = isMoveable;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/move/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar command_1 = require(\"../commands/command\");\n/**\n * The action handler registry maps actions to their handlers using the Action.kind property.\n */\nvar ActionHandlerRegistry = /** @class */ (function (_super) {\n    __extends(ActionHandlerRegistry, _super);\n    function ActionHandlerRegistry(initializers) {\n        var _this = _super.call(this) || this;\n        initializers.forEach(function (initializer) { return _this.initializeActionHandler(initializer); });\n        return _this;\n    }\n    ActionHandlerRegistry.prototype.registerCommand = function (commandType) {\n        this.register(commandType.KIND, new command_1.CommandActionHandler(commandType));\n    };\n    ActionHandlerRegistry.prototype.initializeActionHandler = function (initializer) {\n        initializer.initialize(this);\n    };\n    ActionHandlerRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IActionHandlerInitializer)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], ActionHandlerRegistry);\n    return ActionHandlerRegistry;\n}(registry_1.MultiInstanceRegistry));\nexports.ActionHandlerRegistry = ActionHandlerRegistry;\n//# sourceMappingURL=action-handler.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/actions/action-handler.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"../bounds/model\");\nvar action_dispatcher_1 = require(\"../../base/actions/action-dispatcher\");\nvar types_1 = require(\"../../base/types\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar inversify_1 = require(\"inversify\");\nvar ExportSvgAction = /** @class */ (function () {\n    function ExportSvgAction(svg) {\n        this.svg = svg;\n        this.kind = ExportSvgAction.KIND;\n    }\n    ExportSvgAction.KIND = 'exportSvg';\n    return ExportSvgAction;\n}());\nexports.ExportSvgAction = ExportSvgAction;\nvar SvgExporter = /** @class */ (function () {\n    function SvgExporter(options, actionDispatcher, log) {\n        this.options = options;\n        this.actionDispatcher = actionDispatcher;\n        this.log = log;\n    }\n    SvgExporter.prototype.export = function (root) {\n        if (typeof document !== 'undefined') {\n            var div = document.getElementById(this.options.hiddenDiv);\n            if (div !== null && div.firstElementChild && div.firstElementChild.tagName === 'svg') {\n                var svgElement = div.firstElementChild;\n                var svg = this.createSvg(svgElement, root);\n                this.actionDispatcher.dispatch(new ExportSvgAction(svg));\n            }\n        }\n    };\n    SvgExporter.prototype.createSvg = function (svgElementOrig, root) {\n        var serializer = new XMLSerializer();\n        var svgCopy = serializer.serializeToString(svgElementOrig);\n        var iframe = document.createElement('iframe');\n        document.body.appendChild(iframe);\n        if (!iframe.contentWindow)\n            throw new Error('IFrame has no contentWindow');\n        var docCopy = iframe.contentWindow.document;\n        docCopy.open();\n        docCopy.write(svgCopy);\n        docCopy.close();\n        var svgElementNew = docCopy.getElementById(svgElementOrig.id);\n        svgElementNew.removeAttribute('opacity');\n        this.copyStyles(svgElementOrig, svgElementNew, ['width', 'height', 'opacity']);\n        svgElementNew.setAttribute('version', '1.1');\n        var bounds = this.getBounds(root);\n        svgElementNew.setAttribute('viewBox', bounds.x + \" \" + bounds.y + \" \" + bounds.width + \" \" + bounds.height);\n        var svgCode = serializer.serializeToString(svgElementNew);\n        document.body.removeChild(iframe);\n        return svgCode;\n    };\n    SvgExporter.prototype.copyStyles = function (source, target, skipedProperties) {\n        var sourceStyle = getComputedStyle(source);\n        var targetStyle = getComputedStyle(target);\n        var diffStyle = '';\n        for (var i = 0; i < sourceStyle.length; i++) {\n            var key = sourceStyle[i];\n            if (skipedProperties.indexOf(key) === -1) {\n                var value = sourceStyle.getPropertyValue(key);\n                if (targetStyle.getPropertyValue(key) !== value) {\n                    diffStyle += key + \":\" + value + \";\";\n                }\n            }\n        }\n        if (diffStyle !== '')\n            target.setAttribute('style', diffStyle);\n        // IE doesn't retrun anything on source.children\n        for (var i = 0; i < source.childNodes.length; ++i) {\n            var sourceChild = source.childNodes[i];\n            var targetChild = target.childNodes[i];\n            if (sourceChild instanceof Element)\n                this.copyStyles(sourceChild, targetChild, []);\n        }\n    };\n    SvgExporter.prototype.getBounds = function (root) {\n        var allBounds = [geometry_1.EMPTY_BOUNDS];\n        root.children.forEach(function (element) {\n            if (model_1.isBoundsAware(element)) {\n                allBounds.push(element.bounds);\n            }\n        });\n        return allBounds.reduce(function (one, two) { return geometry_1.combine(one, two); });\n    };\n    SvgExporter = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __param(1, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(2, inversify_1.inject(types_1.TYPES.ILogger)),\n        __metadata(\"design:paramtypes\", [Object, action_dispatcher_1.ActionDispatcher, Object])\n    ], SvgExporter);\n    return SvgExporter;\n}());\nexports.SvgExporter = SvgExporter;\n//# sourceMappingURL=svg-exporter.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/export/svg-exporter.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar command_1 = require(\"../../base/commands/command\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar model_1 = require(\"./model\");\nvar ViewportAction = /** @class */ (function () {\n    function ViewportAction(elementId, newViewport, animate) {\n        this.elementId = elementId;\n        this.newViewport = newViewport;\n        this.animate = animate;\n        this.kind = ViewportCommand.KIND;\n    }\n    return ViewportAction;\n}());\nexports.ViewportAction = ViewportAction;\nvar ViewportCommand = /** @class */ (function (_super) {\n    __extends(ViewportCommand, _super);\n    function ViewportCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.newViewport = action.newViewport;\n        return _this;\n    }\n    ViewportCommand.prototype.execute = function (context) {\n        var model = context.root;\n        var element = model.index.getById(this.action.elementId);\n        if (element && model_1.isViewport(element)) {\n            this.element = element;\n            this.oldViewport = {\n                scroll: this.element.scroll,\n                zoom: this.element.zoom,\n            };\n            if (this.action.animate)\n                return new ViewportAnimation(this.element, this.oldViewport, this.newViewport, context).start();\n            else {\n                this.element.scroll = this.newViewport.scroll;\n                this.element.zoom = this.newViewport.zoom;\n            }\n        }\n        return model;\n    };\n    ViewportCommand.prototype.undo = function (context) {\n        return new ViewportAnimation(this.element, this.newViewport, this.oldViewport, context).start();\n    };\n    ViewportCommand.prototype.redo = function (context) {\n        return new ViewportAnimation(this.element, this.oldViewport, this.newViewport, context).start();\n    };\n    ViewportCommand.prototype.merge = function (command, context) {\n        if (!this.action.animate && command instanceof ViewportCommand && this.element === command.element) {\n            this.newViewport = command.newViewport;\n            return true;\n        }\n        return false;\n    };\n    ViewportCommand.KIND = 'viewport';\n    return ViewportCommand;\n}(command_1.MergeableCommand));\nexports.ViewportCommand = ViewportCommand;\nvar ViewportAnimation = /** @class */ (function (_super) {\n    __extends(ViewportAnimation, _super);\n    function ViewportAnimation(element, oldViewport, newViewport, context) {\n        var _this = _super.call(this, context) || this;\n        _this.element = element;\n        _this.oldViewport = oldViewport;\n        _this.newViewport = newViewport;\n        _this.context = context;\n        _this.zoomFactor = Math.log(newViewport.zoom / oldViewport.zoom);\n        return _this;\n    }\n    ViewportAnimation.prototype.tween = function (t, context) {\n        this.element.scroll = {\n            x: (1 - t) * this.oldViewport.scroll.x + t * this.newViewport.scroll.x,\n            y: (1 - t) * this.oldViewport.scroll.y + t * this.newViewport.scroll.y\n        };\n        this.element.zoom = this.oldViewport.zoom * Math.exp(t * this.zoomFactor);\n        return context.root;\n    };\n    return ViewportAnimation;\n}(animation_1.Animation));\nexports.ViewportAnimation = ViewportAnimation;\n//# sourceMappingURL=viewport.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/viewport.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar ProviderRegistry = /** @class */ (function () {\n    function ProviderRegistry() {\n        this.elements = new Map;\n    }\n    ProviderRegistry.prototype.register = function (key, cstr) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        if (this.hasKey(key))\n            throw new Error('Key is already registered: ' + key);\n        this.elements.set(key, cstr);\n    };\n    ProviderRegistry.prototype.deregister = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    ProviderRegistry.prototype.hasKey = function (key) {\n        return this.elements.has(key);\n    };\n    ProviderRegistry.prototype.get = function (key, arg) {\n        var existingCstr = this.elements.get(key);\n        if (existingCstr)\n            return new existingCstr(arg);\n        else\n            return this.missing(key, arg);\n    };\n    ProviderRegistry.prototype.missing = function (key, arg) {\n        throw new Error('Unknown registry key: ' + key);\n    };\n    ProviderRegistry = __decorate([\n        inversify_1.injectable()\n    ], ProviderRegistry);\n    return ProviderRegistry;\n}());\nexports.ProviderRegistry = ProviderRegistry;\nvar InstanceRegistry = /** @class */ (function () {\n    function InstanceRegistry() {\n        this.elements = new Map;\n    }\n    InstanceRegistry.prototype.register = function (key, instance) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        if (this.hasKey(key))\n            throw new Error('Key is already registered: ' + key);\n        this.elements.set(key, instance);\n    };\n    InstanceRegistry.prototype.deregister = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    InstanceRegistry.prototype.hasKey = function (key) {\n        return this.elements.has(key);\n    };\n    InstanceRegistry.prototype.get = function (key) {\n        var existingInstance = this.elements.get(key);\n        if (existingInstance)\n            return existingInstance;\n        else\n            return this.missing(key);\n    };\n    InstanceRegistry.prototype.missing = function (key) {\n        throw new Error('Unknown registry key: ' + key);\n    };\n    InstanceRegistry = __decorate([\n        inversify_1.injectable()\n    ], InstanceRegistry);\n    return InstanceRegistry;\n}());\nexports.InstanceRegistry = InstanceRegistry;\nvar MultiInstanceRegistry = /** @class */ (function () {\n    function MultiInstanceRegistry() {\n        this.elements = new Map;\n    }\n    MultiInstanceRegistry.prototype.register = function (key, instance) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        var instances = this.elements.get(key);\n        if (instances !== undefined)\n            instances.push(instance);\n        else\n            this.elements.set(key, [instance]);\n    };\n    MultiInstanceRegistry.prototype.deregisterAll = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    MultiInstanceRegistry.prototype.get = function (key) {\n        var existingInstances = this.elements.get(key);\n        if (existingInstances !== undefined)\n            return existingInstances;\n        else\n            return [];\n    };\n    MultiInstanceRegistry = __decorate([\n        inversify_1.injectable()\n    ], MultiInstanceRegistry);\n    return MultiInstanceRegistry;\n}());\nexports.MultiInstanceRegistry = MultiInstanceRegistry;\n//# sourceMappingURL=registry.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/registry.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n// WEBPACK FOOTER //\n// ./~/process/browser.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction getServiceIdentifierAsString(serviceIdentifier) {\n    if (typeof serviceIdentifier === \"function\") {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier.name;\n    }\n    else if (typeof serviceIdentifier === \"symbol\") {\n        return serviceIdentifier.toString();\n    }\n    else {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier;\n    }\n}\nexports.getServiceIdentifierAsString = getServiceIdentifierAsString;\nfunction listRegisteredBindingsForServiceIdentifier(container, serviceIdentifier, getBindings) {\n    var registeredBindingsList = \"\";\n    var registeredBindings = getBindings(container, serviceIdentifier);\n    if (registeredBindings.length !== 0) {\n        registeredBindingsList = \"\\nRegistered bindings:\";\n        registeredBindings.forEach(function (binding) {\n            var name = \"Object\";\n            if (binding.implementationType !== null) {\n                name = getFunctionName(binding.implementationType);\n            }\n            registeredBindingsList = registeredBindingsList + \"\\n \" + name;\n            if (binding.constraint.metaData) {\n                registeredBindingsList = registeredBindingsList + \" - \" + binding.constraint.metaData;\n            }\n        });\n    }\n    return registeredBindingsList;\n}\nexports.listRegisteredBindingsForServiceIdentifier = listRegisteredBindingsForServiceIdentifier;\nfunction circularDependencyToException(request, previousServiceIdentifiers) {\n    if (previousServiceIdentifiers === void 0) { previousServiceIdentifiers = []; }\n    var parentServiceIdentifier = getServiceIdentifierAsString(request.serviceIdentifier);\n    previousServiceIdentifiers.push(parentServiceIdentifier);\n    request.childRequests.forEach(function (childRequest) {\n        var childServiceIdentifier = getServiceIdentifierAsString(childRequest.serviceIdentifier);\n        if (previousServiceIdentifiers.indexOf(childServiceIdentifier) === -1) {\n            if (childRequest.childRequests.length > 0) {\n                circularDependencyToException(childRequest, previousServiceIdentifiers);\n            }\n            else {\n                previousServiceIdentifiers.push(childServiceIdentifier);\n            }\n        }\n        else {\n            previousServiceIdentifiers.push(childServiceIdentifier);\n            var services = previousServiceIdentifiers.reduce(function (prev, curr) {\n                return (prev !== \"\") ? prev + \" -> \" + curr : \"\" + curr;\n            }, \"\");\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY + \" \" + services);\n        }\n    });\n}\nexports.circularDependencyToException = circularDependencyToException;\nfunction listMetadataForTarget(serviceIdentifierString, target) {\n    if (target.isTagged() || target.isNamed()) {\n        var m_1 = \"\";\n        var namedTag = target.getNamedTag();\n        var otherTags = target.getCustomTags();\n        if (namedTag !== null) {\n            m_1 += namedTag.toString() + \"\\n\";\n        }\n        if (otherTags !== null) {\n            otherTags.forEach(function (tag) {\n                m_1 += tag.toString() + \"\\n\";\n            });\n        }\n        return \" \" + serviceIdentifierString + \"\\n \" + serviceIdentifierString + \" - \" + m_1;\n    }\n    else {\n        return \" \" + serviceIdentifierString;\n    }\n}\nexports.listMetadataForTarget = listMetadataForTarget;\nfunction getFunctionName(v) {\n    if (v.name) {\n        return v.name;\n    }\n    else {\n        var name_1 = v.toString();\n        var match = name_1.match(/^function\\s*([^\\s(]+)/);\n        return match ? match[1] : \"Anonymous function: \" + name_1;\n    }\n}\nexports.getFunctionName = getFunctionName;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/utils/serialization.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar AnimationFrameSyncer = /** @class */ (function () {\n    function AnimationFrameSyncer() {\n        this.tasks = [];\n        this.endTasks = [];\n        this.triggered = false;\n    }\n    AnimationFrameSyncer.prototype.isAvailable = function () {\n        return typeof requestAnimationFrame === \"function\";\n    };\n    AnimationFrameSyncer.prototype.onNextFrame = function (task) {\n        this.tasks.push(task);\n        this.trigger();\n    };\n    AnimationFrameSyncer.prototype.onEndOfNextFrame = function (task) {\n        this.endTasks.push(task);\n        this.trigger();\n    };\n    AnimationFrameSyncer.prototype.trigger = function () {\n        var _this = this;\n        if (!this.triggered) {\n            this.triggered = true;\n            if (this.isAvailable())\n                requestAnimationFrame(function (time) { return _this.run(time); });\n            else\n                setTimeout(function (time) { return _this.run(time); });\n        }\n    };\n    AnimationFrameSyncer.prototype.run = function (time) {\n        var tasks = this.tasks;\n        var endTasks = this.endTasks;\n        this.triggered = false;\n        this.tasks = [];\n        this.endTasks = [];\n        tasks.forEach(function (task) { return task.call(undefined, time); });\n        endTasks.forEach(function (task) { return task.call(undefined, time); });\n    };\n    AnimationFrameSyncer = __decorate([\n        inversify_1.injectable()\n    ], AnimationFrameSyncer);\n    return AnimationFrameSyncer;\n}());\nexports.AnimationFrameSyncer = AnimationFrameSyncer;\n//# sourceMappingURL=animation-frame-syncer.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/animations/animation-frame-syncer.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_1 = require(\"../commands/command\");\nvar initialize_canvas_1 = require(\"./initialize-canvas\");\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) in order to request a model. Usually this\n * is the first message that is sent to the source, so it is also used to initiate the communication.\n * The response is a SetModelAction or an UpdateModelAction.\n */\nvar RequestModelAction = /** @class */ (function () {\n    function RequestModelAction(options) {\n        this.options = options;\n        this.kind = RequestModelAction.KIND;\n    }\n    RequestModelAction.KIND = 'requestModel';\n    return RequestModelAction;\n}());\nexports.RequestModelAction = RequestModelAction;\n/**\n * Sent from the model source to the client in order to set the model. If a model is already present, it is replaced.\n */\nvar SetModelAction = /** @class */ (function () {\n    function SetModelAction(newRoot) {\n        this.newRoot = newRoot;\n        this.kind = SetModelCommand.KIND;\n    }\n    return SetModelAction;\n}());\nexports.SetModelAction = SetModelAction;\nvar SetModelCommand = /** @class */ (function (_super) {\n    __extends(SetModelCommand, _super);\n    function SetModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    SetModelCommand.prototype.execute = function (context) {\n        this.oldRoot = context.modelFactory.createRoot(context.root);\n        this.newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        return this.newRoot;\n    };\n    SetModelCommand.prototype.undo = function (context) {\n        return this.oldRoot;\n    };\n    SetModelCommand.prototype.redo = function (context) {\n        return this.newRoot;\n    };\n    Object.defineProperty(SetModelCommand.prototype, \"blockUntil\", {\n        get: function () {\n            return function (action) { return action.kind === initialize_canvas_1.InitializeCanvasBoundsCommand.KIND; };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SetModelCommand.KIND = 'setModel';\n    SetModelCommand = __decorate([\n        inversify_1.injectable(),\n        __metadata(\"design:paramtypes\", [SetModelAction])\n    ], SetModelCommand);\n    return SetModelCommand;\n}(command_1.Command));\nexports.SetModelCommand = SetModelCommand;\n//# sourceMappingURL=set-model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/features/set-model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar command_1 = require(\"../../base/commands/command\");\nvar model_1 = require(\"./model\");\n/**\n * Sent from the model source (e.g. a DiagramServer) to the client to update the bounds of some\n * (or all) model elements.\n */\nvar SetBoundsAction = /** @class */ (function () {\n    function SetBoundsAction(bounds) {\n        this.bounds = bounds;\n        this.kind = SetBoundsCommand.KIND;\n    }\n    return SetBoundsAction;\n}());\nexports.SetBoundsAction = SetBoundsAction;\n/**\n * Sent from the model source to the client to request bounds for the given model. The model is\n * rendered invisibly so the bounds can derived from the DOM. The response is a ComputedBoundsAction.\n * This hidden rendering round-trip is necessary if the client is responsible for parts of the layout\n * (see `needsClientLayout` viewer option).\n */\nvar RequestBoundsAction = /** @class */ (function () {\n    function RequestBoundsAction(newRoot) {\n        this.newRoot = newRoot;\n        this.kind = RequestBoundsCommand.KIND;\n    }\n    return RequestBoundsAction;\n}());\nexports.RequestBoundsAction = RequestBoundsAction;\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) to transmit the result of bounds\n * computation as a response to a RequestBoundsAction. If the server is responsible for parts of\n * the layout (see `needsServerLayout` viewer option), it can do so after applying the computed bounds\n * received with this action. Otherwise there is no need to send the computed bounds to the server,\n * so they can be processed locally by the client.\n */\nvar ComputedBoundsAction = /** @class */ (function () {\n    function ComputedBoundsAction(bounds, revision, alignments) {\n        this.bounds = bounds;\n        this.revision = revision;\n        this.alignments = alignments;\n        this.kind = ComputedBoundsAction.KIND;\n    }\n    ComputedBoundsAction.KIND = 'computedBounds';\n    return ComputedBoundsAction;\n}());\nexports.ComputedBoundsAction = ComputedBoundsAction;\nvar SetBoundsCommand = /** @class */ (function (_super) {\n    __extends(SetBoundsCommand, _super);\n    function SetBoundsCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.bounds = [];\n        return _this;\n    }\n    SetBoundsCommand.prototype.execute = function (context) {\n        var _this = this;\n        this.action.bounds.forEach(function (b) {\n            var element = context.root.index.getById(b.elementId);\n            if (element && model_1.isBoundsAware(element)) {\n                _this.bounds.push({\n                    element: element,\n                    oldBounds: element.bounds,\n                    newBounds: b.newBounds,\n                });\n            }\n        });\n        return this.redo(context);\n    };\n    SetBoundsCommand.prototype.undo = function (context) {\n        this.bounds.forEach(function (b) { return b.element.bounds = b.oldBounds; });\n        return context.root;\n    };\n    SetBoundsCommand.prototype.redo = function (context) {\n        this.bounds.forEach(function (b) { return b.element.bounds = b.newBounds; });\n        return context.root;\n    };\n    SetBoundsCommand.KIND = 'setBounds';\n    return SetBoundsCommand;\n}(command_1.SystemCommand));\nexports.SetBoundsCommand = SetBoundsCommand;\nvar RequestBoundsCommand = /** @class */ (function (_super) {\n    __extends(RequestBoundsCommand, _super);\n    function RequestBoundsCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    RequestBoundsCommand.prototype.execute = function (context) {\n        return context.modelFactory.createRoot(this.action.newRoot);\n    };\n    Object.defineProperty(RequestBoundsCommand.prototype, \"blockUntil\", {\n        get: function () {\n            return function (action) { return action.kind === ComputedBoundsAction.KIND; };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RequestBoundsCommand.KIND = 'requestBounds';\n    return RequestBoundsCommand;\n}(command_1.HiddenCommand));\nexports.RequestBoundsCommand = RequestBoundsCommand;\n//# sourceMappingURL=bounds-manipulation.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/bounds-manipulation.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fadeFeature = Symbol('fadeFeature');\nfunction isFadeable(element) {\n    return element.hasFeature(exports.fadeFeature) && element['opacity'] !== undefined;\n}\nexports.isFadeable = isFadeable;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/fade/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar types_1 = require(\"../../base/types\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_factory_1 = require(\"../../base/model/smodel-factory\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"./model\");\n/**\n * Triggered when the user puts the mouse pointer over an element.\n */\nvar HoverFeedbackAction = /** @class */ (function () {\n    function HoverFeedbackAction(mouseoverElement, mouseIsOver) {\n        this.mouseoverElement = mouseoverElement;\n        this.mouseIsOver = mouseIsOver;\n        this.kind = HoverFeedbackCommand.KIND;\n    }\n    return HoverFeedbackAction;\n}());\nexports.HoverFeedbackAction = HoverFeedbackAction;\nvar HoverFeedbackCommand = /** @class */ (function (_super) {\n    __extends(HoverFeedbackCommand, _super);\n    function HoverFeedbackCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    HoverFeedbackCommand.prototype.execute = function (context) {\n        var model = context.root;\n        var modelElement = model.index.getById(this.action.mouseoverElement);\n        if (modelElement) {\n            if (model_2.isHoverable(modelElement)) {\n                modelElement.hoverFeedback = this.action.mouseIsOver;\n            }\n        }\n        return this.redo(context);\n    };\n    HoverFeedbackCommand.prototype.undo = function (context) {\n        return context.root;\n    };\n    HoverFeedbackCommand.prototype.redo = function (context) {\n        return context.root;\n    };\n    HoverFeedbackCommand.KIND = 'hoverFeedback';\n    return HoverFeedbackCommand;\n}(command_1.Command));\nexports.HoverFeedbackCommand = HoverFeedbackCommand;\n/**\n * Triggered when the user hovers the mouse pointer over an element to get a popup with details on\n * that element. This action is sent from the client to the model source, e.g. a DiagramServer.\n * The response is a SetPopupModelAction.\n */\nvar RequestPopupModelAction = /** @class */ (function () {\n    function RequestPopupModelAction(elementId, bounds) {\n        this.elementId = elementId;\n        this.bounds = bounds;\n        this.kind = RequestPopupModelAction.KIND;\n    }\n    RequestPopupModelAction.KIND = 'requestPopupModel';\n    return RequestPopupModelAction;\n}());\nexports.RequestPopupModelAction = RequestPopupModelAction;\n/**\n * Sent from the model source to the client to display a popup in response to a RequestPopupModelAction.\n * This action can also be used to remove any existing popup by choosing EMPTY_ROOT as root element.\n */\nvar SetPopupModelAction = /** @class */ (function () {\n    function SetPopupModelAction(newRoot) {\n        this.newRoot = newRoot;\n        this.kind = SetPopupModelCommand.KIND;\n    }\n    return SetPopupModelAction;\n}());\nexports.SetPopupModelAction = SetPopupModelAction;\nvar SetPopupModelCommand = /** @class */ (function (_super) {\n    __extends(SetPopupModelCommand, _super);\n    function SetPopupModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    SetPopupModelCommand.prototype.execute = function (context) {\n        this.oldRoot = context.root;\n        this.newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        return this.newRoot;\n    };\n    SetPopupModelCommand.prototype.undo = function (context) {\n        return this.oldRoot;\n    };\n    SetPopupModelCommand.prototype.redo = function (context) {\n        return this.newRoot;\n    };\n    SetPopupModelCommand.KIND = 'setPopupModel';\n    return SetPopupModelCommand;\n}(command_1.PopupCommand));\nexports.SetPopupModelCommand = SetPopupModelCommand;\nvar AbstractHoverMouseListener = /** @class */ (function (_super) {\n    __extends(AbstractHoverMouseListener, _super);\n    function AbstractHoverMouseListener(options, state) {\n        var _this = _super.call(this) || this;\n        _this.options = options;\n        _this.state = state;\n        return _this;\n    }\n    AbstractHoverMouseListener.prototype.stopMouseOutTimer = function () {\n        if (this.state.mouseOutTimer !== undefined) {\n            window.clearTimeout(this.state.mouseOutTimer);\n            this.state.mouseOutTimer = undefined;\n        }\n    };\n    AbstractHoverMouseListener.prototype.startMouseOutTimer = function () {\n        var _this = this;\n        this.stopMouseOutTimer();\n        return new Promise(function (resolve) {\n            _this.state.mouseOutTimer = window.setTimeout(function () {\n                _this.state.popupOpen = false;\n                _this.state.previousPopupElement = undefined;\n                resolve(new SetPopupModelAction({ type: smodel_factory_1.EMPTY_ROOT.type, id: smodel_factory_1.EMPTY_ROOT.id }));\n            }, _this.options.popupCloseDelay);\n        });\n    };\n    AbstractHoverMouseListener.prototype.stopMouseOverTimer = function () {\n        if (this.state.mouseOverTimer !== undefined) {\n            window.clearTimeout(this.state.mouseOverTimer);\n            this.state.mouseOverTimer = undefined;\n        }\n    };\n    AbstractHoverMouseListener = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __param(1, inversify_1.inject(types_1.TYPES.HoverState)),\n        __metadata(\"design:paramtypes\", [Object, Object])\n    ], AbstractHoverMouseListener);\n    return AbstractHoverMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.AbstractHoverMouseListener = AbstractHoverMouseListener;\nvar HoverMouseListener = /** @class */ (function (_super) {\n    __extends(HoverMouseListener, _super);\n    function HoverMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HoverMouseListener.prototype.computePopupBounds = function (target, mousePosition) {\n        // Default position: below the mouse cursor\n        var offset = { x: -5, y: 20 };\n        var targetBounds = model_1.getAbsoluteBounds(target);\n        var canvasBounds = target.root.canvasBounds;\n        var boundsInWindow = geometry_1.translate(targetBounds, canvasBounds);\n        var distRight = boundsInWindow.x + boundsInWindow.width - mousePosition.x;\n        var distBottom = boundsInWindow.y + boundsInWindow.height - mousePosition.y;\n        if (distBottom <= distRight && this.allowSidePosition(target, 'below', distBottom)) {\n            // Put the popup below the target element\n            offset = { x: -5, y: Math.round(distBottom + 5) };\n        }\n        else if (distRight <= distBottom && this.allowSidePosition(target, 'right', distRight)) {\n            // Put the popup right of the target element\n            offset = { x: Math.round(distRight + 5), y: -5 };\n        }\n        var leftPopupPosition = mousePosition.x + offset.x;\n        var canvasRightBorderPosition = canvasBounds.x + canvasBounds.width;\n        if (leftPopupPosition > canvasRightBorderPosition) {\n            leftPopupPosition = canvasRightBorderPosition;\n        }\n        var topPopupPosition = mousePosition.y + offset.y;\n        var canvasBottomBorderPosition = canvasBounds.y + canvasBounds.height;\n        if (topPopupPosition > canvasBottomBorderPosition) {\n            topPopupPosition = canvasBottomBorderPosition;\n        }\n        return { x: leftPopupPosition, y: topPopupPosition, width: -1, height: -1 };\n    };\n    HoverMouseListener.prototype.allowSidePosition = function (target, side, distance) {\n        return !(target instanceof smodel_1.SModelRoot) && distance <= 150;\n    };\n    HoverMouseListener.prototype.startMouseOverTimer = function (target, event) {\n        var _this = this;\n        this.stopMouseOverTimer();\n        return new Promise(function (resolve) {\n            _this.state.mouseOverTimer = window.setTimeout(function () {\n                var popupBounds = _this.computePopupBounds(target, { x: event.pageX, y: event.pageY });\n                resolve(new RequestPopupModelAction(target.id, popupBounds));\n                _this.state.popupOpen = true;\n                _this.state.previousPopupElement = target;\n            }, _this.options.popupOpenDelay);\n        });\n    };\n    HoverMouseListener.prototype.mouseOver = function (target, event) {\n        var result = [];\n        var popupTarget = smodel_utils_1.findParent(target, model_2.hasPopupFeature);\n        if (this.state.popupOpen && (popupTarget === undefined ||\n            this.state.previousPopupElement !== undefined && this.state.previousPopupElement.id !== popupTarget.id)) {\n            result.push(this.startMouseOutTimer());\n        }\n        else {\n            this.stopMouseOverTimer();\n            this.stopMouseOutTimer();\n        }\n        if (popupTarget !== undefined &&\n            (this.state.previousPopupElement === undefined || this.state.previousPopupElement.id !== popupTarget.id)) {\n            result.push(this.startMouseOverTimer(popupTarget, event));\n        }\n        var hoverTarget = smodel_utils_1.findParentByFeature(target, model_2.isHoverable);\n        if (hoverTarget !== undefined)\n            result.push(new HoverFeedbackAction(hoverTarget.id, true));\n        return result;\n    };\n    HoverMouseListener.prototype.mouseOut = function (target, event) {\n        var result = [];\n        if (this.state.popupOpen) {\n            var popupTarget = smodel_utils_1.findParent(target, model_2.hasPopupFeature);\n            if (this.state.previousPopupElement !== undefined && popupTarget !== undefined\n                && this.state.previousPopupElement.id === popupTarget.id)\n                result.push(this.startMouseOutTimer());\n        }\n        this.stopMouseOverTimer();\n        var hoverTarget = smodel_utils_1.findParentByFeature(target, model_2.isHoverable);\n        if (hoverTarget !== undefined)\n            result.push(new HoverFeedbackAction(hoverTarget.id, false));\n        return result;\n    };\n    HoverMouseListener.prototype.mouseMove = function (target, event) {\n        var result = [];\n        if (this.state.previousPopupElement !== undefined && this.closeOnMouseMove(this.state.previousPopupElement, event)) {\n            result.push(this.startMouseOutTimer());\n        }\n        var popupTarget = smodel_utils_1.findParent(target, model_2.hasPopupFeature);\n        if (popupTarget !== undefined && (this.state.previousPopupElement === undefined\n            || this.state.previousPopupElement.id !== popupTarget.id)) {\n            result.push(this.startMouseOverTimer(popupTarget, event));\n        }\n        return result;\n    };\n    HoverMouseListener.prototype.closeOnMouseMove = function (target, event) {\n        return target instanceof smodel_1.SModelRoot;\n    };\n    HoverMouseListener = __decorate([\n        inversify_1.injectable()\n    ], HoverMouseListener);\n    return HoverMouseListener;\n}(AbstractHoverMouseListener));\nexports.HoverMouseListener = HoverMouseListener;\nvar PopupHoverMouseListener = /** @class */ (function (_super) {\n    __extends(PopupHoverMouseListener, _super);\n    function PopupHoverMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PopupHoverMouseListener.prototype.mouseOut = function (target, event) {\n        return [this.startMouseOutTimer()];\n    };\n    PopupHoverMouseListener.prototype.mouseOver = function (target, event) {\n        this.stopMouseOutTimer();\n        this.stopMouseOverTimer();\n        return [];\n    };\n    PopupHoverMouseListener = __decorate([\n        inversify_1.injectable()\n    ], PopupHoverMouseListener);\n    return PopupHoverMouseListener;\n}(AbstractHoverMouseListener));\nexports.PopupHoverMouseListener = PopupHoverMouseListener;\nvar HoverKeyListener = /** @class */ (function (_super) {\n    __extends(HoverKeyListener, _super);\n    function HoverKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HoverKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'Escape')) {\n            return [new SetPopupModelAction({ type: smodel_factory_1.EMPTY_ROOT.type, id: smodel_factory_1.EMPTY_ROOT.id })];\n        }\n        return [];\n    };\n    return HoverKeyListener;\n}(key_tool_1.KeyListener));\nexports.HoverKeyListener = HoverKeyListener;\n//# sourceMappingURL=hover.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/hover/hover.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hoverFeedbackFeature = Symbol('hoverFeedbackFeature');\nfunction isHoverable(element) {\n    return element.hasFeature(exports.hoverFeedbackFeature);\n}\nexports.isHoverable = isHoverable;\nexports.popupFeature = Symbol('popupFeature');\nfunction hasPopupFeature(element) {\n    return element.hasFeature(exports.popupFeature);\n}\nexports.hasPopupFeature = hasPopupFeature;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/hover/model.js","\"use strict\";\n/*\n * Copyright (C) 2018 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License'); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar browser_1 = require(\"./browser\");\n/**\n * Returns whether the keyboard event matches the keystroke described by the given\n * code and modifiers. The code must comply to the format of the `code` property\n * of KeyboardEvent, but in contrast to that property, the actual keyboard layout is\n * considered by this function if possible.\n */\nfunction matchesKeystroke(event, code) {\n    var modifiers = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        modifiers[_i - 2] = arguments[_i];\n    }\n    if (getActualCode(event) !== code)\n        return false;\n    if (browser_1.isMac()) {\n        if (event.ctrlKey !== (modifiers.findIndex(function (m) { return m === 'ctrl'; }) >= 0))\n            return false;\n        if (event.metaKey !== (modifiers.findIndex(function (m) { return m === 'meta' || m === 'ctrlCmd'; }) >= 0))\n            return false;\n    }\n    else {\n        if (event.ctrlKey !== (modifiers.findIndex(function (m) { return m === 'ctrl' || m === 'ctrlCmd'; }) >= 0))\n            return false;\n        if (event.metaKey !== (modifiers.findIndex(function (m) { return m === 'meta'; }) >= 0))\n            return false;\n    }\n    if (event.altKey !== (modifiers.findIndex(function (m) { return m === 'alt'; }) >= 0))\n        return false;\n    if (event.shiftKey !== (modifiers.findIndex(function (m) { return m === 'shift'; }) >= 0))\n        return false;\n    return true;\n}\nexports.matchesKeystroke = matchesKeystroke;\n/**\n * Determines a key code from the given event. This is necessary because the `code` property of\n * a KeyboardEvent does not consider keyboard layouts.\n */\nfunction getActualCode(event) {\n    if (event.keyCode) {\n        var result = STRING_CODE[event.keyCode];\n        if (result !== undefined)\n            return result;\n    }\n    return event.code;\n}\nexports.getActualCode = getActualCode;\nvar STRING_CODE = new Array(256);\n(function () {\n    function addKeyCode(stringCode, numericCode) {\n        if (STRING_CODE[numericCode] === undefined)\n            STRING_CODE[numericCode] = stringCode;\n    }\n    addKeyCode('Pause', 3);\n    addKeyCode('Backspace', 8);\n    addKeyCode('Tab', 9);\n    addKeyCode('Enter', 13);\n    addKeyCode('ShiftLeft', 16);\n    addKeyCode('ShiftRight', 16);\n    addKeyCode('ControlLeft', 17);\n    addKeyCode('ControlRight', 17);\n    addKeyCode('AltLeft', 18);\n    addKeyCode('AltRight', 18);\n    addKeyCode('CapsLock', 20);\n    addKeyCode('Escape', 27);\n    addKeyCode('Space', 32);\n    addKeyCode('PageUp', 33);\n    addKeyCode('PageDown', 34);\n    addKeyCode('End', 35);\n    addKeyCode('Home', 36);\n    addKeyCode('ArrowLeft', 37);\n    addKeyCode('ArrowUp', 38);\n    addKeyCode('ArrowRight', 39);\n    addKeyCode('ArrowDown', 40);\n    addKeyCode('Insert', 45);\n    addKeyCode('Delete', 46);\n    addKeyCode('Digit1', 49);\n    addKeyCode('Digit2', 50);\n    addKeyCode('Digit3', 51);\n    addKeyCode('Digit4', 52);\n    addKeyCode('Digit5', 53);\n    addKeyCode('Digit6', 54);\n    addKeyCode('Digit7', 55);\n    addKeyCode('Digit8', 56);\n    addKeyCode('Digit9', 57);\n    addKeyCode('Digit0', 48);\n    addKeyCode('KeyA', 65);\n    addKeyCode('KeyB', 66);\n    addKeyCode('KeyC', 67);\n    addKeyCode('KeyD', 68);\n    addKeyCode('KeyE', 69);\n    addKeyCode('KeyF', 70);\n    addKeyCode('KeyG', 71);\n    addKeyCode('KeyH', 72);\n    addKeyCode('KeyI', 73);\n    addKeyCode('KeyJ', 74);\n    addKeyCode('KeyK', 75);\n    addKeyCode('KeyL', 76);\n    addKeyCode('KeyM', 77);\n    addKeyCode('KeyN', 78);\n    addKeyCode('KeyO', 79);\n    addKeyCode('KeyP', 80);\n    addKeyCode('KeyQ', 81);\n    addKeyCode('KeyR', 82);\n    addKeyCode('KeyS', 83);\n    addKeyCode('KeyT', 84);\n    addKeyCode('KeyU', 85);\n    addKeyCode('KeyV', 86);\n    addKeyCode('KeyW', 87);\n    addKeyCode('KeyX', 88);\n    addKeyCode('KeyY', 89);\n    addKeyCode('KeyZ', 90);\n    addKeyCode('OSLeft', 91);\n    addKeyCode('MetaLeft', 91);\n    addKeyCode('OSRight', 92);\n    addKeyCode('MetaRight', 92);\n    addKeyCode('ContextMenu', 93);\n    addKeyCode('Numpad0', 96);\n    addKeyCode('Numpad1', 97);\n    addKeyCode('Numpad2', 98);\n    addKeyCode('Numpad3', 99);\n    addKeyCode('Numpad4', 100);\n    addKeyCode('Numpad5', 101);\n    addKeyCode('Numpad6', 102);\n    addKeyCode('Numpad7', 103);\n    addKeyCode('Numpad8', 104);\n    addKeyCode('Numpad9', 105);\n    addKeyCode('NumpadMultiply', 106);\n    addKeyCode('NumpadAdd', 107);\n    addKeyCode('NumpadSeparator', 108);\n    addKeyCode('NumpadSubtract', 109);\n    addKeyCode('NumpadDecimal', 110);\n    addKeyCode('NumpadDivide', 111);\n    addKeyCode('F1', 112);\n    addKeyCode('F2', 113);\n    addKeyCode('F3', 114);\n    addKeyCode('F4', 115);\n    addKeyCode('F5', 116);\n    addKeyCode('F6', 117);\n    addKeyCode('F7', 118);\n    addKeyCode('F8', 119);\n    addKeyCode('F9', 120);\n    addKeyCode('F10', 121);\n    addKeyCode('F11', 122);\n    addKeyCode('F12', 123);\n    addKeyCode('F13', 124);\n    addKeyCode('F14', 125);\n    addKeyCode('F15', 126);\n    addKeyCode('F16', 127);\n    addKeyCode('F17', 128);\n    addKeyCode('F18', 129);\n    addKeyCode('F19', 130);\n    addKeyCode('F20', 131);\n    addKeyCode('F21', 132);\n    addKeyCode('F22', 133);\n    addKeyCode('F23', 134);\n    addKeyCode('F24', 135);\n    addKeyCode('NumLock', 144);\n    addKeyCode('ScrollLock', 145);\n    addKeyCode('Semicolon', 186);\n    addKeyCode('Equal', 187);\n    addKeyCode('Comma', 188);\n    addKeyCode('Minus', 189);\n    addKeyCode('Period', 190);\n    addKeyCode('Slash', 191);\n    addKeyCode('Backquote', 192);\n    addKeyCode('IntlRo', 193);\n    addKeyCode('BracketLeft', 219);\n    addKeyCode('Backslash', 220);\n    addKeyCode('BracketRight', 221);\n    addKeyCode('Quote', 222);\n    addKeyCode('IntlYen', 255);\n})();\n//# sourceMappingURL=keyboard.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/keyboard.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License'); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// ------------------ Base ------------------\n__export(require(\"./base/actions/action\"));\n__export(require(\"./base/actions/action-dispatcher\"));\n__export(require(\"./base/actions/action-handler\"));\n__export(require(\"./base/animations/animation-frame-syncer\"));\n__export(require(\"./base/animations/animation\"));\n__export(require(\"./base/animations/easing\"));\n__export(require(\"./base/commands/command-stack-options\"));\n__export(require(\"./base/commands/command-stack\"));\n__export(require(\"./base/commands/command\"));\n__export(require(\"./base/features/initialize-canvas\"));\n__export(require(\"./base/features/set-model\"));\n__export(require(\"./base/model/smodel-factory\"));\n__export(require(\"./base/model/smodel-storage\"));\n__export(require(\"./base/model/smodel-utils\"));\n__export(require(\"./base/model/smodel\"));\n__export(require(\"./base/views/key-tool\"));\n__export(require(\"./base/views/mouse-tool\"));\n__export(require(\"./base/views/thunk-view\"));\n__export(require(\"./base/views/view\"));\n__export(require(\"./base/views/viewer-cache\"));\n__export(require(\"./base/views/viewer-options\"));\n__export(require(\"./base/views/viewer\"));\n__export(require(\"./base/views/vnode-decorators\"));\n__export(require(\"./base/views/vnode-utils\"));\n__export(require(\"./base/types\"));\nvar di_config_1 = require(\"./base/di.config\");\nexports.defaultModule = di_config_1.default;\n// ------------------ Features ------------------\n__export(require(\"./features/bounds/bounds-manipulation\"));\n__export(require(\"./features/bounds/layout\"));\n__export(require(\"./features/bounds/model\"));\n__export(require(\"./features/bounds/vbox-layout\"));\n__export(require(\"./features/bounds/hbox-layout\"));\n__export(require(\"./features/bounds/stack-layout\"));\n__export(require(\"./features/button/button-handler\"));\n__export(require(\"./features/button/model\"));\n__export(require(\"./features/edit/edit-routing\"));\n__export(require(\"./features/edit/model\"));\n__export(require(\"./features/expand/expand\"));\n__export(require(\"./features/expand/model\"));\n__export(require(\"./features/expand/views\"));\n__export(require(\"./features/export/export\"));\n__export(require(\"./features/export/model\"));\n__export(require(\"./features/export/svg-exporter\"));\n__export(require(\"./features/fade/fade\"));\n__export(require(\"./features/fade/model\"));\n__export(require(\"./features/hover/hover\"));\n__export(require(\"./features/hover/model\"));\n__export(require(\"./features/move/model\"));\n__export(require(\"./features/move/move\"));\n__export(require(\"./features/open/open\"));\n__export(require(\"./features/open/model\"));\n__export(require(\"./features/select/model\"));\n__export(require(\"./features/select/select\"));\n__export(require(\"./features/undo-redo/undo-redo\"));\n__export(require(\"./features/update/model-matching\"));\n__export(require(\"./features/update/update-model\"));\n__export(require(\"./features/viewport/center-fit\"));\n__export(require(\"./features/viewport/model\"));\n__export(require(\"./features/viewport/scroll\"));\n__export(require(\"./features/viewport/viewport-root\"));\n__export(require(\"./features/viewport/viewport\"));\n__export(require(\"./features/viewport/zoom\"));\nvar di_config_2 = require(\"./features/move/di.config\");\nexports.moveModule = di_config_2.default;\nvar di_config_3 = require(\"./features/bounds/di.config\");\nexports.boundsModule = di_config_3.default;\nvar di_config_4 = require(\"./features/fade/di.config\");\nexports.fadeModule = di_config_4.default;\nvar di_config_5 = require(\"./features/select/di.config\");\nexports.selectModule = di_config_5.default;\nvar di_config_6 = require(\"./features/undo-redo/di.config\");\nexports.undoRedoModule = di_config_6.default;\nvar di_config_7 = require(\"./features/viewport/di.config\");\nexports.viewportModule = di_config_7.default;\nvar di_config_8 = require(\"./features/hover/di.config\");\nexports.hoverModule = di_config_8.default;\nvar di_config_9 = require(\"./features/edit/di.config\");\nexports.edgeEditModule = di_config_9.default;\nvar di_config_10 = require(\"./features/export/di.config\");\nexports.exportModule = di_config_10.default;\nvar di_config_11 = require(\"./features/expand/di.config\");\nexports.expandModule = di_config_11.default;\nvar di_config_12 = require(\"./features/open/di.config\");\nexports.openModule = di_config_12.default;\nvar di_config_13 = require(\"./features/button/di.config\");\nexports.buttonModule = di_config_13.default;\n// ------------------ Graph ------------------\n__export(require(\"./graph/sgraph-factory\"));\n__export(require(\"./graph/sgraph\"));\n__export(require(\"./graph/views\"));\n// ------------------ Library ------------------\n__export(require(\"./lib/generic-views\"));\n__export(require(\"./lib/html-views\"));\n__export(require(\"./lib/model\"));\n__export(require(\"./lib/svg-views\"));\n// ------------------ Model Source ------------------\n__export(require(\"./model-source/diagram-server\"));\n__export(require(\"./model-source/diagram-state\"));\n__export(require(\"./model-source/local-model-source\"));\n__export(require(\"./model-source/logging\"));\n__export(require(\"./model-source/model-source\"));\n__export(require(\"./model-source/websocket\"));\nvar di_config_14 = require(\"./model-source/di.config\");\nexports.modelSourceModule = di_config_14.default;\n// ------------------ Utilities ------------------\n__export(require(\"./utils/anchors\"));\n__export(require(\"./utils/browser\"));\n__export(require(\"./utils/color\"));\n__export(require(\"./utils/geometry\"));\n__export(require(\"./utils/logging\"));\n__export(require(\"./utils/registry\"));\n//# sourceMappingURL=index.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/index.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../model/smodel\");\nvar command_1 = require(\"../commands/command\");\n/**\n * Grabs the bounds from the root element in page coordinates and fires a\n * InitializeCanvasBoundsAction. This size is needed for other actions such\n * as FitToScreenAction.\n */\nvar CanvasBoundsInitializer = /** @class */ (function () {\n    function CanvasBoundsInitializer(actionDispatcher) {\n        this.actionDispatcher = actionDispatcher;\n    }\n    CanvasBoundsInitializer.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot && !geometry_1.isValidDimension(element.canvasBounds)) {\n            this.rootAndVnode = [element, vnode];\n        }\n        return vnode;\n    };\n    CanvasBoundsInitializer.prototype.postUpdate = function () {\n        if (this.rootAndVnode !== undefined) {\n            var domElement = this.rootAndVnode[1].elm;\n            var oldBounds = this.rootAndVnode[0].canvasBounds;\n            if (domElement !== undefined) {\n                var newBounds = this.getBoundsInPage(domElement);\n                if (!(geometry_1.almostEquals(newBounds.x, oldBounds.x)\n                    && geometry_1.almostEquals(newBounds.y, oldBounds.y)\n                    && geometry_1.almostEquals(newBounds.width, oldBounds.width)\n                    && geometry_1.almostEquals(newBounds.height, oldBounds.width)))\n                    this.actionDispatcher.dispatch(new InitializeCanvasBoundsAction(newBounds));\n            }\n            this.rootAndVnode = undefined;\n        }\n    };\n    CanvasBoundsInitializer.prototype.getBoundsInPage = function (element) {\n        var bounds = element.getBoundingClientRect();\n        var scroll = typeof window !== 'undefined' ? { x: window.scrollX, y: window.scrollY } : geometry_1.ORIGIN_POINT;\n        return {\n            x: bounds.left + scroll.x,\n            y: bounds.top + scroll.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    };\n    CanvasBoundsInitializer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __metadata(\"design:paramtypes\", [Object])\n    ], CanvasBoundsInitializer);\n    return CanvasBoundsInitializer;\n}());\nexports.CanvasBoundsInitializer = CanvasBoundsInitializer;\nvar InitializeCanvasBoundsAction = /** @class */ (function () {\n    function InitializeCanvasBoundsAction(newCanvasBounds) {\n        this.newCanvasBounds = newCanvasBounds;\n        this.kind = InitializeCanvasBoundsCommand.KIND;\n    }\n    return InitializeCanvasBoundsAction;\n}());\nexports.InitializeCanvasBoundsAction = InitializeCanvasBoundsAction;\nvar InitializeCanvasBoundsCommand = /** @class */ (function (_super) {\n    __extends(InitializeCanvasBoundsCommand, _super);\n    function InitializeCanvasBoundsCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    InitializeCanvasBoundsCommand.prototype.execute = function (context) {\n        this.newCanvasBounds = this.action.newCanvasBounds;\n        context.root.canvasBounds = this.newCanvasBounds;\n        return context.root;\n    };\n    InitializeCanvasBoundsCommand.prototype.undo = function (context) {\n        return context.root;\n    };\n    InitializeCanvasBoundsCommand.prototype.redo = function (context) {\n        return context.root;\n    };\n    InitializeCanvasBoundsCommand.KIND = 'initializeCanvasBounds';\n    return InitializeCanvasBoundsCommand;\n}(command_1.SystemCommand));\nexports.InitializeCanvasBoundsCommand = InitializeCanvasBoundsCommand;\n//# sourceMappingURL=initialize-canvas.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/features/initialize-canvas.js","\"use strict\";\n/*\n * Copyright (C) 2018 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar model_1 = require(\"./model\");\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar animation_1 = require(\"../../base/animations/animation\");\nfunction createRoutingHandle(kind, parentId, index) {\n    var handle = new model_1.SRoutingHandle();\n    handle.type = kind === 'junction' ? 'routing-point' : 'volatile-routing-point';\n    handle.kind = kind;\n    handle.pointIndex = index;\n    return handle;\n}\nexports.createRoutingHandle = createRoutingHandle;\nfunction createRoutingHandles(editTarget) {\n    var rpCount = editTarget.routingPoints.length;\n    var targetId = editTarget.id;\n    editTarget.add(createRoutingHandle('line', targetId, -1));\n    for (var i = 0; i < rpCount; i++) {\n        editTarget.add(createRoutingHandle('junction', targetId, i));\n        editTarget.add(createRoutingHandle('line', targetId, i));\n    }\n}\nexports.createRoutingHandles = createRoutingHandles;\nvar SwitchEditModeAction = /** @class */ (function () {\n    function SwitchEditModeAction(elementsToActivate, elementsToDeactivate) {\n        if (elementsToActivate === void 0) { elementsToActivate = []; }\n        if (elementsToDeactivate === void 0) { elementsToDeactivate = []; }\n        this.elementsToActivate = elementsToActivate;\n        this.elementsToDeactivate = elementsToDeactivate;\n        this.kind = SwitchEditModeCommand.KIND;\n    }\n    return SwitchEditModeAction;\n}());\nexports.SwitchEditModeAction = SwitchEditModeAction;\nvar SwitchEditModeCommand = /** @class */ (function (_super) {\n    __extends(SwitchEditModeCommand, _super);\n    function SwitchEditModeCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.elementsToActivate = [];\n        _this.elementsToDeactivate = [];\n        _this.handlesToRemove = [];\n        return _this;\n    }\n    SwitchEditModeCommand.prototype.execute = function (context) {\n        var _this = this;\n        var index = context.root.index;\n        this.action.elementsToActivate.forEach(function (id) {\n            var element = index.getById(id);\n            if (element !== undefined)\n                _this.elementsToActivate.push(element);\n        });\n        this.action.elementsToDeactivate.forEach(function (id) {\n            var element = index.getById(id);\n            if (element !== undefined)\n                _this.elementsToDeactivate.push(element);\n            if (element instanceof model_1.SRoutingHandle && model_1.isRoutable(element.parent)) {\n                var parent_1 = element.parent;\n                if (_this.shouldRemoveHandle(element, parent_1)) {\n                    _this.handlesToRemove.push({ handle: element, parent: parent_1 });\n                    _this.elementsToDeactivate.push(parent_1);\n                    _this.elementsToActivate.push(parent_1);\n                }\n            }\n        });\n        return this.doExecute(context);\n    };\n    SwitchEditModeCommand.prototype.doExecute = function (context) {\n        this.handlesToRemove.forEach(function (entry) {\n            entry.point = entry.parent.routingPoints.splice(entry.handle.pointIndex, 1)[0];\n        });\n        this.elementsToDeactivate.forEach(function (element) {\n            if (model_1.isRoutable(element) && element instanceof smodel_1.SParentElement)\n                element.removeAll(function (child) { return child instanceof model_1.SRoutingHandle; });\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = false;\n        });\n        this.elementsToActivate.forEach(function (element) {\n            if (model_1.canEditRouting(element) && element instanceof smodel_1.SParentElement)\n                createRoutingHandles(element);\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = true;\n        });\n        return context.root;\n    };\n    SwitchEditModeCommand.prototype.shouldRemoveHandle = function (handle, parent) {\n        if (handle.kind === 'junction') {\n            var route = parent.route();\n            return route.find(function (rp) { return rp.pointIndex === handle.pointIndex; }) === undefined;\n        }\n        return false;\n    };\n    SwitchEditModeCommand.prototype.undo = function (context) {\n        this.handlesToRemove.forEach(function (entry) {\n            if (entry.point !== undefined)\n                entry.parent.routingPoints.splice(entry.handle.pointIndex, 0, entry.point);\n        });\n        this.elementsToActivate.forEach(function (element) {\n            if (model_1.isRoutable(element) && element instanceof smodel_1.SParentElement)\n                element.removeAll(function (child) { return child instanceof model_1.SRoutingHandle; });\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = false;\n        });\n        this.elementsToDeactivate.forEach(function (element) {\n            if (model_1.canEditRouting(element) && element instanceof smodel_1.SParentElement)\n                createRoutingHandles(element);\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = true;\n        });\n        return context.root;\n    };\n    SwitchEditModeCommand.prototype.redo = function (context) {\n        return this.doExecute(context);\n    };\n    SwitchEditModeCommand.KIND = \"switchEditMode\";\n    SwitchEditModeCommand = __decorate([\n        inversify_1.injectable(),\n        __metadata(\"design:paramtypes\", [SwitchEditModeAction])\n    ], SwitchEditModeCommand);\n    return SwitchEditModeCommand;\n}(command_1.Command));\nexports.SwitchEditModeCommand = SwitchEditModeCommand;\nvar MoveRoutingHandleAction = /** @class */ (function () {\n    function MoveRoutingHandleAction(moves, animate) {\n        if (animate === void 0) { animate = true; }\n        this.moves = moves;\n        this.animate = animate;\n        this.kind = MoveRoutingHandleCommand.KIND;\n    }\n    return MoveRoutingHandleAction;\n}());\nexports.MoveRoutingHandleAction = MoveRoutingHandleAction;\nvar MoveRoutingHandleCommand = /** @class */ (function (_super) {\n    __extends(MoveRoutingHandleCommand, _super);\n    function MoveRoutingHandleCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.resolvedMoves = new Map;\n        _this.originalRoutingPoints = new Map;\n        return _this;\n    }\n    MoveRoutingHandleCommand.prototype.execute = function (context) {\n        var _this = this;\n        var model = context.root;\n        this.action.moves.forEach(function (move) {\n            var resolvedMove = _this.resolve(move, model.index);\n            if (resolvedMove !== undefined) {\n                _this.resolvedMoves.set(resolvedMove.elementId, resolvedMove);\n                var parent_2 = resolvedMove.parent;\n                if (model_1.isRoutable(parent_2))\n                    _this.originalRoutingPoints.set(parent_2.id, parent_2.routingPoints.slice());\n            }\n        });\n        if (this.action.animate) {\n            return new MoveHandlesAnimation(model, this.resolvedMoves, this.originalRoutingPoints, context).start();\n        }\n        else {\n            return this.doMove(context);\n        }\n    };\n    MoveRoutingHandleCommand.prototype.resolve = function (move, index) {\n        var element = index.getById(move.elementId);\n        if (element instanceof model_1.SRoutingHandle) {\n            return {\n                elementId: move.elementId,\n                element: element,\n                parent: element.parent,\n                fromPosition: move.fromPosition,\n                toPosition: move.toPosition\n            };\n        }\n        return undefined;\n    };\n    MoveRoutingHandleCommand.prototype.doMove = function (context) {\n        this.resolvedMoves.forEach(function (res) {\n            var handle = res.element;\n            var parent = res.parent;\n            if (model_1.isRoutable(parent)) {\n                var points = parent.routingPoints;\n                var index_1 = handle.pointIndex;\n                if (handle.kind === 'line') {\n                    // Upgrade to a proper routing point\n                    handle.kind = 'junction';\n                    handle.type = 'routing-point';\n                    points.splice(index_1 + 1, 0, res.fromPosition || points[Math.max(index_1, 0)]);\n                    parent.children.forEach(function (child) {\n                        if (child instanceof model_1.SRoutingHandle && (child === handle || child.pointIndex > index_1))\n                            child.pointIndex++;\n                    });\n                    parent.add(createRoutingHandle('line', parent.id, index_1));\n                    parent.add(createRoutingHandle('line', parent.id, index_1 + 1));\n                    index_1++;\n                }\n                if (index_1 >= 0 && index_1 < points.length) {\n                    points[index_1] = res.toPosition;\n                }\n            }\n        });\n        return context.root;\n    };\n    MoveRoutingHandleCommand.prototype.undo = function (context) {\n        var _this = this;\n        if (this.action.animate) {\n            return new MoveHandlesAnimation(context.root, this.resolvedMoves, this.originalRoutingPoints, context, true).start();\n        }\n        else {\n            this.resolvedMoves.forEach(function (res) {\n                var parent = res.parent;\n                var points = _this.originalRoutingPoints.get(parent.id);\n                if (points !== undefined && model_1.isRoutable(parent)) {\n                    parent.routingPoints = points;\n                    parent.removeAll(function (e) { return e instanceof model_1.SRoutingHandle; });\n                    createRoutingHandles(parent);\n                }\n            });\n            return context.root;\n        }\n    };\n    MoveRoutingHandleCommand.prototype.redo = function (context) {\n        if (this.action.animate) {\n            return new MoveHandlesAnimation(context.root, this.resolvedMoves, this.originalRoutingPoints, context, false).start();\n        }\n        else {\n            return this.doMove(context);\n        }\n    };\n    MoveRoutingHandleCommand.KIND = 'moveHandle';\n    MoveRoutingHandleCommand = __decorate([\n        inversify_1.injectable(),\n        __metadata(\"design:paramtypes\", [MoveRoutingHandleAction])\n    ], MoveRoutingHandleCommand);\n    return MoveRoutingHandleCommand;\n}(command_1.Command));\nexports.MoveRoutingHandleCommand = MoveRoutingHandleCommand;\nvar MoveHandlesAnimation = /** @class */ (function (_super) {\n    __extends(MoveHandlesAnimation, _super);\n    function MoveHandlesAnimation(model, handleMoves, originalRoutingPoints, context, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.handleMoves = handleMoves;\n        _this.originalRoutingPoints = originalRoutingPoints;\n        _this.reverse = reverse;\n        return _this;\n    }\n    MoveHandlesAnimation.prototype.tween = function (t) {\n        var _this = this;\n        this.handleMoves.forEach(function (handleMove) {\n            var parent = handleMove.parent;\n            if (model_1.isRoutable(parent) && handleMove.fromPosition !== undefined) {\n                if (_this.reverse && t === 1) {\n                    var revPoints = _this.originalRoutingPoints.get(parent.id);\n                    if (revPoints !== undefined) {\n                        parent.routingPoints = revPoints;\n                        parent.removeAll(function (e) { return e instanceof model_1.SRoutingHandle; });\n                        createRoutingHandles(parent);\n                        return;\n                    }\n                }\n                var points = parent.routingPoints;\n                var index = handleMove.element.pointIndex;\n                if (index >= 0 && index < points.length) {\n                    if (_this.reverse) {\n                        points[index] = {\n                            x: (1 - t) * handleMove.toPosition.x + t * handleMove.fromPosition.x,\n                            y: (1 - t) * handleMove.toPosition.y + t * handleMove.fromPosition.y\n                        };\n                    }\n                    else {\n                        points[index] = {\n                            x: (1 - t) * handleMove.fromPosition.x + t * handleMove.toPosition.x,\n                            y: (1 - t) * handleMove.fromPosition.y + t * handleMove.toPosition.y\n                        };\n                    }\n                }\n            }\n        });\n        return this.model;\n    };\n    return MoveHandlesAnimation;\n}(animation_1.Animation));\nexports.MoveHandlesAnimation = MoveHandlesAnimation;\n//# sourceMappingURL=edit-routing.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/edit/edit-routing.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar model_1 = require(\"./model\");\nvar inversify_1 = require(\"inversify\");\n/**\n * Sent from the client to the model source to recalculate a diagram when elements\n * are collapsed/expanded by the client.\n */\nvar CollapseExpandAction = /** @class */ (function () {\n    function CollapseExpandAction(expandIds, collapseIds) {\n        this.expandIds = expandIds;\n        this.collapseIds = collapseIds;\n        this.kind = CollapseExpandAction.KIND;\n    }\n    CollapseExpandAction.KIND = 'collapseExpand';\n    return CollapseExpandAction;\n}());\nexports.CollapseExpandAction = CollapseExpandAction;\n/**\n * Programmatic action for expanding or collapsing all elements.\n */\nvar CollapseExpandAllAction = /** @class */ (function () {\n    /**\n     * If `expand` is true, all elements are expanded, othewise they are collapsed.\n     */\n    function CollapseExpandAllAction(expand) {\n        if (expand === void 0) { expand = true; }\n        this.expand = expand;\n        this.kind = CollapseExpandAllAction.KIND;\n    }\n    CollapseExpandAllAction.KIND = 'collapseExpandAll';\n    return CollapseExpandAllAction;\n}());\nexports.CollapseExpandAllAction = CollapseExpandAllAction;\nvar ExpandButtonHandler = /** @class */ (function () {\n    function ExpandButtonHandler() {\n    }\n    ExpandButtonHandler.prototype.buttonPressed = function (button) {\n        var expandable = smodel_utils_1.findParentByFeature(button, model_1.isExpandable);\n        if (expandable !== undefined) {\n            return [new CollapseExpandAction(expandable.expanded ? [] : [expandable.id], expandable.expanded ? [expandable.id] : [])];\n        }\n        else {\n            return [];\n        }\n    };\n    ExpandButtonHandler.TYPE = 'button:expand';\n    ExpandButtonHandler = __decorate([\n        inversify_1.injectable()\n    ], ExpandButtonHandler);\n    return ExpandButtonHandler;\n}());\nexports.ExpandButtonHandler = ExpandButtonHandler;\n//# sourceMappingURL=expand.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/expand/expand.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.exportFeature = Symbol('exportFeature');\nfunction isExportable(element) {\n    return element.hasFeature(exports.exportFeature) && element['export'] !== undefined;\n}\nexports.isExportable = isExportable;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/export/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar smodel_2 = require(\"../../base/model/smodel\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar command_1 = require(\"../../base/commands/command\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar model_1 = require(\"../viewport/model\");\nvar model_2 = require(\"../select/model\");\nvar model_3 = require(\"../bounds/model\");\nvar model_4 = require(\"../edit/model\");\nvar edit_routing_1 = require(\"../edit/edit-routing\");\nvar model_5 = require(\"./model\");\nvar MoveAction = /** @class */ (function () {\n    function MoveAction(moves, animate) {\n        if (animate === void 0) { animate = true; }\n        this.moves = moves;\n        this.animate = animate;\n        this.kind = MoveCommand.KIND;\n    }\n    return MoveAction;\n}());\nexports.MoveAction = MoveAction;\nvar MoveCommand = /** @class */ (function (_super) {\n    __extends(MoveCommand, _super);\n    function MoveCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.resolvedMoves = new Map;\n        _this.resolvedRoutes = new Map;\n        return _this;\n    }\n    MoveCommand.prototype.execute = function (context) {\n        var _this = this;\n        var model = context.root;\n        var attachedElements = new Set;\n        this.action.moves.forEach(function (move) {\n            var resolvedMove = _this.resolve(move, model.index);\n            if (resolvedMove !== undefined) {\n                _this.resolvedMoves.set(resolvedMove.elementId, resolvedMove);\n                model.index.getAttachedElements(resolvedMove.element).forEach(function (e) { return attachedElements.add(e); });\n            }\n        });\n        attachedElements.forEach(function (element) { return _this.handleAttachedElement(element); });\n        if (this.action.animate) {\n            return new MoveAnimation(model, this.resolvedMoves, this.resolvedRoutes, context).start();\n        }\n        else {\n            return this.doMove(context);\n        }\n    };\n    MoveCommand.prototype.resolve = function (move, index) {\n        var element = index.getById(move.elementId);\n        if (element !== undefined && model_5.isLocateable(element)) {\n            var fromPosition = move.fromPosition || { x: element.position.x, y: element.position.y };\n            return {\n                elementId: move.elementId,\n                element: element,\n                fromPosition: fromPosition,\n                toPosition: move.toPosition\n            };\n        }\n        return undefined;\n    };\n    MoveCommand.prototype.handleAttachedElement = function (element) {\n        if (model_4.isRoutable(element)) {\n            var source = element.source;\n            var sourceMove = source ? this.resolvedMoves.get(source.id) : undefined;\n            var target = element.target;\n            var targetMove = target ? this.resolvedMoves.get(target.id) : undefined;\n            if (sourceMove !== undefined && targetMove !== undefined) {\n                var deltaX_1 = targetMove.toPosition.x - targetMove.fromPosition.x;\n                var deltaY_1 = targetMove.toPosition.y - targetMove.fromPosition.y;\n                this.resolvedRoutes.set(element.id, {\n                    elementId: element.id,\n                    element: element,\n                    fromRoute: element.routingPoints,\n                    toRoute: element.routingPoints.map(function (rp) { return ({\n                        x: rp.x + deltaX_1,\n                        y: rp.y + deltaY_1\n                    }); })\n                });\n            }\n        }\n    };\n    MoveCommand.prototype.doMove = function (context, reverse) {\n        this.resolvedMoves.forEach(function (res) {\n            if (reverse)\n                res.element.position = res.fromPosition;\n            else\n                res.element.position = res.toPosition;\n        });\n        this.resolvedRoutes.forEach(function (res) {\n            if (reverse)\n                res.element.routingPoints = res.fromRoute;\n            else\n                res.element.routingPoints = res.toRoute;\n        });\n        return context.root;\n    };\n    MoveCommand.prototype.undo = function (context) {\n        return new MoveAnimation(context.root, this.resolvedMoves, this.resolvedRoutes, context, true).start();\n    };\n    MoveCommand.prototype.redo = function (context) {\n        return new MoveAnimation(context.root, this.resolvedMoves, this.resolvedRoutes, context, false).start();\n    };\n    MoveCommand.prototype.merge = function (command, context) {\n        var _this = this;\n        if (!this.action.animate && command instanceof MoveCommand) {\n            command.action.moves.forEach(function (otherMove) {\n                var existingMove = _this.resolvedMoves.get(otherMove.elementId);\n                if (existingMove) {\n                    existingMove.toPosition = otherMove.toPosition;\n                }\n                else {\n                    var resolvedMove = _this.resolve(otherMove, context.root.index);\n                    if (resolvedMove)\n                        _this.resolvedMoves.set(resolvedMove.elementId, resolvedMove);\n                }\n            });\n            return true;\n        }\n        return false;\n    };\n    MoveCommand.KIND = 'move';\n    return MoveCommand;\n}(command_1.MergeableCommand));\nexports.MoveCommand = MoveCommand;\nvar MoveAnimation = /** @class */ (function (_super) {\n    __extends(MoveAnimation, _super);\n    function MoveAnimation(model, elementMoves, elementRoutes, context, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.elementMoves = elementMoves;\n        _this.elementRoutes = elementRoutes;\n        _this.reverse = reverse;\n        return _this;\n    }\n    MoveAnimation.prototype.tween = function (t) {\n        var _this = this;\n        this.elementMoves.forEach(function (elementMove) {\n            if (_this.reverse) {\n                elementMove.element.position = {\n                    x: (1 - t) * elementMove.toPosition.x + t * elementMove.fromPosition.x,\n                    y: (1 - t) * elementMove.toPosition.y + t * elementMove.fromPosition.y\n                };\n            }\n            else {\n                elementMove.element.position = {\n                    x: (1 - t) * elementMove.fromPosition.x + t * elementMove.toPosition.x,\n                    y: (1 - t) * elementMove.fromPosition.y + t * elementMove.toPosition.y\n                };\n            }\n        });\n        this.elementRoutes.forEach(function (elementRoute) {\n            var route = [];\n            for (var i = 0; i < elementRoute.fromRoute.length && i < elementRoute.toRoute.length; i++) {\n                var fp = elementRoute.fromRoute[i];\n                var tp = elementRoute.toRoute[i];\n                if (_this.reverse) {\n                    route.push({\n                        x: (1 - t) * tp.x + t * fp.x,\n                        y: (1 - t) * tp.y + t * fp.y\n                    });\n                }\n                else {\n                    route.push({\n                        x: (1 - t) * fp.x + t * tp.x,\n                        y: (1 - t) * fp.y + t * tp.y\n                    });\n                }\n            }\n            elementRoute.element.routingPoints = route;\n        });\n        return this.model;\n    };\n    return MoveAnimation;\n}(animation_1.Animation));\nexports.MoveAnimation = MoveAnimation;\nvar MoveMouseListener = /** @class */ (function (_super) {\n    __extends(MoveMouseListener, _super);\n    function MoveMouseListener() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.hasDragged = false;\n        return _this;\n    }\n    MoveMouseListener.prototype.mouseDown = function (target, event) {\n        var result = [];\n        if (event.button === 0) {\n            var moveable = smodel_utils_1.findParentByFeature(target, model_5.isMoveable);\n            var isRoutingHandle = target instanceof model_4.SRoutingHandle;\n            if (moveable !== undefined || isRoutingHandle) {\n                this.lastDragPosition = { x: event.pageX, y: event.pageY };\n            }\n            else {\n                this.lastDragPosition = undefined;\n            }\n            this.hasDragged = false;\n            if (isRoutingHandle) {\n                result.push(new edit_routing_1.SwitchEditModeAction([target.id], []));\n            }\n        }\n        return result;\n    };\n    MoveMouseListener.prototype.mouseMove = function (target, event) {\n        var _this = this;\n        var result = [];\n        if (event.buttons === 0)\n            this.mouseUp(target, event);\n        else if (this.lastDragPosition) {\n            var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n            this.hasDragged = true;\n            var zoom = viewport ? viewport.zoom : 1;\n            var dx_1 = (event.pageX - this.lastDragPosition.x) / zoom;\n            var dy_1 = (event.pageY - this.lastDragPosition.y) / zoom;\n            var nodeMoves_1 = [];\n            var handleMoves_1 = [];\n            target.root.index.all()\n                .filter(function (element) { return model_2.isSelectable(element) && element.selected; })\n                .forEach(function (element) {\n                if (model_5.isMoveable(element)) {\n                    nodeMoves_1.push({\n                        elementId: element.id,\n                        fromPosition: {\n                            x: element.position.x,\n                            y: element.position.y\n                        },\n                        toPosition: {\n                            x: element.position.x + dx_1,\n                            y: element.position.y + dy_1\n                        }\n                    });\n                }\n                else if (element instanceof model_4.SRoutingHandle) {\n                    var point = _this.getHandlePosition(element);\n                    if (point !== undefined) {\n                        handleMoves_1.push({\n                            elementId: element.id,\n                            fromPosition: point,\n                            toPosition: {\n                                x: point.x + dx_1,\n                                y: point.y + dy_1\n                            }\n                        });\n                    }\n                }\n            });\n            this.lastDragPosition = { x: event.pageX, y: event.pageY };\n            if (nodeMoves_1.length > 0)\n                result.push(new MoveAction(nodeMoves_1, false));\n            if (handleMoves_1.length > 0)\n                result.push(new edit_routing_1.MoveRoutingHandleAction(handleMoves_1, false));\n        }\n        return result;\n    };\n    MoveMouseListener.prototype.getHandlePosition = function (handle) {\n        var parent = handle.parent;\n        if (!model_4.isRoutable(parent)) {\n            return undefined;\n        }\n        if (handle.kind === 'line') {\n            var getIndex = function (rp) {\n                if (rp.pointIndex !== undefined)\n                    return rp.pointIndex;\n                else if (rp.kind === 'target')\n                    return parent.routingPoints.length;\n                else\n                    return -1;\n            };\n            var route = parent.route();\n            var rp1 = void 0, rp2 = void 0;\n            for (var _i = 0, route_1 = route; _i < route_1.length; _i++) {\n                var rp = route_1[_i];\n                var i = getIndex(rp);\n                if (i <= handle.pointIndex && (rp1 === undefined || i > getIndex(rp1)))\n                    rp1 = rp;\n                if (i > handle.pointIndex && (rp2 === undefined || i < getIndex(rp2)))\n                    rp2 = rp;\n            }\n            if (rp1 !== undefined && rp2 !== undefined) {\n                return geometry_1.centerOfLine(rp1, rp2);\n            }\n        }\n        else if (handle.pointIndex >= 0) {\n            return parent.routingPoints[handle.pointIndex];\n        }\n        return undefined;\n    };\n    MoveMouseListener.prototype.mouseEnter = function (target, event) {\n        if (target instanceof smodel_2.SModelRoot && event.buttons === 0)\n            this.mouseUp(target, event);\n        return [];\n    };\n    MoveMouseListener.prototype.mouseUp = function (target, event) {\n        var result = [];\n        if (this.lastDragPosition) {\n            target.root.index.all()\n                .forEach(function (element) {\n                if (element instanceof model_4.SRoutingHandle && element.editMode)\n                    result.push(new edit_routing_1.SwitchEditModeAction([], [element.id]));\n            });\n        }\n        this.hasDragged = false;\n        this.lastDragPosition = undefined;\n        return result;\n    };\n    MoveMouseListener.prototype.decorate = function (vnode, element) {\n        return vnode;\n    };\n    return MoveMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.MoveMouseListener = MoveMouseListener;\nvar LocationDecorator = /** @class */ (function () {\n    function LocationDecorator() {\n    }\n    LocationDecorator.prototype.decorate = function (vnode, element) {\n        var translate = '';\n        if (model_5.isLocateable(element) && element instanceof smodel_1.SChildElement && element.parent !== undefined) {\n            translate = 'translate(' + element.position.x + ', ' + element.position.y + ')';\n        }\n        if (model_3.isAlignable(element)) {\n            if (translate.length > 0)\n                translate += ' ';\n            translate += 'translate(' + element.alignment.x + ', ' + element.alignment.y + ')';\n        }\n        if (translate.length > 0)\n            vnode_utils_1.setAttr(vnode, 'transform', translate);\n        return vnode;\n    };\n    LocationDecorator.prototype.postUpdate = function () {\n    };\n    LocationDecorator = __decorate([\n        inversify_1.injectable()\n    ], LocationDecorator);\n    return LocationDecorator;\n}());\nexports.LocationDecorator = LocationDecorator;\n//# sourceMappingURL=move.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/move/move.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar iterable_1 = require(\"../utils/iterable\");\nvar smodel_1 = require(\"../base/model/smodel\");\nvar model_1 = require(\"../features/bounds/model\");\nvar model_2 = require(\"../features/fade/model\");\nvar model_3 = require(\"../features/hover/model\");\nvar model_4 = require(\"../features/move/model\");\nvar model_5 = require(\"../features/select/model\");\nvar viewport_root_1 = require(\"../features/viewport/viewport-root\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar model_6 = require(\"../features/bounds/model\");\nvar model_7 = require(\"../features/edit/model\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar routing_1 = require(\"./routing\");\n/**\n * Root element for graph-like models.\n */\nvar SGraph = /** @class */ (function (_super) {\n    __extends(SGraph, _super);\n    function SGraph(index) {\n        if (index === void 0) { index = new SGraphIndex(); }\n        return _super.call(this, index) || this;\n    }\n    return SGraph;\n}(viewport_root_1.ViewportRootElement));\nexports.SGraph = SGraph;\n/**\n * A connectable element is one that can have outgoing and incoming edges, i.e. it can be the source\n * or target element of an edge. There are two kinds of connectable elements: nodes (`SNode`) and\n * ports (`SPort`). A node represents a main entity, while a port is a connection point inside a node.\n */\nvar SConnectableElement = /** @class */ (function (_super) {\n    __extends(SConnectableElement, _super);\n    function SConnectableElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(SConnectableElement.prototype, \"incomingEdges\", {\n        /**\n         * The incoming edges of this connectable element. They are resolved by the index, which must\n         * be an `SGraphIndex`.\n         */\n        get: function () {\n            return this.index.getIncomingEdges(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SConnectableElement.prototype, \"outgoingEdges\", {\n        /**\n         * The outgoing edges of this connectable element. They are resolved by the index, which must\n         * be an `SGraphIndex`.\n         */\n        get: function () {\n            return this.index.getOutgoingEdges(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Compute an anchor position for routing an edge towards this element.\n     *\n     * The default implementation returns the element's center point. If edges should be connected\n     * differently, e.g. to some point on the boundary of the element's view, the according computation\n     * should be implemented in a subclass by overriding this method.\n     *\n     * @param referencePoint The point from which the edge is routed towards this element\n     * @param offset An optional offset value to be considered in the anchor computation;\n     *               positive values should shift the anchor away from this element, negative values\n     *               should shift the anchor more to the inside.\n     */\n    SConnectableElement.prototype.getAnchor = function (referencePoint, offset) {\n        return geometry_1.center(this.bounds);\n    };\n    /**\n     * Compute an anchor position for routing an edge towards this element and correct any mismatch\n     * of the coordinate systems.\n     *\n     * @param refPoint The point from which the edge is routed towards this element\n     * @param refContainer The parent element that defines the coordinate system for `refPoint`\n     * @param edge The edge for which the anchor is computed\n     * @param offset An optional offset value (see `getAnchor`)\n     */\n    SConnectableElement.prototype.getTranslatedAnchor = function (refPoint, refContainer, edge, offset) {\n        var translatedRefPoint = smodel_utils_1.translatePoint(refPoint, refContainer, this.parent);\n        var anchor = this.getAnchor(translatedRefPoint, offset);\n        return smodel_utils_1.translatePoint(anchor, this.parent, edge.parent);\n    };\n    return SConnectableElement;\n}(model_6.SShapeElement));\nexports.SConnectableElement = SConnectableElement;\n/**\n * Model element class for nodes, which are the main entities in a graph. A node can be connected to\n * another node via an SEdge. Such a connection can be direct, i.e. the node is the source or target of\n * the edge, or indirect through a port, i.e. it contains an SPort which is the source or target of the edge.\n */\nvar SNode = /** @class */ (function (_super) {\n    __extends(SNode, _super);\n    function SNode() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.hoverFeedback = false;\n        _this.opacity = 1;\n        return _this;\n    }\n    SNode.prototype.hasFeature = function (feature) {\n        return feature === model_5.selectFeature || feature === model_4.moveFeature || feature === model_1.boundsFeature\n            || feature === model_1.layoutContainerFeature || feature === model_2.fadeFeature || feature === model_3.hoverFeedbackFeature\n            || feature === model_3.popupFeature;\n    };\n    return SNode;\n}(SConnectableElement));\nexports.SNode = SNode;\n/**\n * A port is a connection point for edges. It should always be contained in an SNode.\n */\nvar SPort = /** @class */ (function (_super) {\n    __extends(SPort, _super);\n    function SPort() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.hoverFeedback = false;\n        _this.opacity = 1;\n        return _this;\n    }\n    SPort.prototype.hasFeature = function (feature) {\n        return feature === model_5.selectFeature || feature === model_1.boundsFeature || feature === model_2.fadeFeature\n            || feature === model_3.hoverFeedbackFeature;\n    };\n    return SPort;\n}(SConnectableElement));\nexports.SPort = SPort;\n/**\n * Model element class for edges, which are the connectors in a graph. An edge has a source and a target,\n * each of which can be either a node or a port. The source and target elements are referenced via their\n * ids and can be resolved with the index stored in the root element.\n */\nvar SEdge = /** @class */ (function (_super) {\n    __extends(SEdge, _super);\n    function SEdge() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.routingPoints = [];\n        _this.selected = false;\n        _this.hoverFeedback = false;\n        _this.opacity = 1;\n        return _this;\n    }\n    Object.defineProperty(SEdge.prototype, \"source\", {\n        get: function () {\n            return this.index.getById(this.sourceId);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SEdge.prototype, \"target\", {\n        get: function () {\n            return this.index.getById(this.targetId);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SEdge.prototype.route = function () {\n        if (this.router === undefined)\n            this.router = new routing_1.LinearEdgeRouter();\n        var route = this.router.route(this);\n        return model_7.filterEditModeHandles(route, this);\n    };\n    SEdge.prototype.hasFeature = function (feature) {\n        return feature === model_2.fadeFeature || feature === model_5.selectFeature ||\n            feature === model_7.editFeature || feature === model_3.hoverFeedbackFeature;\n    };\n    return SEdge;\n}(smodel_1.SChildElement));\nexports.SEdge = SEdge;\n/**\n * A label can be attached to a node, edge, or port, and contains some text to be rendered in its view.\n */\nvar SLabel = /** @class */ (function (_super) {\n    __extends(SLabel, _super);\n    function SLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.alignment = geometry_1.ORIGIN_POINT;\n        _this.opacity = 1;\n        return _this;\n    }\n    SLabel.prototype.hasFeature = function (feature) {\n        return feature === model_1.boundsFeature || feature === model_1.alignFeature || feature === model_2.fadeFeature || feature === model_1.layoutableChildFeature;\n    };\n    return SLabel;\n}(model_6.SShapeElement));\nexports.SLabel = SLabel;\n/**\n * A compartment is used to group multiple child elements such as labels of a node. Usually a `vbox`\n * or `hbox` layout is used to arrange these children.\n */\nvar SCompartment = /** @class */ (function (_super) {\n    __extends(SCompartment, _super);\n    function SCompartment() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.opacity = 1;\n        return _this;\n    }\n    SCompartment.prototype.hasFeature = function (feature) {\n        return feature === model_1.boundsFeature || feature === model_1.layoutContainerFeature || feature === model_1.layoutableChildFeature || feature === model_2.fadeFeature;\n    };\n    return SCompartment;\n}(model_6.SShapeElement));\nexports.SCompartment = SCompartment;\n/**\n * A specialized model index that tracks outgoing and incoming edges.\n */\nvar SGraphIndex = /** @class */ (function (_super) {\n    __extends(SGraphIndex, _super);\n    function SGraphIndex() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.outgoing = new Map;\n        _this.incoming = new Map;\n        return _this;\n    }\n    SGraphIndex.prototype.add = function (element) {\n        _super.prototype.add.call(this, element);\n        if (element instanceof SEdge) {\n            // Register the edge in the outgoing map\n            if (element.sourceId) {\n                var sourceArr = this.outgoing.get(element.sourceId);\n                if (sourceArr === undefined)\n                    this.outgoing.set(element.sourceId, [element]);\n                else\n                    sourceArr.push(element);\n            }\n            // Register the edge in the incoming map\n            if (element.targetId) {\n                var targetArr = this.incoming.get(element.targetId);\n                if (targetArr === undefined)\n                    this.incoming.set(element.targetId, [element]);\n                else\n                    targetArr.push(element);\n            }\n        }\n    };\n    SGraphIndex.prototype.remove = function (element) {\n        _super.prototype.remove.call(this, element);\n        if (element instanceof SEdge) {\n            // Remove the edge from the outgoing map\n            var sourceArr = this.outgoing.get(element.sourceId);\n            if (sourceArr !== undefined) {\n                var index = sourceArr.indexOf(element);\n                if (index >= 0) {\n                    if (sourceArr.length === 1)\n                        this.outgoing.delete(element.sourceId);\n                    else\n                        sourceArr.splice(index, 1);\n                }\n            }\n            // Remove the edge from the incoming map\n            var targetArr = this.incoming.get(element.targetId);\n            if (targetArr !== undefined) {\n                var index = targetArr.indexOf(element);\n                if (index >= 0) {\n                    if (targetArr.length === 1)\n                        this.incoming.delete(element.targetId);\n                    else\n                        targetArr.splice(index, 1);\n                }\n            }\n        }\n    };\n    SGraphIndex.prototype.getAttachedElements = function (element) {\n        var _this = this;\n        return new iterable_1.FluentIterableImpl(function () { return ({\n            outgoing: _this.outgoing.get(element.id),\n            incoming: _this.incoming.get(element.id),\n            nextOutgoingIndex: 0,\n            nextIncomingIndex: 0\n        }); }, function (state) {\n            var index = state.nextOutgoingIndex;\n            if (state.outgoing !== undefined && index < state.outgoing.length) {\n                state.nextOutgoingIndex = index + 1;\n                return { done: false, value: state.outgoing[index] };\n            }\n            index = state.nextIncomingIndex;\n            if (state.incoming !== undefined) {\n                // Filter out self-loops: edges that are both outgoing and incoming\n                while (index < state.incoming.length) {\n                    var edge = state.incoming[index];\n                    if (edge.sourceId !== edge.targetId) {\n                        state.nextIncomingIndex = index + 1;\n                        return { done: false, value: edge };\n                    }\n                    index++;\n                }\n            }\n            return { done: true, value: undefined };\n        });\n    };\n    SGraphIndex.prototype.getIncomingEdges = function (element) {\n        return this.incoming.get(element.id) || [];\n    };\n    SGraphIndex.prototype.getOutgoingEdges = function (element) {\n        return this.outgoing.get(element.id) || [];\n    };\n    return SGraphIndex;\n}(smodel_1.SModelIndex));\nexports.SGraphIndex = SGraphIndex;\n//# sourceMappingURL=sgraph.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/graph/sgraph.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingOnSyntax = (function () {\n    function BindingOnSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingOnSyntax.prototype.onActivation = function (handler) {\n        this._binding.onActivation = handler;\n        return new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n    };\n    return BindingOnSyntax;\n}());\nexports.BindingOnSyntax = BindingOnSyntax;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/binding_on_syntax.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar constraint_helpers_1 = require(\"./constraint_helpers\");\nvar BindingWhenSyntax = (function () {\n    function BindingWhenSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingWhenSyntax.prototype.when = function (constraint) {\n        this._binding.constraint = constraint;\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetNamed = function (name) {\n        this._binding.constraint = constraint_helpers_1.namedConstraint(name);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetIsDefault = function () {\n        this._binding.constraint = function (request) {\n            var targetIsDefault = (request.target !== null) &&\n                (request.target.isNamed() === false) &&\n                (request.target.isTagged() === false);\n            return targetIsDefault;\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetTagged = function (tag, value) {\n        this._binding.constraint = constraint_helpers_1.taggedConstraint(tag)(value);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenInjectedInto = function (parent) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.typeConstraint(parent)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.namedConstraint(name)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.taggedConstraint(tag)(value)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    return BindingWhenSyntax;\n}());\nexports.BindingWhenSyntax = BindingWhenSyntax;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/binding_when_syntax.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vnode_1 = require(\"./vnode\");\nvar is = require(\"./is\");\nfunction addNS(data, children, sel) {\n    data.ns = 'http://www.w3.org/2000/svg';\n    if (sel !== 'foreignObject' && children !== undefined) {\n        for (var i = 0; i < children.length; ++i) {\n            var childData = children[i].data;\n            if (childData !== undefined) {\n                addNS(childData, children[i].children, children[i].sel);\n            }\n        }\n    }\n}\nfunction h(sel, b, c) {\n    var data = {}, children, text, i;\n    if (c !== undefined) {\n        data = b;\n        if (is.array(c)) {\n            children = c;\n        }\n        else if (is.primitive(c)) {\n            text = c;\n        }\n        else if (c && c.sel) {\n            children = [c];\n        }\n    }\n    else if (b !== undefined) {\n        if (is.array(b)) {\n            children = b;\n        }\n        else if (is.primitive(b)) {\n            text = b;\n        }\n        else if (b && b.sel) {\n            children = [b];\n        }\n        else {\n            data = b;\n        }\n    }\n    if (is.array(children)) {\n        for (i = 0; i < children.length; ++i) {\n            if (is.primitive(children[i]))\n                children[i] = vnode_1.vnode(undefined, undefined, undefined, children[i]);\n        }\n    }\n    if (sel[0] === 's' && sel[1] === 'v' && sel[2] === 'g' &&\n        (sel.length === 3 || sel[3] === '.' || sel[3] === '#')) {\n        addNS(data, children, sel);\n    }\n    return vnode_1.vnode(sel, data, children, text, undefined);\n}\nexports.h = h;\n;\nexports.default = h;\n//# sourceMappingURL=h.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/h.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction vnode(sel, data, children, text, elm) {\n    var key = data === undefined ? undefined : data.key;\n    return { sel: sel, data: data, children: children,\n        text: text, elm: elm, key: key };\n}\nexports.vnode = vnode;\nexports.default = vnode;\n//# sourceMappingURL=vnode.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/vnode.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar animation_frame_syncer_1 = require(\"../animations/animation-frame-syncer\");\nvar set_model_1 = require(\"../features/set-model\");\nvar undo_redo_1 = require(\"../../features/undo-redo/undo-redo\");\nvar action_1 = require(\"./action\");\nvar action_handler_1 = require(\"./action-handler\");\n/**\n * Collects actions, converts them to commands and dispatches them.\n * Also acts as the proxy to model sources such as diagram servers.\n */\nvar ActionDispatcher = /** @class */ (function () {\n    function ActionDispatcher(actionHandlerRegistry, commandStack, logger, syncer) {\n        this.actionHandlerRegistry = actionHandlerRegistry;\n        this.commandStack = commandStack;\n        this.logger = logger;\n        this.syncer = syncer;\n        this.postponedActions = [];\n        this.postponedActions = [];\n        var initialCommand = new set_model_1.SetModelCommand(new set_model_1.SetModelAction(smodel_factory_1.EMPTY_ROOT));\n        this.blockUntil = initialCommand.blockUntil;\n        this.commandStack.execute(initialCommand);\n    }\n    ActionDispatcher.prototype.dispatchAll = function (actions) {\n        var _this = this;\n        return Promise.all(actions.map(function (action) { return _this.dispatch(action); }));\n    };\n    ActionDispatcher.prototype.dispatch = function (action) {\n        if (this.blockUntil !== undefined) {\n            return this.handleBlocked(action, this.blockUntil);\n        }\n        else if (action.kind === undo_redo_1.UndoAction.KIND) {\n            return this.commandStack.undo().then(function () { });\n        }\n        else if (action.kind === undo_redo_1.RedoAction.KIND) {\n            return this.commandStack.redo().then(function () { });\n        }\n        else {\n            return this.handleAction(action);\n        }\n    };\n    ActionDispatcher.prototype.handleAction = function (action) {\n        this.logger.log(this, 'handle', action);\n        var handlers = this.actionHandlerRegistry.get(action.kind);\n        if (handlers.length > 0) {\n            var promises = [];\n            for (var _i = 0, handlers_1 = handlers; _i < handlers_1.length; _i++) {\n                var handler = handlers_1[_i];\n                var result = handler.handle(action);\n                if (action_1.isAction(result)) {\n                    promises.push(this.dispatch(result));\n                }\n                else if (result !== undefined) {\n                    promises.push(this.commandStack.execute(result));\n                    this.blockUntil = result.blockUntil;\n                }\n            }\n            return Promise.all(promises);\n        }\n        else {\n            this.logger.warn(this, 'Missing handler for action', action);\n            return Promise.reject(\"Missing handler for action '\" + action.kind + \"'\");\n        }\n    };\n    ActionDispatcher.prototype.handleBlocked = function (action, predicate) {\n        var _this = this;\n        if (predicate(action)) {\n            this.blockUntil = undefined;\n            var result = this.handleAction(action);\n            var actions = this.postponedActions;\n            this.postponedActions = [];\n            for (var _i = 0, actions_1 = actions; _i < actions_1.length; _i++) {\n                var a = actions_1[_i];\n                this.dispatch(a.action).then(a.resolve, a.reject);\n            }\n            return result;\n        }\n        else {\n            this.logger.log(this, 'Action is postponed due to block condition', action);\n            return new Promise(function (resolve, reject) {\n                _this.postponedActions.push({ action: action, resolve: resolve, reject: reject });\n            });\n        }\n    };\n    ActionDispatcher = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ActionHandlerRegistry)),\n        __param(1, inversify_1.inject(types_1.TYPES.ICommandStack)),\n        __param(2, inversify_1.inject(types_1.TYPES.ILogger)),\n        __param(3, inversify_1.inject(types_1.TYPES.AnimationFrameSyncer)),\n        __metadata(\"design:paramtypes\", [action_handler_1.ActionHandlerRegistry, Object, Object, animation_frame_syncer_1.AnimationFrameSyncer])\n    ], ActionDispatcher);\n    return ActionDispatcher;\n}());\nexports.ActionDispatcher = ActionDispatcher;\n//# sourceMappingURL=action-dispatcher.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/actions/action-dispatcher.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isAction(object) {\n    return object !== undefined && object.hasOwnProperty('kind') && typeof (object['kind']) === 'string';\n}\nexports.isAction = isAction;\n//# sourceMappingURL=action.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/actions/action.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_factory_1 = require(\"./smodel-factory\");\nvar SModelStorage = /** @class */ (function () {\n    function SModelStorage() {\n        this.localCache = new Map;\n    }\n    SModelStorage.prototype.store = function (root) {\n        if (this.isLocalStorageAvailable())\n            localStorage.setItem(this.key, JSON.stringify(root));\n        else\n            this.localCache.set(this.key, JSON.stringify(root));\n    };\n    SModelStorage.prototype.load = function () {\n        var schema = (this.isLocalStorageAvailable())\n            ? localStorage.getItem(this.key)\n            : this.localCache.get(this.key);\n        if (schema)\n            return JSON.parse(schema);\n        else\n            return smodel_factory_1.EMPTY_ROOT;\n    };\n    SModelStorage.prototype.isLocalStorageAvailable = function () {\n        try {\n            return typeof localStorage === 'object' && localStorage !== null;\n        }\n        catch (e) {\n            return false;\n        }\n    };\n    Object.defineProperty(SModelStorage.prototype, \"key\", {\n        get: function () {\n            return this.viewerOptions.baseDiv;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], SModelStorage.prototype, \"viewerOptions\", void 0);\n    SModelStorage = __decorate([\n        inversify_1.injectable()\n    ], SModelStorage);\n    return SModelStorage;\n}());\nexports.SModelStorage = SModelStorage;\n//# sourceMappingURL=smodel-storage.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/model/smodel-storage.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar DOMHelper = /** @class */ (function () {\n    function DOMHelper(viewerOptions) {\n        this.viewerOptions = viewerOptions;\n    }\n    DOMHelper.prototype.getPrefix = function () {\n        var prefix = this.viewerOptions !== undefined && this.viewerOptions.baseDiv !== undefined ?\n            this.viewerOptions.baseDiv + \"_\" : \"\";\n        return prefix;\n    };\n    DOMHelper.prototype.createUniqueDOMElementId = function (element) {\n        return this.getPrefix() + element.id;\n    };\n    DOMHelper.prototype.findSModelIdByDOMElement = function (element) {\n        return element.id.replace(this.getPrefix(), '');\n    };\n    DOMHelper = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __metadata(\"design:paramtypes\", [Object])\n    ], DOMHelper);\n    return DOMHelper;\n}());\nexports.DOMHelper = DOMHelper;\n//# sourceMappingURL=dom-helper.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/dom-helper.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"./model\");\nvar AbstractLayout = /** @class */ (function () {\n    function AbstractLayout() {\n    }\n    AbstractLayout.prototype.layout = function (container, layouter) {\n        var boundsData = layouter.getBoundsData(container);\n        var options = this.getLayoutOptions(container);\n        var childrenSize = this.getChildrenSize(container, options, layouter);\n        var maxWidth = options.paddingFactor * (options.resizeContainer\n            ? childrenSize.width\n            : Math.max(0, this.getFixedContainerBounds(container, options, layouter).width) - options.paddingLeft - options.paddingRight);\n        var maxHeight = options.paddingFactor * (options.resizeContainer\n            ? childrenSize.height\n            : Math.max(0, this.getFixedContainerBounds(container, options, layouter).height) - options.paddingTop - options.paddingBottom);\n        if (maxWidth > 0 && maxHeight > 0) {\n            var offset = this.layoutChildren(container, layouter, options, maxWidth, maxHeight);\n            boundsData.bounds = this.getFinalContainerBounds(container, offset, options, maxWidth, maxHeight);\n            boundsData.boundsChanged = true;\n        }\n    };\n    AbstractLayout.prototype.getFinalContainerBounds = function (container, lastOffset, options, maxWidth, maxHeight) {\n        return {\n            x: container.bounds.x,\n            y: container.bounds.y,\n            width: maxWidth + options.paddingLeft + options.paddingRight,\n            height: maxHeight + options.paddingTop + options.paddingBottom\n        };\n    };\n    AbstractLayout.prototype.getFixedContainerBounds = function (container, layoutOptions, layouter) {\n        var currentContainer = container;\n        while (true) {\n            if (model_1.isBoundsAware(currentContainer)) {\n                var bounds = currentContainer.bounds;\n                if (model_1.isLayoutContainer(currentContainer) && layoutOptions.resizeContainer)\n                    layouter.log.error(currentContainer, 'Resizable container found while detecting fixed bounds');\n                if (geometry_1.isValidDimension(bounds))\n                    return bounds;\n            }\n            if (currentContainer instanceof smodel_1.SChildElement) {\n                currentContainer = currentContainer.parent;\n            }\n            else {\n                layouter.log.error(currentContainer, 'Cannot detect fixed bounds');\n                return geometry_1.EMPTY_BOUNDS;\n            }\n        }\n    };\n    AbstractLayout.prototype.layoutChildren = function (container, layouter, containerOptions, maxWidth, maxHeight) {\n        var _this = this;\n        var currentOffset = {\n            x: containerOptions.paddingLeft + 0.5 * (maxWidth - (maxWidth / containerOptions.paddingFactor)),\n            y: containerOptions.paddingTop + 0.5 * (maxHeight - (maxHeight / containerOptions.paddingFactor))\n        };\n        container.children.forEach(function (child) {\n            if (model_1.isLayoutableChild(child)) {\n                var boundsData = layouter.getBoundsData(child);\n                var bounds = boundsData.bounds;\n                var childOptions = _this.getChildLayoutOptions(child, containerOptions);\n                if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                    currentOffset = _this.layoutChild(child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight);\n                }\n            }\n        });\n        return currentOffset;\n    };\n    AbstractLayout.prototype.getDx = function (hAlign, bounds, maxWidth) {\n        switch (hAlign) {\n            case 'left':\n                return 0;\n            case 'center':\n                return 0.5 * (maxWidth - bounds.width);\n            case 'right':\n                return maxWidth - bounds.width;\n        }\n    };\n    AbstractLayout.prototype.getDy = function (vAlign, bounds, maxHeight) {\n        switch (vAlign) {\n            case 'top':\n                return 0;\n            case 'center':\n                return 0.5 * (maxHeight - bounds.height);\n            case 'bottom':\n                return maxHeight - bounds.height;\n        }\n    };\n    AbstractLayout.prototype.getChildLayoutOptions = function (child, containerOptions) {\n        var layoutOptions = child.layoutOptions;\n        if (layoutOptions === undefined)\n            return containerOptions;\n        else\n            return this.spread(containerOptions, layoutOptions);\n    };\n    AbstractLayout.prototype.getLayoutOptions = function (element) {\n        var _this = this;\n        var current = element;\n        var allOptions = [];\n        while (current !== undefined) {\n            var layoutOptions = current.layoutOptions;\n            if (layoutOptions !== undefined)\n                allOptions.push(layoutOptions);\n            if (current instanceof smodel_1.SChildElement)\n                current = current.parent;\n            else\n                break;\n        }\n        return allOptions.reverse().reduce(function (a, b) { return _this.spread(a, b); }, this.getDefaultLayoutOptions());\n    };\n    return AbstractLayout;\n}());\nexports.AbstractLayout = AbstractLayout;\n//# sourceMappingURL=abstract-layout.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/abstract-layout.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"./model\");\nvar vbox_layout_1 = require(\"./vbox-layout\");\nvar hbox_layout_1 = require(\"./hbox-layout\");\nvar stack_layout_1 = require(\"./stack-layout\");\nvar LayoutRegistry = /** @class */ (function (_super) {\n    __extends(LayoutRegistry, _super);\n    function LayoutRegistry() {\n        var _this = _super.call(this) || this;\n        _this.register(vbox_layout_1.VBoxLayouter.KIND, new vbox_layout_1.VBoxLayouter());\n        _this.register(hbox_layout_1.HBoxLayouter.KIND, new hbox_layout_1.HBoxLayouter());\n        _this.register(stack_layout_1.StackLayouter.KIND, new stack_layout_1.StackLayouter());\n        return _this;\n    }\n    return LayoutRegistry;\n}(registry_1.InstanceRegistry));\nexports.LayoutRegistry = LayoutRegistry;\nvar Layouter = /** @class */ (function () {\n    function Layouter(layoutRegistry, logger) {\n        this.layoutRegistry = layoutRegistry;\n        this.logger = logger;\n    }\n    Layouter.prototype.layout = function (element2boundsData) {\n        new StatefulLayouter(element2boundsData, this.layoutRegistry, this.logger).layout();\n    };\n    Layouter = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.LayoutRegistry)),\n        __param(1, inversify_1.inject(types_1.TYPES.ILogger)),\n        __metadata(\"design:paramtypes\", [LayoutRegistry, Object])\n    ], Layouter);\n    return Layouter;\n}());\nexports.Layouter = Layouter;\nvar StatefulLayouter = /** @class */ (function () {\n    function StatefulLayouter(element2boundsData, layoutRegistry, log) {\n        var _this = this;\n        this.element2boundsData = element2boundsData;\n        this.layoutRegistry = layoutRegistry;\n        this.log = log;\n        this.toBeLayouted = [];\n        element2boundsData.forEach(function (data, element) {\n            if (model_1.isLayoutContainer(element))\n                _this.toBeLayouted.push(element);\n        });\n    }\n    StatefulLayouter.prototype.getBoundsData = function (element) {\n        var boundsData = this.element2boundsData.get(element);\n        var bounds = element.bounds;\n        if (model_1.isLayoutContainer(element) && this.toBeLayouted.indexOf(element) >= 0) {\n            bounds = this.doLayout(element);\n        }\n        if (!boundsData) {\n            boundsData = {\n                bounds: bounds,\n                boundsChanged: false,\n                alignmentChanged: false\n            };\n            this.element2boundsData.set(element, boundsData);\n        }\n        return boundsData;\n    };\n    StatefulLayouter.prototype.layout = function () {\n        while (this.toBeLayouted.length > 0) {\n            var element = this.toBeLayouted[0];\n            this.doLayout(element);\n        }\n    };\n    StatefulLayouter.prototype.doLayout = function (element) {\n        var index = this.toBeLayouted.indexOf(element);\n        if (index >= 0)\n            this.toBeLayouted.splice(index, 1);\n        var layout = this.layoutRegistry.get(element.layout);\n        if (layout)\n            layout.layout(element, this);\n        var boundsData = this.element2boundsData.get(element);\n        if (boundsData !== undefined && boundsData.bounds !== undefined) {\n            return boundsData.bounds;\n        }\n        else {\n            this.log.error(element, 'Layout failed');\n            return geometry_1.EMPTY_BOUNDS;\n        }\n    };\n    return StatefulLayouter;\n}());\nexports.StatefulLayouter = StatefulLayouter;\n//# sourceMappingURL=layout.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/layout.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar registry_1 = require(\"../../utils/registry\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar ButtonHandlerRegistry = /** @class */ (function (_super) {\n    __extends(ButtonHandlerRegistry, _super);\n    function ButtonHandlerRegistry(buttonHandlerFactories) {\n        var _this = _super.call(this) || this;\n        buttonHandlerFactories.forEach(function (factory) { return _this.register(factory.TYPE, new factory()); });\n        return _this;\n    }\n    ButtonHandlerRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IButtonHandler)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], ButtonHandlerRegistry);\n    return ButtonHandlerRegistry;\n}(registry_1.InstanceRegistry));\nexports.ButtonHandlerRegistry = ButtonHandlerRegistry;\n//# sourceMappingURL=button-handler.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/button/button-handler.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"../fade/model\");\nvar SButton = /** @class */ (function (_super) {\n    __extends(SButton, _super);\n    function SButton() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.enabled = true;\n        return _this;\n    }\n    SButton.prototype.hasFeature = function (feature) {\n        return feature === model_1.boundsFeature || feature === model_2.fadeFeature || feature === model_1.layoutableChildFeature;\n    };\n    return SButton;\n}(model_1.SShapeElement));\nexports.SButton = SButton;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/button/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.expandFeature = Symbol('expandFeature');\nfunction isExpandable(element) {\n    return element.hasFeature(exports.expandFeature) && 'expanded' in element;\n}\nexports.isExpandable = isExpandable;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/expand/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar model_1 = require(\"./model\");\nvar FadeAnimation = /** @class */ (function (_super) {\n    __extends(FadeAnimation, _super);\n    function FadeAnimation(model, elementFades, context, removeAfterFadeOut) {\n        if (removeAfterFadeOut === void 0) { removeAfterFadeOut = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.elementFades = elementFades;\n        _this.removeAfterFadeOut = removeAfterFadeOut;\n        return _this;\n    }\n    FadeAnimation.prototype.tween = function (t, context) {\n        for (var _i = 0, _a = this.elementFades; _i < _a.length; _i++) {\n            var elementFade = _a[_i];\n            var element = elementFade.element;\n            if (elementFade.type === 'in') {\n                element.opacity = t;\n            }\n            else if (elementFade.type === 'out') {\n                element.opacity = 1 - t;\n                if (t === 1 && this.removeAfterFadeOut && element instanceof smodel_1.SChildElement) {\n                    element.parent.remove(element);\n                }\n            }\n        }\n        return this.model;\n    };\n    return FadeAnimation;\n}(animation_1.Animation));\nexports.FadeAnimation = FadeAnimation;\nvar ElementFader = /** @class */ (function () {\n    function ElementFader() {\n    }\n    ElementFader.prototype.decorate = function (vnode, element) {\n        if (model_1.isFadeable(element)) {\n            vnode_utils_1.setAttr(vnode, 'opacity', element.opacity);\n        }\n        return vnode;\n    };\n    ElementFader.prototype.postUpdate = function () {\n    };\n    ElementFader = __decorate([\n        inversify_1.injectable()\n    ], ElementFader);\n    return ElementFader;\n}());\nexports.ElementFader = ElementFader;\n//# sourceMappingURL=fade.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/fade/fade.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar model_1 = require(\"./model\");\nvar OpenAction = /** @class */ (function () {\n    function OpenAction(elementId) {\n        this.elementId = elementId;\n        this.kind = OpenAction.KIND;\n    }\n    OpenAction.KIND = 'open';\n    return OpenAction;\n}());\nexports.OpenAction = OpenAction;\nvar OpenMouseListener = /** @class */ (function (_super) {\n    __extends(OpenMouseListener, _super);\n    function OpenMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OpenMouseListener.prototype.doubleClick = function (target, event) {\n        var openableTarget = smodel_utils_1.findParentByFeature(target, model_1.isOpenable);\n        if (openableTarget !== undefined) {\n            return [new OpenAction(openableTarget.id)];\n        }\n        return [];\n    };\n    return OpenMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.OpenMouseListener = OpenMouseListener;\n//# sourceMappingURL=open.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/open/open.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar UndoAction = /** @class */ (function () {\n    function UndoAction() {\n        this.kind = UndoAction.KIND;\n    }\n    UndoAction.KIND = 'undo';\n    return UndoAction;\n}());\nexports.UndoAction = UndoAction;\nvar RedoAction = /** @class */ (function () {\n    function RedoAction() {\n        this.kind = RedoAction.KIND;\n    }\n    RedoAction.KIND = 'redo';\n    return RedoAction;\n}());\nexports.RedoAction = RedoAction;\nvar UndoRedoKeyListener = /** @class */ (function (_super) {\n    __extends(UndoRedoKeyListener, _super);\n    function UndoRedoKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    UndoRedoKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyZ', 'ctrlCmd'))\n            return [new UndoAction];\n        if (keyboard_1.matchesKeystroke(event, 'KeyZ', 'ctrlCmd', 'shift'))\n            return [new RedoAction];\n        return [];\n    };\n    return UndoRedoKeyListener;\n}(key_tool_1.KeyListener));\nexports.UndoRedoKeyListener = UndoRedoKeyListener;\n//# sourceMappingURL=undo-redo.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/undo-redo/undo-redo.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nfunction forEachMatch(matchResult, callback) {\n    for (var id in matchResult) {\n        if (matchResult.hasOwnProperty(id))\n            callback(id, matchResult[id]);\n    }\n}\nexports.forEachMatch = forEachMatch;\nvar ModelMatcher = /** @class */ (function () {\n    function ModelMatcher() {\n    }\n    ModelMatcher.prototype.match = function (left, right) {\n        var result = {};\n        this.matchLeft(left, result);\n        this.matchRight(right, result);\n        return result;\n    };\n    ModelMatcher.prototype.matchLeft = function (element, result, parentId) {\n        var match = result[element.id];\n        if (match !== undefined) {\n            match.left = element;\n            match.leftParentId = parentId;\n        }\n        else {\n            match = {\n                left: element,\n                leftParentId: parentId\n            };\n            result[element.id] = match;\n        }\n        if (smodel_1.isParent(element)) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.matchLeft(child, result, element.id);\n            }\n        }\n    };\n    ModelMatcher.prototype.matchRight = function (element, result, parentId) {\n        var match = result[element.id];\n        if (match !== undefined) {\n            match.right = element;\n            match.rightParentId = parentId;\n        }\n        else {\n            match = {\n                right: element,\n                rightParentId: parentId\n            };\n            result[element.id] = match;\n        }\n        if (smodel_1.isParent(element)) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.matchRight(child, result, element.id);\n            }\n        }\n    };\n    return ModelMatcher;\n}());\nexports.ModelMatcher = ModelMatcher;\nfunction applyMatches(root, matches) {\n    var index;\n    if (root instanceof smodel_1.SModelRoot) {\n        index = root.index;\n    }\n    else {\n        index = new smodel_1.SModelIndex();\n        index.add(root);\n    }\n    for (var _i = 0, matches_1 = matches; _i < matches_1.length; _i++) {\n        var match = matches_1[_i];\n        var newElementInserted = false;\n        if (match.left !== undefined && match.leftParentId !== undefined) {\n            var parent_1 = index.getById(match.leftParentId);\n            if (parent_1 !== undefined && parent_1.children !== undefined) {\n                var i = parent_1.children.indexOf(match.left);\n                if (i >= 0) {\n                    if (match.right !== undefined && match.leftParentId === match.rightParentId) {\n                        parent_1.children.splice(i, 1, match.right);\n                        newElementInserted = true;\n                    }\n                    else {\n                        parent_1.children.splice(i, 1);\n                    }\n                }\n                index.remove(match.left);\n            }\n        }\n        if (!newElementInserted && match.right !== undefined && match.rightParentId !== undefined) {\n            var parent_2 = index.getById(match.rightParentId);\n            if (parent_2 !== undefined) {\n                if (parent_2.children === undefined)\n                    parent_2.children = [];\n                parent_2.children.push(match.right);\n            }\n        }\n    }\n}\nexports.applyMatches = applyMatches;\n//# sourceMappingURL=model-matching.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/update/model-matching.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar command_1 = require(\"../../base/commands/command\");\nvar fade_1 = require(\"../fade/fade\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar move_1 = require(\"../move/move\");\nvar model_1 = require(\"../fade/model\");\nvar model_2 = require(\"../move/model\");\nvar model_3 = require(\"../bounds/model\");\nvar viewport_root_1 = require(\"../viewport/viewport-root\");\nvar model_4 = require(\"../select/model\");\nvar model_matching_1 = require(\"./model-matching\");\nvar resize_1 = require(\"../bounds/resize\");\n/**\n * Sent from the model source to the client in order to update the model. If no model is present yet,\n * this behaves the same as a SetModelAction. The transition from the old model to the new one can be animated.\n */\nvar UpdateModelAction = /** @class */ (function () {\n    function UpdateModelAction(input, animate) {\n        if (animate === void 0) { animate = true; }\n        this.animate = animate;\n        this.kind = UpdateModelCommand.KIND;\n        if (input.id !== undefined)\n            this.newRoot = input;\n        else\n            this.matches = input;\n    }\n    return UpdateModelAction;\n}());\nexports.UpdateModelAction = UpdateModelAction;\nvar UpdateModelCommand = /** @class */ (function (_super) {\n    __extends(UpdateModelCommand, _super);\n    function UpdateModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    UpdateModelCommand.prototype.execute = function (context) {\n        var newRoot;\n        if (this.action.newRoot !== undefined) {\n            newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        }\n        else {\n            newRoot = context.modelFactory.createRoot(context.root);\n            if (this.action.matches !== undefined)\n                this.applyMatches(newRoot, this.action.matches, context);\n        }\n        this.oldRoot = context.root;\n        this.newRoot = newRoot;\n        return this.performUpdate(this.oldRoot, this.newRoot, context);\n    };\n    UpdateModelCommand.prototype.performUpdate = function (oldRoot, newRoot, context) {\n        if ((this.action.animate === undefined || this.action.animate) && oldRoot.id === newRoot.id) {\n            var matchResult = void 0;\n            if (this.action.matches === undefined) {\n                var matcher = new model_matching_1.ModelMatcher();\n                matchResult = matcher.match(oldRoot, newRoot);\n            }\n            else {\n                matchResult = this.convertToMatchResult(this.action.matches, oldRoot, newRoot);\n            }\n            var animationOrRoot = this.computeAnimation(newRoot, matchResult, context);\n            if (animationOrRoot instanceof animation_1.Animation)\n                return animationOrRoot.start();\n            else\n                return animationOrRoot;\n        }\n        else {\n            if (oldRoot.type === newRoot.type && geometry_1.isValidDimension(oldRoot.canvasBounds))\n                newRoot.canvasBounds = oldRoot.canvasBounds;\n            return newRoot;\n        }\n    };\n    UpdateModelCommand.prototype.applyMatches = function (root, matches, context) {\n        var index = root.index;\n        for (var _i = 0, matches_1 = matches; _i < matches_1.length; _i++) {\n            var match = matches_1[_i];\n            if (match.left !== undefined) {\n                var element = index.getById(match.left.id);\n                if (element instanceof smodel_1.SChildElement)\n                    element.parent.remove(element);\n            }\n            if (match.right !== undefined) {\n                var element = context.modelFactory.createElement(match.right);\n                var parent_1 = void 0;\n                if (match.rightParentId !== undefined)\n                    parent_1 = index.getById(match.rightParentId);\n                if (parent_1 instanceof smodel_1.SParentElement)\n                    parent_1.add(element);\n                else\n                    root.add(element);\n            }\n        }\n    };\n    UpdateModelCommand.prototype.convertToMatchResult = function (matches, leftRoot, rightRoot) {\n        var result = {};\n        for (var _i = 0, matches_2 = matches; _i < matches_2.length; _i++) {\n            var match = matches_2[_i];\n            var converted = {};\n            var id = undefined;\n            if (match.left !== undefined) {\n                id = match.left.id;\n                converted.left = leftRoot.index.getById(id);\n                converted.leftParentId = match.leftParentId;\n            }\n            if (match.right !== undefined) {\n                id = match.right.id;\n                converted.right = rightRoot.index.getById(id);\n                converted.rightParentId = match.rightParentId;\n            }\n            if (id !== undefined)\n                result[id] = converted;\n        }\n        return result;\n    };\n    UpdateModelCommand.prototype.computeAnimation = function (newRoot, matchResult, context) {\n        var _this = this;\n        var animationData = {\n            fades: []\n        };\n        model_matching_1.forEachMatch(matchResult, function (id, match) {\n            if (match.left !== undefined && match.right !== undefined) {\n                // The element is still there, but may have been moved\n                _this.updateElement(match.left, match.right, animationData);\n            }\n            else if (match.right !== undefined) {\n                // An element has been added\n                var right = match.right;\n                if (model_1.isFadeable(right)) {\n                    right.opacity = 0;\n                    animationData.fades.push({\n                        element: right,\n                        type: 'in'\n                    });\n                }\n            }\n            else if (match.left instanceof smodel_1.SChildElement) {\n                // An element has been removed\n                var left = match.left;\n                if (model_1.isFadeable(left) && match.leftParentId !== undefined) {\n                    if (newRoot.index.getById(left.id) === undefined) {\n                        var parent_2 = newRoot.index.getById(match.leftParentId);\n                        if (parent_2 instanceof smodel_1.SParentElement) {\n                            var leftCopy = context.modelFactory.createElement(left);\n                            parent_2.add(leftCopy);\n                            animationData.fades.push({\n                                element: leftCopy,\n                                type: 'out'\n                            });\n                        }\n                    }\n                }\n            }\n        });\n        var animations = this.createAnimations(animationData, newRoot, context);\n        if (animations.length >= 2) {\n            return new animation_1.CompoundAnimation(newRoot, context, animations);\n        }\n        else if (animations.length === 1) {\n            return animations[0];\n        }\n        else {\n            return newRoot;\n        }\n    };\n    UpdateModelCommand.prototype.updateElement = function (left, right, animationData) {\n        if (model_2.isLocateable(left) && model_2.isLocateable(right)) {\n            var leftPos = left.position;\n            var rightPos = right.position;\n            if (!geometry_1.almostEquals(leftPos.x, rightPos.x) || !geometry_1.almostEquals(leftPos.y, rightPos.y)) {\n                if (animationData.moves === undefined)\n                    animationData.moves = [];\n                animationData.moves.push({\n                    element: right,\n                    elementId: right.id,\n                    fromPosition: leftPos,\n                    toPosition: rightPos\n                });\n                right.position = leftPos;\n            }\n        }\n        if (model_3.isBoundsAware(left) && model_3.isBoundsAware(right)) {\n            if (!geometry_1.isValidDimension(right.bounds)) {\n                right.bounds = {\n                    x: right.bounds.x,\n                    y: right.bounds.y,\n                    width: left.bounds.width,\n                    height: left.bounds.height\n                };\n            }\n            else if (!geometry_1.almostEquals(left.bounds.width, right.bounds.width)\n                || !geometry_1.almostEquals(left.bounds.height, right.bounds.height)) {\n                if (animationData.resizes === undefined)\n                    animationData.resizes = [];\n                animationData.resizes.push({\n                    element: right,\n                    fromDimension: {\n                        width: left.bounds.width,\n                        height: left.bounds.height,\n                    },\n                    toDimension: {\n                        width: right.bounds.width,\n                        height: right.bounds.height,\n                    }\n                });\n            }\n        }\n        if (model_4.isSelectable(left) && model_4.isSelectable(right)) {\n            right.selected = left.selected;\n        }\n        if (left instanceof smodel_1.SModelRoot && right instanceof smodel_1.SModelRoot) {\n            right.canvasBounds = left.canvasBounds;\n        }\n        if (left instanceof viewport_root_1.ViewportRootElement && right instanceof viewport_root_1.ViewportRootElement) {\n            right.scroll = left.scroll;\n            right.zoom = left.zoom;\n        }\n    };\n    UpdateModelCommand.prototype.createAnimations = function (data, root, context) {\n        var animations = [];\n        if (data.fades.length > 0) {\n            animations.push(new fade_1.FadeAnimation(root, data.fades, context, true));\n        }\n        if (data.moves !== undefined && data.moves.length > 0) {\n            var movesMap = new Map;\n            for (var _i = 0, _a = data.moves; _i < _a.length; _i++) {\n                var move = _a[_i];\n                movesMap.set(move.elementId, move);\n            }\n            animations.push(new move_1.MoveAnimation(root, movesMap, new Map, context, false));\n        }\n        if (data.resizes !== undefined && data.resizes.length > 0) {\n            var resizesMap = new Map;\n            for (var _b = 0, _c = data.resizes; _b < _c.length; _b++) {\n                var resize = _c[_b];\n                resizesMap.set(resize.element.id, resize);\n            }\n            animations.push(new resize_1.ResizeAnimation(root, resizesMap, context, false));\n        }\n        return animations;\n    };\n    UpdateModelCommand.prototype.undo = function (context) {\n        return this.performUpdate(this.newRoot, this.oldRoot, context);\n    };\n    UpdateModelCommand.prototype.redo = function (context) {\n        return this.performUpdate(this.oldRoot, this.newRoot, context);\n    };\n    UpdateModelCommand.KIND = 'updateModel';\n    UpdateModelCommand = __decorate([\n        inversify_1.injectable(),\n        __metadata(\"design:paramtypes\", [UpdateModelAction])\n    ], UpdateModelCommand);\n    return UpdateModelCommand;\n}(command_1.Command));\nexports.UpdateModelCommand = UpdateModelCommand;\n//# sourceMappingURL=update-model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/update/update-model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar command_1 = require(\"../../base/commands/command\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"../select/model\");\nvar viewport_1 = require(\"./viewport\");\nvar model_3 = require(\"./model\");\n/**\n * Triggered when the user requests the viewer to center on the current model. The resulting\n * CenterCommand changes the scroll setting of the viewport accordingly and resets the zoom to its default.\n * This action can also be sent from the model source to the client in order to perform such a\n * viewport change programmatically.\n */\nvar CenterAction = /** @class */ (function () {\n    function CenterAction(elementIds, animate) {\n        if (animate === void 0) { animate = true; }\n        this.elementIds = elementIds;\n        this.animate = animate;\n        this.kind = CenterCommand.KIND;\n    }\n    return CenterAction;\n}());\nexports.CenterAction = CenterAction;\n/**\n * Triggered when the user requests the viewer to fit its content to the available drawing area.\n * The resulting FitToScreenCommand changes the zoom and scroll settings of the viewport so the model\n * can be shown completely. This action can also be sent from the model source to the client in order\n * to perform such a viewport change programmatically.\n */\nvar FitToScreenAction = /** @class */ (function () {\n    function FitToScreenAction(elementIds, padding, maxZoom, animate) {\n        if (animate === void 0) { animate = true; }\n        this.elementIds = elementIds;\n        this.padding = padding;\n        this.maxZoom = maxZoom;\n        this.animate = animate;\n        this.kind = FitToScreenCommand.KIND;\n    }\n    return FitToScreenAction;\n}());\nexports.FitToScreenAction = FitToScreenAction;\nvar BoundsAwareViewportCommand = /** @class */ (function (_super) {\n    __extends(BoundsAwareViewportCommand, _super);\n    function BoundsAwareViewportCommand(animate) {\n        var _this = _super.call(this) || this;\n        _this.animate = animate;\n        return _this;\n    }\n    BoundsAwareViewportCommand.prototype.initialize = function (model) {\n        var _this = this;\n        if (model_3.isViewport(model)) {\n            this.oldViewport = {\n                scroll: model.scroll,\n                zoom: model.zoom\n            };\n            var allBounds_1 = [];\n            this.getElementIds().forEach(function (id) {\n                var element = model.index.getById(id);\n                if (element && model_1.isBoundsAware(element))\n                    allBounds_1.push(_this.boundsInViewport(element, element.bounds, model));\n            });\n            if (allBounds_1.length === 0) {\n                model.index.all().forEach(function (element) {\n                    if (model_2.isSelectable(element) && element.selected && model_1.isBoundsAware(element))\n                        allBounds_1.push(_this.boundsInViewport(element, element.bounds, model));\n                });\n            }\n            if (allBounds_1.length === 0) {\n                model.index.all().forEach(function (element) {\n                    if (model_1.isBoundsAware(element))\n                        allBounds_1.push(_this.boundsInViewport(element, element.bounds, model));\n                });\n            }\n            if (allBounds_1.length !== 0) {\n                var bounds = allBounds_1.reduce(function (b0, b1) { return geometry_1.combine(b0, b1); });\n                if (geometry_1.isValidDimension(bounds))\n                    this.newViewport = this.getNewViewport(bounds, model);\n            }\n        }\n    };\n    BoundsAwareViewportCommand.prototype.boundsInViewport = function (element, bounds, viewport) {\n        if (element instanceof smodel_1.SChildElement && element.parent !== viewport)\n            return this.boundsInViewport(element.parent, element.parent.localToParent(bounds), viewport);\n        else\n            return bounds;\n    };\n    BoundsAwareViewportCommand.prototype.execute = function (context) {\n        this.initialize(context.root);\n        return this.redo(context);\n    };\n    BoundsAwareViewportCommand.prototype.undo = function (context) {\n        var model = context.root;\n        if (model_3.isViewport(model) && this.newViewport !== undefined && !this.equal(this.newViewport, this.oldViewport)) {\n            if (this.animate)\n                return new viewport_1.ViewportAnimation(model, this.newViewport, this.oldViewport, context).start();\n            else {\n                model.scroll = this.oldViewport.scroll;\n                model.zoom = this.oldViewport.zoom;\n            }\n        }\n        return model;\n    };\n    BoundsAwareViewportCommand.prototype.redo = function (context) {\n        var model = context.root;\n        if (model_3.isViewport(model) && this.newViewport !== undefined && !this.equal(this.newViewport, this.oldViewport)) {\n            if (this.animate) {\n                return new viewport_1.ViewportAnimation(model, this.oldViewport, this.newViewport, context).start();\n            }\n            else {\n                model.scroll = this.newViewport.scroll;\n                model.zoom = this.newViewport.zoom;\n            }\n        }\n        return model;\n    };\n    BoundsAwareViewportCommand.prototype.equal = function (vp1, vp2) {\n        return vp1.zoom === vp2.zoom && vp1.scroll.x === vp2.scroll.x && vp1.scroll.y === vp2.scroll.y;\n    };\n    return BoundsAwareViewportCommand;\n}(command_1.Command));\nexports.BoundsAwareViewportCommand = BoundsAwareViewportCommand;\nvar CenterCommand = /** @class */ (function (_super) {\n    __extends(CenterCommand, _super);\n    function CenterCommand(action) {\n        var _this = _super.call(this, action.animate) || this;\n        _this.action = action;\n        return _this;\n    }\n    CenterCommand.prototype.getElementIds = function () {\n        return this.action.elementIds;\n    };\n    CenterCommand.prototype.getNewViewport = function (bounds, model) {\n        if (!geometry_1.isValidDimension(model.canvasBounds)) {\n            return undefined;\n        }\n        var c = geometry_1.center(bounds);\n        return {\n            scroll: {\n                x: c.x - 0.5 * model.canvasBounds.width,\n                y: c.y - 0.5 * model.canvasBounds.height\n            },\n            zoom: 1\n        };\n    };\n    CenterCommand.KIND = 'center';\n    return CenterCommand;\n}(BoundsAwareViewportCommand));\nexports.CenterCommand = CenterCommand;\nvar FitToScreenCommand = /** @class */ (function (_super) {\n    __extends(FitToScreenCommand, _super);\n    function FitToScreenCommand(action) {\n        var _this = _super.call(this, action.animate) || this;\n        _this.action = action;\n        return _this;\n    }\n    FitToScreenCommand.prototype.getElementIds = function () {\n        return this.action.elementIds;\n    };\n    FitToScreenCommand.prototype.getNewViewport = function (bounds, model) {\n        if (!geometry_1.isValidDimension(model.canvasBounds)) {\n            return undefined;\n        }\n        var c = geometry_1.center(bounds);\n        var delta = this.action.padding === undefined\n            ? 0\n            : 2 * this.action.padding;\n        var zoom = Math.min(model.canvasBounds.width / (bounds.width + delta), model.canvasBounds.height / bounds.height + delta);\n        if (this.action.maxZoom !== undefined)\n            zoom = Math.min(zoom, this.action.maxZoom);\n        return {\n            scroll: {\n                x: c.x - 0.5 * model.canvasBounds.width / zoom,\n                y: c.y - 0.5 * model.canvasBounds.height / zoom\n            },\n            zoom: zoom\n        };\n    };\n    FitToScreenCommand.KIND = 'fit';\n    return FitToScreenCommand;\n}(BoundsAwareViewportCommand));\nexports.FitToScreenCommand = FitToScreenCommand;\nvar CenterKeyboardListener = /** @class */ (function (_super) {\n    __extends(CenterKeyboardListener, _super);\n    function CenterKeyboardListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CenterKeyboardListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyC', 'ctrlCmd', 'shift'))\n            return [new CenterAction([])];\n        if (keyboard_1.matchesKeystroke(event, 'KeyF', 'ctrlCmd', 'shift'))\n            return [new FitToScreenAction([])];\n        return [];\n    };\n    return CenterKeyboardListener;\n}(key_tool_1.KeyListener));\nexports.CenterKeyboardListener = CenterKeyboardListener;\n//# sourceMappingURL=center-fit.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/center-fit.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"./model\");\nvar model_2 = require(\"../export/model\");\n/**\n * Model root element that defines a viewport, so it transforms the coordinate system with\n * a `scroll` translation and a `zoom` scaling.\n */\nvar ViewportRootElement = /** @class */ (function (_super) {\n    __extends(ViewportRootElement, _super);\n    function ViewportRootElement(index) {\n        var _this = _super.call(this, index) || this;\n        _this.scroll = { x: 0, y: 0 };\n        _this.zoom = 1;\n        _this.export = false;\n        return _this;\n    }\n    ViewportRootElement.prototype.hasFeature = function (feature) {\n        return feature === model_1.viewportFeature || feature === model_2.exportFeature;\n    };\n    ViewportRootElement.prototype.localToParent = function (point) {\n        var result = {\n            x: (point.x - this.scroll.x) * this.zoom,\n            y: (point.y - this.scroll.y) * this.zoom,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point)) {\n            result.width = point.width * this.zoom;\n            result.height = point.height * this.zoom;\n        }\n        return result;\n    };\n    ViewportRootElement.prototype.parentToLocal = function (point) {\n        var result = {\n            x: (point.x / this.zoom) + this.scroll.x,\n            y: (point.y / this.zoom) + this.scroll.y,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point) && geometry_1.isValidDimension(point)) {\n            result.width = point.width / this.zoom;\n            result.height = point.height / this.zoom;\n        }\n        return result;\n    };\n    return ViewportRootElement;\n}(smodel_1.SModelRoot));\nexports.ViewportRootElement = ViewportRootElement;\n//# sourceMappingURL=viewport-root.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/viewport-root.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\nvar action_handler_1 = require(\"../base/actions/action-handler\");\nvar set_model_1 = require(\"../base/features/set-model\");\nvar svg_exporter_1 = require(\"../features/export/svg-exporter\");\n/**\n * A model source is serving the model to the event cycle. It represents\n * the entry point to the client for external sources, such as model\n * editors.\n *\n * As an IActionHandler it listens to actions in and reacts to them with\n * commands or actions if necessary. This way, you can implement action\n * protocols between the client and the outside world.\n *\n * There are two default implementations for a ModelSource:\n * <ul>\n * <li>the LocalModelSource handles the actions to calculate bounds and\n * set/update the model</li>\n * <li>the DiagramServer connects via websocket to a remote source. It\n * can be used to connect to a model editor that provides the model,\n * layouts diagrams, transfers selection and answers model queries from\n * the client.</li>\n */\nvar ModelSource = /** @class */ (function () {\n    function ModelSource(actionDispatcher, actionHandlerRegistry, viewerOptions) {\n        this.actionDispatcher = actionDispatcher;\n        this.viewerOptions = viewerOptions;\n        this.initialize(actionHandlerRegistry);\n    }\n    ModelSource.prototype.initialize = function (registry) {\n        // Register model manipulation commands\n        registry.registerCommand(set_model_1.SetModelCommand);\n        // Register this model source\n        registry.register(set_model_1.RequestModelAction.KIND, this);\n        registry.register(svg_exporter_1.ExportSvgAction.KIND, this);\n    };\n    ModelSource = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.inject(types_1.TYPES.ActionHandlerRegistry)),\n        __param(2, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __metadata(\"design:paramtypes\", [Object, action_handler_1.ActionHandlerRegistry, Object])\n    ], ModelSource);\n    return ModelSource;\n}());\nexports.ModelSource = ModelSource;\n//# sourceMappingURL=model-source.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/model-source.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Returns whether the mouse or keyboard event includes the CMD key\n * on Mac or CTRL key on Linux / others.\n */\nfunction isCtrlOrCmd(event) {\n    if (isMac())\n        return event.metaKey;\n    else\n        return event.ctrlKey;\n}\nexports.isCtrlOrCmd = isCtrlOrCmd;\nfunction isMac() {\n    return window.navigator.userAgent.indexOf(\"Mac\") !== -1;\n}\nexports.isMac = isMac;\nfunction isCrossSite(url) {\n    if (url && typeof window !== 'undefined' && window.location) {\n        var baseURL = '';\n        if (window.location.protocol)\n            baseURL += window.location.protocol + '//';\n        if (window.location.host)\n            baseURL += window.location.host;\n        return baseURL.length > 0 && !url.startsWith(baseURL);\n    }\n    return false;\n}\nexports.isCrossSite = isCrossSite;\n//# sourceMappingURL=browser.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/browser.js","\"use strict\";\n/*\n * Copyright (C) 2018 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A helper class that allows to easily create fluent iterables.\n */\nvar FluentIterableImpl = /** @class */ (function () {\n    function FluentIterableImpl(startFn, nextFn) {\n        this.startFn = startFn;\n        this.nextFn = nextFn;\n    }\n    FluentIterableImpl.prototype[Symbol.iterator] = function () {\n        var _this = this;\n        var iterator = (_a = {\n                state: this.startFn(),\n                next: function () { return _this.nextFn(iterator.state); }\n            },\n            _a[Symbol.iterator] = function () { return iterator; },\n            _a);\n        return iterator;\n        var _a;\n    };\n    FluentIterableImpl.prototype.filter = function (callback) {\n        return filterIterable(this, callback);\n    };\n    FluentIterableImpl.prototype.map = function (callback) {\n        return mapIterable(this, callback);\n    };\n    FluentIterableImpl.prototype.forEach = function (callback) {\n        var iterator = this[Symbol.iterator]();\n        var index = 0;\n        var result;\n        do {\n            result = iterator.next();\n            if (result.value !== undefined)\n                callback(result.value, index);\n            index++;\n        } while (!result.done);\n    };\n    return FluentIterableImpl;\n}());\nexports.FluentIterableImpl = FluentIterableImpl;\n/**\n * Converts a FluentIterable into an array. If the input is an array, it is returned unchanged.\n */\nfunction toArray(input) {\n    if (input.constructor === Array) {\n        return input;\n    }\n    var result = [];\n    input.forEach(function (element) { return result.push(element); });\n    return result;\n}\nexports.toArray = toArray;\nexports.DONE_RESULT = Object.freeze({ done: true, value: undefined });\n/**\n * Create a fluent iterable that filters the content of the given iterable or array.\n */\nfunction filterIterable(input, callback) {\n    return new FluentIterableImpl(function () { return createIterator(input); }, function (iterator) {\n        var result;\n        do {\n            result = iterator.next();\n        } while (!result.done && !callback(result.value));\n        return result;\n    });\n}\nexports.filterIterable = filterIterable;\n/**\n * Create a fluent iterable that maps the content of the given iterable or array.\n */\nfunction mapIterable(input, callback) {\n    return new FluentIterableImpl(function () { return createIterator(input); }, function (iterator) {\n        var _a = iterator.next(), done = _a.done, value = _a.value;\n        if (done)\n            return exports.DONE_RESULT;\n        else\n            return { done: false, value: callback(value) };\n    });\n}\nexports.mapIterable = mapIterable;\n/**\n * Create an iterator for the given iterable or array.\n */\nfunction createIterator(collection) {\n    var method = collection[Symbol.iterator];\n    if (typeof method === 'function') {\n        return method.call(collection);\n    }\n    var length = collection.length;\n    if (typeof length === 'number' && length >= 0) {\n        return new ArrayIterator(collection);\n    }\n    return { next: function () { return exports.DONE_RESULT; } };\n}\n/**\n * Iterator implementation for arrays.\n */\nvar ArrayIterator = /** @class */ (function () {\n    function ArrayIterator(array) {\n        this.array = array;\n        this.index = 0;\n    }\n    ArrayIterator.prototype.next = function () {\n        if (this.index < this.array.length)\n            return { done: false, value: this.array[this.index++] };\n        else\n            return exports.DONE_RESULT;\n    };\n    ArrayIterator.prototype[Symbol.iterator] = function () {\n        return this;\n    };\n    return ArrayIterator;\n}());\n//# sourceMappingURL=iterable.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/iterable.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"none\"] = 0] = \"none\";\n    LogLevel[LogLevel[\"error\"] = 1] = \"error\";\n    LogLevel[LogLevel[\"warn\"] = 2] = \"warn\";\n    LogLevel[LogLevel[\"info\"] = 3] = \"info\";\n    LogLevel[LogLevel[\"log\"] = 4] = \"log\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\nvar NullLogger = /** @class */ (function () {\n    function NullLogger() {\n        this.logLevel = LogLevel.none;\n    }\n    NullLogger.prototype.error = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger.prototype.warn = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger.prototype.info = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger.prototype.log = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger = __decorate([\n        inversify_1.injectable()\n    ], NullLogger);\n    return NullLogger;\n}());\nexports.NullLogger = NullLogger;\nvar ConsoleLogger = /** @class */ (function () {\n    function ConsoleLogger(logLevel, viewOptions) {\n        if (logLevel === void 0) { logLevel = LogLevel.log; }\n        if (viewOptions === void 0) { viewOptions = { baseDiv: '' }; }\n        this.logLevel = logLevel;\n        this.viewOptions = viewOptions;\n    }\n    ConsoleLogger.prototype.error = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.error)\n            try {\n                console.error.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.warn = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.warn)\n            try {\n                console.warn.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.info = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.info)\n            try {\n                console.info.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.log = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.log)\n            try {\n                console.log.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.consoleArguments = function (thisArg, message, params) {\n        var caller;\n        if (typeof thisArg === 'object')\n            caller = thisArg.constructor.name;\n        else\n            caller = thisArg;\n        var date = new Date();\n        return [date.toLocaleTimeString() + ' ' + this.viewOptions.baseDiv + ' ' + caller + ': ' + message].concat(params);\n    };\n    ConsoleLogger = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.LogLevel)),\n        __param(1, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __metadata(\"design:paramtypes\", [Number, Object])\n    ], ConsoleLogger);\n    return ConsoleLogger;\n}());\nexports.ConsoleLogger = ConsoleLogger;\n//# sourceMappingURL=logging.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/logging.js","/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 1.3.2\n * 2016-06-16 18:25:19\n *\n * By Eli Grey, http://eligrey.com\n * License: MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof view === \"undefined\" || typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = new MouseEvent(\"click\");\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, is_safari = /constructor/i.test(view.HTMLElement) || view.safari\n\t\t, is_chrome_ios =/CriOS\\/[\\d]+/.test(navigator.userAgent)\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t// the Blob API is fundamentally broken as there is no \"downloadfinished\" event to subscribe to\n\t\t, arbitrary_revoke_timeout = 1000 * 40 // in ms\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, auto_bom = function(blob) {\n\t\t\t// prepend BOM for UTF-8 XML and text/* types (including HTML)\n\t\t\t// note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\t\t\tif (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n\t\t\t\treturn new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t\t, FileSaver = function(blob, name, no_auto_bom) {\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, force = type === force_saveable_type\n\t\t\t\t, object_url\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\tif ((is_chrome_ios || (force && is_safari)) && view.FileReader) {\n\t\t\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\t\treader.onloadend = function() {\n\t\t\t\t\t\t\tvar url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\t\t\tvar popup = view.open(url, '_blank');\n\t\t\t\t\t\t\tif(!popup) view.location.href = url;\n\t\t\t\t\t\t\turl=undefined; // release reference before dispatching\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\tdispatch_all();\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (!object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (force) {\n\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar opened = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (!opened) {\n\t\t\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tsave_link.href = object_url;\n\t\t\t\t\tsave_link.download = name;\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfs_error();\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name, no_auto_bom) {\n\t\t\treturn new FileSaver(blob, name || blob.name || \"download\", no_auto_bom);\n\t\t}\n\t;\n\t// IE 10+ (native saveAs)\n\tif (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n\t\treturn function(blob, name, no_auto_bom) {\n\t\t\tname = name || blob.name || \"download\";\n\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tFS_proto.abort = function(){};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd !== null)) {\n  define(\"FileSaver.js\", function() {\n    return saveAs;\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/file-saver/FileSaver.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar MetadataReader = (function () {\n    function MetadataReader() {\n    }\n    MetadataReader.prototype.getConstructorMetadata = function (constructorFunc) {\n        var compilerGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.PARAM_TYPES, constructorFunc);\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED, constructorFunc);\n        return {\n            compilerGeneratedMetadata: compilerGeneratedMetadata,\n            userGeneratedMetadata: userGeneratedMetadata || {}\n        };\n    };\n    MetadataReader.prototype.getPropertiesMetadata = function (constructorFunc) {\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED_PROP, constructorFunc) || [];\n        return userGeneratedMetadata;\n    };\n    return MetadataReader;\n}());\nexports.MetadataReader = MetadataReader;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/metadata_reader.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"./metadata\");\nvar queryable_string_1 = require(\"./queryable_string\");\nvar guid_1 = require(\"../utils/guid\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar Target = (function () {\n    function Target(type, name, serviceIdentifier, namedOrTagged) {\n        this.guid = guid_1.guid();\n        this.type = type;\n        this.serviceIdentifier = serviceIdentifier;\n        this.name = new queryable_string_1.QueryableString(name || \"\");\n        this.metadata = new Array();\n        var metadataItem = null;\n        if (typeof namedOrTagged === \"string\") {\n            metadataItem = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n        }\n        else if (namedOrTagged instanceof metadata_1.Metadata) {\n            metadataItem = namedOrTagged;\n        }\n        if (metadataItem !== null) {\n            this.metadata.push(metadataItem);\n        }\n    }\n    Target.prototype.hasTag = function (key) {\n        for (var i = 0; i < this.metadata.length; i++) {\n            var m = this.metadata[i];\n            if (m.key === key) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Target.prototype.isArray = function () {\n        return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n    };\n    Target.prototype.matchesArray = function (name) {\n        return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n    };\n    Target.prototype.isNamed = function () {\n        return this.hasTag(METADATA_KEY.NAMED_TAG);\n    };\n    Target.prototype.isTagged = function () {\n        return this.metadata.some(function (m) {\n            return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                (m.key !== METADATA_KEY.NAME_TAG) &&\n                (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                (m.key !== METADATA_KEY.NAMED_TAG);\n        });\n    };\n    Target.prototype.isOptional = function () {\n        return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n    };\n    Target.prototype.getNamedTag = function () {\n        if (this.isNamed()) {\n            return this.metadata.filter(function (m) { return m.key === METADATA_KEY.NAMED_TAG; })[0];\n        }\n        return null;\n    };\n    Target.prototype.getCustomTags = function () {\n        if (this.isTagged()) {\n            return this.metadata.filter(function (m) {\n                return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.NAME_TAG) &&\n                    (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                    (m.key !== METADATA_KEY.NAMED_TAG);\n            });\n        }\n        return null;\n    };\n    Target.prototype.matchesNamedTag = function (name) {\n        return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n    };\n    Target.prototype.matchesTag = function (key) {\n        var _this = this;\n        return function (value) {\n            for (var i = 0; i < _this.metadata.length; i++) {\n                var m = _this.metadata[i];\n                if (m.key === key && m.value === value) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n    return Target;\n}());\nexports.Target = Target;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/target.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar BindingWhenOnSyntax = (function () {\n    function BindingWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    }\n    BindingWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingWhenOnSyntax;\n}());\nexports.BindingWhenOnSyntax = BindingWhenOnSyntax;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/binding_when_on_syntax.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar traverseAncerstors = function (request, constraint) {\n    var parent = request.parentRequest;\n    if (parent !== null) {\n        return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n    }\n    else {\n        return false;\n    }\n};\nexports.traverseAncerstors = traverseAncerstors;\nvar taggedConstraint = function (key) { return function (value) {\n    var constraint = function (request) {\n        return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n    constraint.metaData = new metadata_1.Metadata(key, value);\n    return constraint;\n}; };\nexports.taggedConstraint = taggedConstraint;\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nexports.namedConstraint = namedConstraint;\nvar typeConstraint = function (type) { return function (request) {\n    var binding = null;\n    if (request !== null) {\n        binding = request.bindings[0];\n        if (typeof type === \"string\") {\n            var serviceIdentifier = binding.serviceIdentifier;\n            return serviceIdentifier === type;\n        }\n        else {\n            var constructor = request.bindings[0].implementationType;\n            return type === constructor;\n        }\n    }\n    return false;\n}; };\nexports.typeConstraint = typeConstraint;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/constraint_helpers.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.array = Array.isArray;\nfunction primitive(s) {\n    return typeof s === 'string' || typeof s === 'number';\n}\nexports.primitive = primitive;\n//# sourceMappingURL=is.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/is.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vnode_1 = require(\"./vnode\");\nvar is = require(\"./is\");\nvar htmldomapi_1 = require(\"./htmldomapi\");\nfunction isUndef(s) { return s === undefined; }\nfunction isDef(s) { return s !== undefined; }\nvar emptyNode = vnode_1.default('', {}, [], undefined, undefined);\nfunction sameVnode(vnode1, vnode2) {\n    return vnode1.key === vnode2.key && vnode1.sel === vnode2.sel;\n}\nfunction isVnode(vnode) {\n    return vnode.sel !== undefined;\n}\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n    var i, map = {}, key, ch;\n    for (i = beginIdx; i <= endIdx; ++i) {\n        ch = children[i];\n        if (ch != null) {\n            key = ch.key;\n            if (key !== undefined)\n                map[key] = i;\n        }\n    }\n    return map;\n}\nvar hooks = ['create', 'update', 'remove', 'destroy', 'pre', 'post'];\nvar h_1 = require(\"./h\");\nexports.h = h_1.h;\nvar thunk_1 = require(\"./thunk\");\nexports.thunk = thunk_1.thunk;\nfunction init(modules, domApi) {\n    var i, j, cbs = {};\n    var api = domApi !== undefined ? domApi : htmldomapi_1.default;\n    for (i = 0; i < hooks.length; ++i) {\n        cbs[hooks[i]] = [];\n        for (j = 0; j < modules.length; ++j) {\n            var hook = modules[j][hooks[i]];\n            if (hook !== undefined) {\n                cbs[hooks[i]].push(hook);\n            }\n        }\n    }\n    function emptyNodeAt(elm) {\n        var id = elm.id ? '#' + elm.id : '';\n        var c = elm.className ? '.' + elm.className.split(' ').join('.') : '';\n        return vnode_1.default(api.tagName(elm).toLowerCase() + id + c, {}, [], undefined, elm);\n    }\n    function createRmCb(childElm, listeners) {\n        return function rmCb() {\n            if (--listeners === 0) {\n                var parent_1 = api.parentNode(childElm);\n                api.removeChild(parent_1, childElm);\n            }\n        };\n    }\n    function createElm(vnode, insertedVnodeQueue) {\n        var i, data = vnode.data;\n        if (data !== undefined) {\n            if (isDef(i = data.hook) && isDef(i = i.init)) {\n                i(vnode);\n                data = vnode.data;\n            }\n        }\n        var children = vnode.children, sel = vnode.sel;\n        if (sel === '!') {\n            if (isUndef(vnode.text)) {\n                vnode.text = '';\n            }\n            vnode.elm = api.createComment(vnode.text);\n        }\n        else if (sel !== undefined) {\n            // Parse selector\n            var hashIdx = sel.indexOf('#');\n            var dotIdx = sel.indexOf('.', hashIdx);\n            var hash = hashIdx > 0 ? hashIdx : sel.length;\n            var dot = dotIdx > 0 ? dotIdx : sel.length;\n            var tag = hashIdx !== -1 || dotIdx !== -1 ? sel.slice(0, Math.min(hash, dot)) : sel;\n            var elm = vnode.elm = isDef(data) && isDef(i = data.ns) ? api.createElementNS(i, tag)\n                : api.createElement(tag);\n            if (hash < dot)\n                elm.setAttribute('id', sel.slice(hash + 1, dot));\n            if (dotIdx > 0)\n                elm.setAttribute('class', sel.slice(dot + 1).replace(/\\./g, ' '));\n            for (i = 0; i < cbs.create.length; ++i)\n                cbs.create[i](emptyNode, vnode);\n            if (is.array(children)) {\n                for (i = 0; i < children.length; ++i) {\n                    var ch = children[i];\n                    if (ch != null) {\n                        api.appendChild(elm, createElm(ch, insertedVnodeQueue));\n                    }\n                }\n            }\n            else if (is.primitive(vnode.text)) {\n                api.appendChild(elm, api.createTextNode(vnode.text));\n            }\n            i = vnode.data.hook; // Reuse variable\n            if (isDef(i)) {\n                if (i.create)\n                    i.create(emptyNode, vnode);\n                if (i.insert)\n                    insertedVnodeQueue.push(vnode);\n            }\n        }\n        else {\n            vnode.elm = api.createTextNode(vnode.text);\n        }\n        return vnode.elm;\n    }\n    function addVnodes(parentElm, before, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n        for (; startIdx <= endIdx; ++startIdx) {\n            var ch = vnodes[startIdx];\n            if (ch != null) {\n                api.insertBefore(parentElm, createElm(ch, insertedVnodeQueue), before);\n            }\n        }\n    }\n    function invokeDestroyHook(vnode) {\n        var i, j, data = vnode.data;\n        if (data !== undefined) {\n            if (isDef(i = data.hook) && isDef(i = i.destroy))\n                i(vnode);\n            for (i = 0; i < cbs.destroy.length; ++i)\n                cbs.destroy[i](vnode);\n            if (vnode.children !== undefined) {\n                for (j = 0; j < vnode.children.length; ++j) {\n                    i = vnode.children[j];\n                    if (i != null && typeof i !== \"string\") {\n                        invokeDestroyHook(i);\n                    }\n                }\n            }\n        }\n    }\n    function removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n        for (; startIdx <= endIdx; ++startIdx) {\n            var i_1 = void 0, listeners = void 0, rm = void 0, ch = vnodes[startIdx];\n            if (ch != null) {\n                if (isDef(ch.sel)) {\n                    invokeDestroyHook(ch);\n                    listeners = cbs.remove.length + 1;\n                    rm = createRmCb(ch.elm, listeners);\n                    for (i_1 = 0; i_1 < cbs.remove.length; ++i_1)\n                        cbs.remove[i_1](ch, rm);\n                    if (isDef(i_1 = ch.data) && isDef(i_1 = i_1.hook) && isDef(i_1 = i_1.remove)) {\n                        i_1(ch, rm);\n                    }\n                    else {\n                        rm();\n                    }\n                }\n                else {\n                    api.removeChild(parentElm, ch.elm);\n                }\n            }\n        }\n    }\n    function updateChildren(parentElm, oldCh, newCh, insertedVnodeQueue) {\n        var oldStartIdx = 0, newStartIdx = 0;\n        var oldEndIdx = oldCh.length - 1;\n        var oldStartVnode = oldCh[0];\n        var oldEndVnode = oldCh[oldEndIdx];\n        var newEndIdx = newCh.length - 1;\n        var newStartVnode = newCh[0];\n        var newEndVnode = newCh[newEndIdx];\n        var oldKeyToIdx;\n        var idxInOld;\n        var elmToMove;\n        var before;\n        while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n            if (oldStartVnode == null) {\n                oldStartVnode = oldCh[++oldStartIdx]; // Vnode might have been moved left\n            }\n            else if (oldEndVnode == null) {\n                oldEndVnode = oldCh[--oldEndIdx];\n            }\n            else if (newStartVnode == null) {\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else if (newEndVnode == null) {\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldStartVnode, newStartVnode)) {\n                patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);\n                oldStartVnode = oldCh[++oldStartIdx];\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else if (sameVnode(oldEndVnode, newEndVnode)) {\n                patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);\n                oldEndVnode = oldCh[--oldEndIdx];\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldStartVnode, newEndVnode)) {\n                patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);\n                api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));\n                oldStartVnode = oldCh[++oldStartIdx];\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldEndVnode, newStartVnode)) {\n                patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);\n                api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n                oldEndVnode = oldCh[--oldEndIdx];\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else {\n                if (oldKeyToIdx === undefined) {\n                    oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n                }\n                idxInOld = oldKeyToIdx[newStartVnode.key];\n                if (isUndef(idxInOld)) {\n                    api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n                    newStartVnode = newCh[++newStartIdx];\n                }\n                else {\n                    elmToMove = oldCh[idxInOld];\n                    if (elmToMove.sel !== newStartVnode.sel) {\n                        api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n                    }\n                    else {\n                        patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);\n                        oldCh[idxInOld] = undefined;\n                        api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n                    }\n                    newStartVnode = newCh[++newStartIdx];\n                }\n            }\n        }\n        if (oldStartIdx > oldEndIdx) {\n            before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n            addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n        }\n        else if (newStartIdx > newEndIdx) {\n            removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n        }\n    }\n    function patchVnode(oldVnode, vnode, insertedVnodeQueue) {\n        var i, hook;\n        if (isDef(i = vnode.data) && isDef(hook = i.hook) && isDef(i = hook.prepatch)) {\n            i(oldVnode, vnode);\n        }\n        var elm = vnode.elm = oldVnode.elm;\n        var oldCh = oldVnode.children;\n        var ch = vnode.children;\n        if (oldVnode === vnode)\n            return;\n        if (vnode.data !== undefined) {\n            for (i = 0; i < cbs.update.length; ++i)\n                cbs.update[i](oldVnode, vnode);\n            i = vnode.data.hook;\n            if (isDef(i) && isDef(i = i.update))\n                i(oldVnode, vnode);\n        }\n        if (isUndef(vnode.text)) {\n            if (isDef(oldCh) && isDef(ch)) {\n                if (oldCh !== ch)\n                    updateChildren(elm, oldCh, ch, insertedVnodeQueue);\n            }\n            else if (isDef(ch)) {\n                if (isDef(oldVnode.text))\n                    api.setTextContent(elm, '');\n                addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n            }\n            else if (isDef(oldCh)) {\n                removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n            }\n            else if (isDef(oldVnode.text)) {\n                api.setTextContent(elm, '');\n            }\n        }\n        else if (oldVnode.text !== vnode.text) {\n            api.setTextContent(elm, vnode.text);\n        }\n        if (isDef(hook) && isDef(i = hook.postpatch)) {\n            i(oldVnode, vnode);\n        }\n    }\n    return function patch(oldVnode, vnode) {\n        var i, elm, parent;\n        var insertedVnodeQueue = [];\n        for (i = 0; i < cbs.pre.length; ++i)\n            cbs.pre[i]();\n        if (!isVnode(oldVnode)) {\n            oldVnode = emptyNodeAt(oldVnode);\n        }\n        if (sameVnode(oldVnode, vnode)) {\n            patchVnode(oldVnode, vnode, insertedVnodeQueue);\n        }\n        else {\n            elm = oldVnode.elm;\n            parent = api.parentNode(elm);\n            createElm(vnode, insertedVnodeQueue);\n            if (parent !== null) {\n                api.insertBefore(parent, vnode.elm, api.nextSibling(elm));\n                removeVnodes(parent, [oldVnode], 0, 0);\n            }\n        }\n        for (i = 0; i < insertedVnodeQueue.length; ++i) {\n            insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i]);\n        }\n        for (i = 0; i < cbs.post.length; ++i)\n            cbs.post[i]();\n        return vnode;\n    };\n}\nexports.init = init;\n//# sourceMappingURL=snabbdom.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/snabbdom.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Slows down animations towards the begin and the end.\n *\n * @param x the value between 0 (start of animation) and 1 (end of\n *     animation) linearly interpolated in time.\n * @returns {number} the eased value between 0 and 1\n */\nfunction easeInOut(x) {\n    if (x < 0.5)\n        return x * x * 2;\n    else\n        return 1 - (1 - x) * (1 - x) * 2;\n}\nexports.easeInOut = easeInOut;\n//# sourceMappingURL=easing.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/animations/easing.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar animation_frame_syncer_1 = require(\"../animations/animation-frame-syncer\");\nvar command_1 = require(\"./command\");\n/**\n * The implementation of the ICommandStack. Clients should not use this\n * class directly.\n *\n * The command stack holds the current model as the result of the current\n * promise. When a new command is executed/undone/redone, its execution is\n * chained using <code>Promise#then()</code> to the current Promise. This\n * way we can handle long running commands without blocking the current\n * thread.\n *\n * The command stack also does the special handling for special commands:\n *\n * System commands should be transparent to the user and as such be\n * automatically undone/redone with the next plain command. Additional care\n * must be taken that system commands that are executed after undo don't\n * break the correspondence between the topmost commands on the undo and\n * redo stacks.\n *\n * Hidden commands only tell the viewer to render a hidden model such that\n * its bounds can be extracted from the DOM and forwarded as separate actions.\n * Hidden commands should not leave any trace on the undo/redo/off stacks.\n *\n * Mergeable commands should be merged with their predecessor if possible,\n * such that e.g. multiple subsequent moves of the smae element can be undone\n * in one single step.\n */\nvar CommandStack = /** @class */ (function () {\n    function CommandStack(modelFactory, viewerProvider, logger, syncer, options) {\n        this.modelFactory = modelFactory;\n        this.viewerProvider = viewerProvider;\n        this.logger = logger;\n        this.syncer = syncer;\n        this.options = options;\n        this.undoStack = [];\n        this.redoStack = [];\n        /**\n         * System commands should be transparent to the user in undo/redo\n         * operations. When a system command is executed when the redo\n         * stack is not empty, it is pushed to offStack instead.\n         *\n         * On redo, all commands form this stack are undone such that the\n         * redo operation gets the exact same model as when it was executed\n         * first.\n         *\n         * On undo, all commands form this stack are undone as well as\n         * system ommands should be transparent to the user.\n         */\n        this.offStack = [];\n        this.currentPromise = Promise.resolve({\n            root: modelFactory.createRoot(smodel_factory_1.EMPTY_ROOT),\n            hiddenRoot: undefined,\n            popupRoot: undefined,\n            rootChanged: false,\n            hiddenRootChanged: false,\n            popupChanged: false\n        });\n    }\n    Object.defineProperty(CommandStack.prototype, \"currentModel\", {\n        get: function () {\n            return this.currentPromise.then(function (state) { return state.root; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CommandStack.prototype.executeAll = function (commands) {\n        var _this = this;\n        commands.forEach(function (command) {\n            _this.logger.log(_this, 'Executing', command);\n            _this.handleCommand(command, command.execute, _this.mergeOrPush);\n        });\n        return this.thenUpdate();\n    };\n    CommandStack.prototype.execute = function (command) {\n        this.logger.log(this, 'Executing', command);\n        this.handleCommand(command, command.execute, this.mergeOrPush);\n        return this.thenUpdate();\n    };\n    CommandStack.prototype.undo = function () {\n        var _this = this;\n        this.undoOffStackSystemCommands();\n        this.undoPreceedingSystemCommands();\n        var command = this.undoStack.pop();\n        if (command !== undefined) {\n            this.logger.log(this, 'Undoing', command);\n            this.handleCommand(command, command.undo, function (c, context) {\n                _this.redoStack.push(c);\n            });\n        }\n        return this.thenUpdate();\n    };\n    CommandStack.prototype.redo = function () {\n        var _this = this;\n        this.undoOffStackSystemCommands();\n        var command = this.redoStack.pop();\n        if (command !== undefined) {\n            this.logger.log(this, 'Redoing', command);\n            this.handleCommand(command, command.redo, function (c, context) {\n                _this.pushToUndoStack(c);\n            });\n        }\n        this.redoFollowingSystemCommands();\n        return this.thenUpdate();\n    };\n    /**\n     * Chains the current promise with another Promise that performs the\n     * given operation on the given command.\n     *\n     * @param beforeResolve a function that is called directly before\n     * resolving the Promise to return the new model. Usually puts the\n     * command on the appropriate stack.\n     */\n    CommandStack.prototype.handleCommand = function (command, operation, beforeResolve) {\n        var _this = this;\n        this.currentPromise = this.currentPromise.then(function (state) {\n            return new Promise(function (resolve, reject) {\n                var context = _this.createContext(state.root);\n                var newResult;\n                try {\n                    newResult = operation.call(command, context);\n                }\n                catch (error) {\n                    _this.logger.error(_this, \"Failed to execute command:\", error);\n                    newResult = state.root;\n                }\n                if (command instanceof command_1.HiddenCommand) {\n                    resolve(__assign({}, state, {\n                        hiddenRoot: newResult,\n                        hiddenRootChanged: true\n                    }));\n                }\n                else if (command instanceof command_1.PopupCommand) {\n                    resolve(__assign({}, state, {\n                        popupRoot: newResult,\n                        popupChanged: true\n                    }));\n                }\n                else if (newResult instanceof Promise) {\n                    newResult.then(function (newModel) {\n                        beforeResolve.call(_this, command, context);\n                        resolve(__assign({}, state, {\n                            root: newModel,\n                            rootChanged: true\n                        }));\n                    });\n                }\n                else {\n                    beforeResolve.call(_this, command, context);\n                    resolve(__assign({}, state, {\n                        root: newResult,\n                        rootChanged: true\n                    }));\n                }\n            });\n        });\n    };\n    CommandStack.prototype.pushToUndoStack = function (command) {\n        this.undoStack.push(command);\n        if (this.options.undoHistoryLimit >= 0 && this.undoStack.length > this.options.undoHistoryLimit)\n            this.undoStack.splice(0, this.undoStack.length - this.options.undoHistoryLimit);\n    };\n    /**\n     * Notifies the Viewer to render the new model and/or the new hidden model\n     * and returns a Promise for the new model.\n     */\n    CommandStack.prototype.thenUpdate = function () {\n        var _this = this;\n        this.currentPromise = this.currentPromise.then(function (state) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(state.hiddenRootChanged && state.hiddenRoot !== undefined)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.updateHidden(state.hiddenRoot)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        if (!state.rootChanged) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.update(state.root)];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4:\n                        if (!(state.popupChanged && state.popupRoot !== undefined)) return [3 /*break*/, 6];\n                        return [4 /*yield*/, this.updatePopup(state.popupRoot)];\n                    case 5:\n                        _a.sent();\n                        _a.label = 6;\n                    case 6: return [2 /*return*/, {\n                            root: state.root,\n                            hiddenRoot: undefined,\n                            popupRoot: undefined,\n                            rootChanged: false,\n                            hiddenRootChanged: false,\n                            popupChanged: false\n                        }];\n                }\n            });\n        }); });\n        return this.currentModel;\n    };\n    /**\n     * Notify the <code>Viewer</code> that the model has changed.\n     */\n    CommandStack.prototype.update = function (model) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(this.viewer === undefined)) return [3 /*break*/, 2];\n                        _a = this;\n                        return [4 /*yield*/, this.viewerProvider()];\n                    case 1:\n                        _a.viewer = _b.sent();\n                        _b.label = 2;\n                    case 2:\n                        this.viewer.update(model);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Notify the <code>Viewer</code> that the hidden model has changed.\n     */\n    CommandStack.prototype.updateHidden = function (model) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(this.viewer === undefined)) return [3 /*break*/, 2];\n                        _a = this;\n                        return [4 /*yield*/, this.viewerProvider()];\n                    case 1:\n                        _a.viewer = _b.sent();\n                        _b.label = 2;\n                    case 2:\n                        this.viewer.updateHidden(model);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Notify the <code>Viewer</code> that the model has changed.\n     */\n    CommandStack.prototype.updatePopup = function (model) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(this.viewer === undefined)) return [3 /*break*/, 2];\n                        _a = this;\n                        return [4 /*yield*/, this.viewerProvider()];\n                    case 1:\n                        _a.viewer = _b.sent();\n                        _b.label = 2;\n                    case 2:\n                        this.viewer.updatePopup(model);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Handling of commands after their execution.\n     *\n     * Hidden commands are not pushed to any stack.\n     *\n     * System commands are pushed to the <code>offStack</code> when the redo\n     * stack is not empty, allowing to undo the before a redo to keep the chain\n     * of commands consistent.\n     *\n     * Mergable commands are merged if possible.\n     */\n    CommandStack.prototype.mergeOrPush = function (command, context) {\n        var _this = this;\n        if (command instanceof command_1.HiddenCommand)\n            return;\n        if (command instanceof command_1.SystemCommand && this.redoStack.length > 0) {\n            this.offStack.push(command);\n        }\n        else {\n            this.offStack.forEach(function (c) { return _this.undoStack.push(c); });\n            this.offStack = [];\n            this.redoStack = [];\n            if (this.undoStack.length > 0) {\n                var lastCommand = this.undoStack[this.undoStack.length - 1];\n                if (lastCommand instanceof command_1.MergeableCommand && lastCommand.merge(command, context))\n                    return;\n            }\n            this.pushToUndoStack(command);\n        }\n    };\n    /**\n     * Reverts all system commands on the offStack.\n     */\n    CommandStack.prototype.undoOffStackSystemCommands = function () {\n        var command = this.offStack.pop();\n        while (command !== undefined) {\n            this.logger.log(this, 'Undoing off-stack', command);\n            this.handleCommand(command, command.undo, function () { });\n            command = this.offStack.pop();\n        }\n    };\n    /**\n     * System commands should be transparent to the user, so this method\n     * is called from <code>undo()</code> to revert all system commands\n     * at the top of the undoStack.\n     */\n    CommandStack.prototype.undoPreceedingSystemCommands = function () {\n        var _this = this;\n        var command = this.undoStack[this.undoStack.length - 1];\n        while (command !== undefined && command instanceof command_1.SystemCommand) {\n            this.undoStack.pop();\n            this.logger.log(this, 'Undoing', command);\n            this.handleCommand(command, command.undo, function (c, context) {\n                _this.redoStack.push(c);\n            });\n            command = this.undoStack[this.undoStack.length - 1];\n        }\n    };\n    /**\n     * System commands should be transparent to the user, so this method\n     * is called from <code>redo()</code> to re-execute all system commands\n     * at the top of the redoStack.\n     */\n    CommandStack.prototype.redoFollowingSystemCommands = function () {\n        var _this = this;\n        var command = this.redoStack[this.redoStack.length - 1];\n        while (command !== undefined && command instanceof command_1.SystemCommand) {\n            this.redoStack.pop();\n            this.logger.log(this, 'Redoing ', command);\n            this.handleCommand(command, command.redo, function (c, context) {\n                _this.pushToUndoStack(c);\n            });\n            command = this.redoStack[this.redoStack.length - 1];\n        }\n    };\n    /**\n     * Assembles the context object that is passed to the commands execution method.\n     */\n    CommandStack.prototype.createContext = function (currentModel) {\n        return {\n            root: currentModel,\n            modelChanged: this,\n            modelFactory: this.modelFactory,\n            duration: this.options.defaultDuration,\n            logger: this.logger,\n            syncer: this.syncer\n        };\n    };\n    CommandStack = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IModelFactory)),\n        __param(1, inversify_1.inject(types_1.TYPES.IViewerProvider)),\n        __param(2, inversify_1.inject(types_1.TYPES.ILogger)),\n        __param(3, inversify_1.inject(types_1.TYPES.AnimationFrameSyncer)),\n        __param(4, inversify_1.inject(types_1.TYPES.CommandStackOptions)),\n        __metadata(\"design:paramtypes\", [Object, Function, Object, animation_frame_syncer_1.AnimationFrameSyncer, Object])\n    ], CommandStack);\n    return CommandStack;\n}());\nexports.CommandStack = CommandStack;\n//# sourceMappingURL=command-stack.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/commands/command-stack.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom_1 = require(\"snabbdom\");\n/**\n * An view that avoids calculation and patching of VNodes unless some model properties have changed.\n * Based on snabbdom's thunks.\n */\nvar ThunkView = /** @class */ (function () {\n    function ThunkView() {\n    }\n    ThunkView.prototype.render = function (model, context) {\n        var _this = this;\n        return snabbdom_1.h(this.selector(model), {\n            key: model.id,\n            hook: {\n                init: this.init.bind(this),\n                prepatch: this.prepatch.bind(this)\n            },\n            fn: function () { return _this.renderAndDecorate(model, context); },\n            args: this.watchedArgs(model),\n            thunk: true\n        });\n    };\n    ThunkView.prototype.renderAndDecorate = function (model, context) {\n        var vnode = this.doRender(model, context);\n        context.decorate(vnode, model);\n        return vnode;\n    };\n    ThunkView.prototype.copyToThunk = function (vnode, thunk) {\n        thunk.elm = vnode.elm;\n        vnode.data.fn = thunk.data.fn;\n        vnode.data.args = thunk.data.args;\n        thunk.data = vnode.data;\n        thunk.children = vnode.children;\n        thunk.text = vnode.text;\n        thunk.elm = vnode.elm;\n    };\n    ThunkView.prototype.init = function (thunk) {\n        var cur = thunk.data;\n        var vnode = cur.fn.apply(undefined, cur.args);\n        this.copyToThunk(vnode, thunk);\n    };\n    ThunkView.prototype.prepatch = function (oldVnode, thunk) {\n        var old = oldVnode.data, cur = thunk.data;\n        if (!this.equals(old.args, cur.args))\n            this.copyToThunk(cur.fn.apply(undefined, cur.args), thunk);\n        else\n            this.copyToThunk(oldVnode, thunk);\n    };\n    ThunkView.prototype.equals = function (oldArg, newArg) {\n        if (Array.isArray(oldArg) && Array.isArray(newArg)) {\n            if (oldArg.length !== newArg.length)\n                return false;\n            for (var i = 0; i < newArg.length; ++i) {\n                if (!this.equals(oldArg[i], newArg[i]))\n                    return false;\n            }\n        }\n        else if (typeof oldArg === 'object' && typeof newArg === 'object') {\n            if (Object.keys(oldArg).length !== Object.keys(newArg).length)\n                return false;\n            for (var key in oldArg) {\n                if (key !== 'parent' && key !== 'root' && (!(key in newArg) || !this.equals(oldArg[key], newArg[key])))\n                    return false;\n            }\n        }\n        else if (oldArg !== newArg) {\n            return false;\n        }\n        return true;\n    };\n    return ThunkView;\n}());\nexports.ThunkView = ThunkView;\nfunction isThunk(vnode) {\n    return 'thunk' in vnode;\n}\nexports.isThunk = isThunk;\n//# sourceMappingURL=thunk-view.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/thunk-view.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom = require(\"snabbdom-jsx\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar registry_1 = require(\"../../utils/registry\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar JSX = { createElement: snabbdom.svg };\n/**\n * Allows to look up the IView for a given SModelElement based on its type.\n */\nvar ViewRegistry = /** @class */ (function (_super) {\n    __extends(ViewRegistry, _super);\n    function ViewRegistry(registrations) {\n        var _this = _super.call(this) || this;\n        _this.registerDefaults();\n        registrations.forEach(function (registration) { return _this.register(registration.type, registration.constr); });\n        return _this;\n    }\n    ViewRegistry.prototype.registerDefaults = function () {\n        this.register(smodel_factory_1.EMPTY_ROOT.type, EmptyView);\n    };\n    ViewRegistry.prototype.missing = function (key) {\n        return new MissingView();\n    };\n    ViewRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.ViewRegistration)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], ViewRegistry);\n    return ViewRegistry;\n}(registry_1.ProviderRegistry));\nexports.ViewRegistry = ViewRegistry;\n/**\n * Utility function to register model and view constructors for a model element type.\n */\nfunction configureModelElement(context, type, modelConstr, viewConstr) {\n    context.bind(types_1.TYPES.SModelElementRegistration).toConstantValue({\n        type: type,\n        constr: modelConstr\n    });\n    context.bind(types_1.TYPES.ViewRegistration).toConstantValue({\n        type: type,\n        constr: viewConstr\n    });\n}\nexports.configureModelElement = configureModelElement;\n/**\n * This view is used when the model is the EMPTY_ROOT.\n */\nvar EmptyView = /** @class */ (function () {\n    function EmptyView() {\n    }\n    EmptyView.prototype.render = function (model, context) {\n        return JSX.createElement(\"svg\", { \"class-sprotty-empty\": true });\n    };\n    return EmptyView;\n}());\nexports.EmptyView = EmptyView;\n/**\n * This view is used when no view has been registered for a model element type.\n */\nvar MissingView = /** @class */ (function () {\n    function MissingView() {\n    }\n    MissingView.prototype.render = function (model, context) {\n        var position = model.position || geometry_1.ORIGIN_POINT;\n        return JSX.createElement(\"text\", { \"class-sprotty-missing\": true, x: position.x, y: position.y },\n            \"?\",\n            model.id,\n            \"?\");\n    };\n    return MissingView;\n}());\nexports.MissingView = MissingView;\n//# sourceMappingURL=view.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/view.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar animation_frame_syncer_1 = require(\"../animations/animation-frame-syncer\");\n/**\n * Updating the view is rather expensive, and it doesn't make sense to calculate\n * more then one update per animation (rendering) frame. So this class batches\n * all incoming model changes and only renders the last one when the next animation\n * frame comes.\n */\nvar ViewerCache = /** @class */ (function () {\n    function ViewerCache(delegate, syncer) {\n        this.delegate = delegate;\n        this.syncer = syncer;\n    }\n    ViewerCache.prototype.isCacheEmpty = function () {\n        return this.cachedModelRoot === undefined && this.cachedHiddenModelRoot === undefined &&\n            this.cachedPopup === undefined;\n    };\n    ViewerCache.prototype.updatePopup = function (model) {\n        var isCacheEmpty = this.isCacheEmpty();\n        this.cachedPopup = model;\n        if (isCacheEmpty)\n            this.scheduleUpdate();\n    };\n    ViewerCache.prototype.update = function (model) {\n        var isCacheEmpty = this.isCacheEmpty();\n        this.cachedModelRoot = model;\n        if (isCacheEmpty)\n            this.scheduleUpdate();\n    };\n    ViewerCache.prototype.updateHidden = function (hiddenModel) {\n        var isCacheEmpty = this.isCacheEmpty();\n        this.cachedHiddenModelRoot = hiddenModel;\n        if (isCacheEmpty)\n            this.scheduleUpdate();\n    };\n    ViewerCache.prototype.scheduleUpdate = function () {\n        var _this = this;\n        this.syncer.onEndOfNextFrame(function () {\n            if (_this.cachedHiddenModelRoot) {\n                var nextHiddenModelRoot = _this.cachedHiddenModelRoot;\n                _this.delegate.updateHidden(nextHiddenModelRoot);\n                _this.cachedHiddenModelRoot = undefined;\n            }\n            if (_this.cachedModelRoot) {\n                var nextModelRoot = _this.cachedModelRoot;\n                _this.delegate.update(nextModelRoot);\n                _this.cachedModelRoot = undefined;\n            }\n            if (_this.cachedPopup) {\n                var nextModelRoot = _this.cachedPopup;\n                _this.delegate.updatePopup(nextModelRoot);\n                _this.cachedPopup = undefined;\n            }\n        });\n    };\n    ViewerCache = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IViewer)), __param(0, inversify_1.named('delegate')),\n        __param(1, inversify_1.inject(types_1.TYPES.AnimationFrameSyncer)),\n        __metadata(\"design:paramtypes\", [Object, animation_frame_syncer_1.AnimationFrameSyncer])\n    ], ViewerCache);\n    return ViewerCache;\n}());\nexports.ViewerCache = ViewerCache;\n//# sourceMappingURL=viewer-cache.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/viewer-cache.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../types\");\nexports.defaultViewerOptions = function () { return ({\n    baseDiv: 'sprotty',\n    baseClass: 'sprotty',\n    hiddenDiv: 'sprotty-hidden',\n    hiddenClass: 'sprotty-hidden',\n    popupDiv: 'sprotty-popup',\n    popupClass: 'sprotty-popup',\n    popupClosedClass: 'sprotty-popup-closed',\n    needsClientLayout: true,\n    needsServerLayout: false,\n    popupOpenDelay: 1000,\n    popupCloseDelay: 300\n}); };\n/**\n * Utility function to partially set viewer options. Default values (from `defaultViewerOptions`) are used for\n * options that are not specified.\n */\nfunction configureViewerOptions(context, options) {\n    var opt = __assign({}, exports.defaultViewerOptions(), options);\n    if (context.isBound(types_1.TYPES.ViewerOptions))\n        context.rebind(types_1.TYPES.ViewerOptions).toConstantValue(opt);\n    else\n        context.bind(types_1.TYPES.ViewerOptions).toConstantValue(opt);\n}\nexports.configureViewerOptions = configureViewerOptions;\n/**\n * Utility function to partially override the currently configured viewer options in a DI container.\n */\nfunction overrideViewerOptions(container, options) {\n    var opt = container.get(types_1.TYPES.ViewerOptions);\n    for (var p in options) {\n        if (options.hasOwnProperty(p))\n            opt[p] = options[p];\n    }\n    return opt;\n}\nexports.overrideViewerOptions = overrideViewerOptions;\n//# sourceMappingURL=viewer-options.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/viewer-options.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom = require(\"snabbdom-jsx\");\nvar snabbdom_1 = require(\"snabbdom\");\nvar props_1 = require(\"snabbdom/modules/props\");\nvar attributes_1 = require(\"snabbdom/modules/attributes\");\nvar style_1 = require(\"snabbdom/modules/style\");\nvar eventlisteners_1 = require(\"snabbdom/modules/eventlisteners\");\nvar class_1 = require(\"snabbdom/modules/class\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar initialize_canvas_1 = require(\"../features/initialize-canvas\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar thunk_view_1 = require(\"./thunk-view\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar JSX = { createElement: snabbdom.html }; // must be html here, as we're creating a div\nvar ModelRenderer = /** @class */ (function () {\n    function ModelRenderer(viewRegistry, decorators) {\n        this.viewRegistry = viewRegistry;\n        this.decorators = decorators;\n    }\n    ModelRenderer.prototype.decorate = function (vnode, element) {\n        if (thunk_view_1.isThunk(vnode))\n            return vnode;\n        return this.decorators.reduce(function (n, decorator) { return decorator.decorate(n, element); }, vnode);\n    };\n    ModelRenderer.prototype.renderElement = function (element, args) {\n        var vNode = this.viewRegistry.get(element.type, undefined).render(element, this, args);\n        return this.decorate(vNode, element);\n    };\n    ModelRenderer.prototype.renderChildren = function (element, args) {\n        var _this = this;\n        return element.children.map(function (child) { return _this.renderElement(child, args); });\n    };\n    ModelRenderer.prototype.postUpdate = function () {\n        this.decorators.forEach(function (decorator) { return decorator.postUpdate(); });\n    };\n    return ModelRenderer;\n}());\nexports.ModelRenderer = ModelRenderer;\n/**\n * The component that turns the model into an SVG DOM.\n * Uses a VDOM based on snabbdom.js for performance.\n */\nvar Viewer = /** @class */ (function () {\n    function Viewer(modelRendererFactory, decorators, hiddenDecorators, popupDecorators, options, logger, actiondispatcher) {\n        var _this = this;\n        this.decorators = decorators;\n        this.hiddenDecorators = hiddenDecorators;\n        this.popupDecorators = popupDecorators;\n        this.options = options;\n        this.logger = logger;\n        this.actiondispatcher = actiondispatcher;\n        this.onWindowResize = function (vdom) {\n            var baseDiv = document.getElementById(_this.options.baseDiv);\n            if (baseDiv !== null) {\n                var newBounds = _this.getBoundsInPage(baseDiv);\n                _this.actiondispatcher.dispatch(new initialize_canvas_1.InitializeCanvasBoundsAction(newBounds));\n            }\n        };\n        this.patcher = this.createPatcher();\n        this.renderer = modelRendererFactory(decorators);\n        this.hiddenRenderer = modelRendererFactory(hiddenDecorators);\n        this.popupRenderer = modelRendererFactory(popupDecorators);\n    }\n    Viewer.prototype.createModules = function () {\n        return [\n            props_1.propsModule,\n            attributes_1.attributesModule,\n            class_1.classModule,\n            style_1.styleModule,\n            eventlisteners_1.eventListenersModule\n        ];\n    };\n    Viewer.prototype.createPatcher = function () {\n        return snabbdom_1.init(this.createModules());\n    };\n    Viewer.prototype.getBoundsInPage = function (element) {\n        var bounds = element.getBoundingClientRect();\n        var scroll = typeof window !== 'undefined' ? { x: window.scrollX, y: window.scrollY } : geometry_1.ORIGIN_POINT;\n        return {\n            x: bounds.left + scroll.x,\n            y: bounds.top + scroll.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    };\n    Viewer.prototype.update = function (model) {\n        var _this = this;\n        this.logger.log(this, 'rendering', model);\n        var newVDOM = JSX.createElement(\"div\", { id: this.options.baseDiv }, this.renderer.renderElement(model));\n        if (this.lastVDOM !== undefined) {\n            var hadFocus = this.hasFocus();\n            vnode_utils_1.copyClassesFromVNode(this.lastVDOM, newVDOM);\n            this.lastVDOM = this.patcher.call(this, this.lastVDOM, newVDOM);\n            this.restoreFocus(hadFocus);\n        }\n        else if (typeof document !== 'undefined') {\n            var placeholder = document.getElementById(this.options.baseDiv);\n            if (placeholder !== null) {\n                if (typeof window !== 'undefined') {\n                    window.addEventListener('resize', function () {\n                        _this.onWindowResize(newVDOM);\n                    });\n                }\n                vnode_utils_1.copyClassesFromElement(placeholder, newVDOM);\n                vnode_utils_1.setClass(newVDOM, this.options.baseClass, true);\n                this.lastVDOM = this.patcher.call(this, placeholder, newVDOM);\n            }\n            else {\n                this.logger.error(this, 'element not in DOM:', this.options.baseDiv);\n            }\n        }\n        this.renderer.postUpdate();\n    };\n    Viewer.prototype.hasFocus = function () {\n        if (typeof document !== 'undefined' && document.activeElement && this.lastVDOM.children && this.lastVDOM.children.length > 0) {\n            var lastRootVNode = this.lastVDOM.children[0];\n            if (typeof lastRootVNode === 'object') {\n                var lastElement = lastRootVNode.elm;\n                return document.activeElement === lastElement;\n            }\n        }\n        return false;\n    };\n    Viewer.prototype.restoreFocus = function (focus) {\n        if (focus && this.lastVDOM.children && this.lastVDOM.children.length > 0) {\n            var lastRootVNode = this.lastVDOM.children[0];\n            if (typeof lastRootVNode === 'object') {\n                var lastElement = lastRootVNode.elm;\n                if (lastElement && typeof lastElement.focus === 'function')\n                    lastElement.focus();\n            }\n        }\n    };\n    Viewer.prototype.updateHidden = function (hiddenModel) {\n        this.logger.log(this, 'rendering hidden');\n        var newVDOM;\n        if (hiddenModel.type === smodel_factory_1.EMPTY_ROOT.type) {\n            newVDOM = JSX.createElement(\"div\", { id: this.options.hiddenDiv });\n        }\n        else {\n            var hiddenVNode = this.hiddenRenderer.renderElement(hiddenModel);\n            vnode_utils_1.setAttr(hiddenVNode, 'opacity', 0);\n            newVDOM = JSX.createElement(\"div\", { id: this.options.hiddenDiv }, hiddenVNode);\n        }\n        if (this.lastHiddenVDOM !== undefined) {\n            vnode_utils_1.copyClassesFromVNode(this.lastHiddenVDOM, newVDOM);\n            this.lastHiddenVDOM = this.patcher.call(this, this.lastHiddenVDOM, newVDOM);\n        }\n        else {\n            var placeholder = document.getElementById(this.options.hiddenDiv);\n            if (placeholder === null) {\n                placeholder = document.createElement(\"div\");\n                document.body.appendChild(placeholder);\n            }\n            else {\n                vnode_utils_1.copyClassesFromElement(placeholder, newVDOM);\n            }\n            vnode_utils_1.setClass(newVDOM, this.options.baseClass, true);\n            vnode_utils_1.setClass(newVDOM, this.options.hiddenClass, true);\n            this.lastHiddenVDOM = this.patcher.call(this, placeholder, newVDOM);\n        }\n        this.hiddenRenderer.postUpdate();\n    };\n    Viewer.prototype.updatePopup = function (model) {\n        this.logger.log(this, 'rendering popup', model);\n        var popupClosed = model.type === smodel_factory_1.EMPTY_ROOT.type;\n        var newVDOM;\n        if (popupClosed) {\n            newVDOM = JSX.createElement(\"div\", { id: this.options.popupDiv });\n        }\n        else {\n            var position = model.canvasBounds;\n            var inlineStyle = {\n                top: position.y + 'px',\n                left: position.x + 'px'\n            };\n            newVDOM = JSX.createElement(\"div\", { id: this.options.popupDiv, style: inlineStyle }, this.popupRenderer.renderElement(model));\n        }\n        if (this.lastPopupVDOM !== undefined) {\n            vnode_utils_1.copyClassesFromVNode(this.lastPopupVDOM, newVDOM);\n            vnode_utils_1.setClass(newVDOM, this.options.popupClosedClass, popupClosed);\n            this.lastPopupVDOM = this.patcher.call(this, this.lastPopupVDOM, newVDOM);\n        }\n        else if (typeof document !== 'undefined') {\n            var placeholder = document.getElementById(this.options.popupDiv);\n            if (placeholder === null) {\n                placeholder = document.createElement(\"div\");\n                document.body.appendChild(placeholder);\n            }\n            else {\n                vnode_utils_1.copyClassesFromElement(placeholder, newVDOM);\n            }\n            vnode_utils_1.setClass(newVDOM, this.options.popupClass, true);\n            vnode_utils_1.setClass(newVDOM, this.options.popupClosedClass, popupClosed);\n            this.lastPopupVDOM = this.patcher.call(this, placeholder, newVDOM);\n        }\n        this.popupRenderer.postUpdate();\n    };\n    Viewer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ModelRendererFactory)),\n        __param(1, inversify_1.multiInject(types_1.TYPES.IVNodeDecorator)), __param(1, inversify_1.optional()),\n        __param(2, inversify_1.multiInject(types_1.TYPES.HiddenVNodeDecorator)), __param(2, inversify_1.optional()),\n        __param(3, inversify_1.multiInject(types_1.TYPES.PopupVNodeDecorator)), __param(3, inversify_1.optional()),\n        __param(4, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __param(5, inversify_1.inject(types_1.TYPES.ILogger)),\n        __param(6, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __metadata(\"design:paramtypes\", [Function, Array, Array, Array, Object, Object, Object])\n    ], Viewer);\n    return Viewer;\n}());\nexports.Viewer = Viewer;\n//# sourceMappingURL=viewer.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/viewer.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar FocusFixDecorator = /** @class */ (function () {\n    function FocusFixDecorator() {\n    }\n    FocusFixDecorator_1 = FocusFixDecorator;\n    FocusFixDecorator.prototype.decorate = function (vnode, element) {\n        if (vnode.sel && vnode.sel.startsWith('svg'))\n            // allows to set focus in Firefox\n            vnode_utils_1.setAttr(vnode, 'tabindex', ++FocusFixDecorator_1.tabIndex);\n        return vnode;\n    };\n    FocusFixDecorator.prototype.postUpdate = function () {\n    };\n    FocusFixDecorator.tabIndex = 1000;\n    FocusFixDecorator = FocusFixDecorator_1 = __decorate([\n        inversify_1.injectable()\n    ], FocusFixDecorator);\n    return FocusFixDecorator;\n    var FocusFixDecorator_1;\n}());\nexports.FocusFixDecorator = FocusFixDecorator;\n//# sourceMappingURL=vnode-decorators.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/vnode-decorators.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar abstract_layout_1 = require(\"./abstract-layout\");\n/**\n * Layouts children of a container in horizontal (left->right) direction.\n */\nvar HBoxLayouter = /** @class */ (function (_super) {\n    __extends(HBoxLayouter, _super);\n    function HBoxLayouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HBoxLayouter.prototype.getChildrenSize = function (container, containerOptions, layouter) {\n        var maxWidth = 0;\n        var maxHeight = -1;\n        var isFirst = true;\n        container.children.forEach(function (child) {\n            var bounds = layouter.getBoundsData(child).bounds;\n            if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                if (isFirst)\n                    isFirst = false;\n                else\n                    maxWidth += containerOptions.hGap;\n                maxWidth += bounds.width;\n                maxHeight = Math.max(maxHeight, bounds.height);\n            }\n        });\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    };\n    HBoxLayouter.prototype.layoutChild = function (child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight) {\n        var dy = this.getDy(childOptions.vAlign, bounds, maxHeight);\n        boundsData.bounds = {\n            x: currentOffset.x + child.bounds.x - bounds.x,\n            y: containerOptions.paddingTop + child.bounds.y - bounds.y + dy,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return {\n            x: currentOffset.x + bounds.width + containerOptions.hGap,\n            y: currentOffset.y\n        };\n    };\n    HBoxLayouter.prototype.getDefaultLayoutOptions = function () {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            hGap: 1,\n            vAlign: 'center'\n        };\n    };\n    HBoxLayouter.prototype.spread = function (a, b) {\n        return __assign({}, a, b);\n    };\n    HBoxLayouter.KIND = 'hbox';\n    return HBoxLayouter;\n}(abstract_layout_1.AbstractLayout));\nexports.HBoxLayouter = HBoxLayouter;\n//# sourceMappingURL=hbox-layout.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/hbox-layout.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar abstract_layout_1 = require(\"./abstract-layout\");\nvar StackLayouter = /** @class */ (function (_super) {\n    __extends(StackLayouter, _super);\n    function StackLayouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StackLayouter.prototype.getChildrenSize = function (container, options, layouter) {\n        var maxWidth = -1;\n        var maxHeight = -1;\n        container.children.forEach(function (child) {\n            var bounds = layouter.getBoundsData(child).bounds;\n            if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                maxWidth = Math.max(maxWidth, bounds.width);\n                maxHeight = Math.max(maxHeight, bounds.height);\n            }\n        });\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    };\n    StackLayouter.prototype.layoutChild = function (child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight) {\n        var dx = this.getDx(childOptions.hAlign, bounds, maxWidth);\n        var dy = this.getDy(childOptions.vAlign, bounds, maxHeight);\n        boundsData.bounds = {\n            x: containerOptions.paddingLeft + child.bounds.x - bounds.x + dx,\n            y: containerOptions.paddingTop + child.bounds.y - bounds.y + dy,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return currentOffset;\n    };\n    StackLayouter.prototype.getDefaultLayoutOptions = function () {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            hAlign: 'center',\n            vAlign: 'center'\n        };\n    };\n    StackLayouter.prototype.spread = function (a, b) {\n        return __assign({}, a, b);\n    };\n    StackLayouter.KIND = 'stack';\n    return StackLayouter;\n}(abstract_layout_1.AbstractLayout));\nexports.StackLayouter = StackLayouter;\n//# sourceMappingURL=stack-layout.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/stack-layout.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar abstract_layout_1 = require(\"./abstract-layout\");\n/**\n * Layouts children of a container in vertical (top->bottom) direction.\n */\nvar VBoxLayouter = /** @class */ (function (_super) {\n    __extends(VBoxLayouter, _super);\n    function VBoxLayouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    VBoxLayouter.prototype.getChildrenSize = function (container, containerOptions, layouter) {\n        var maxWidth = -1;\n        var maxHeight = 0;\n        var isFirst = true;\n        container.children.forEach(function (child) {\n            var bounds = layouter.getBoundsData(child).bounds;\n            if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                maxHeight += bounds.height;\n                if (isFirst)\n                    isFirst = false;\n                else\n                    maxHeight += containerOptions.vGap;\n                maxWidth = Math.max(maxWidth, bounds.width);\n            }\n        });\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    };\n    VBoxLayouter.prototype.layoutChild = function (child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight) {\n        var dx = this.getDx(childOptions.hAlign, bounds, maxWidth);\n        boundsData.bounds = {\n            x: containerOptions.paddingLeft + child.bounds.x - bounds.x + dx,\n            y: currentOffset.y + child.bounds.y - bounds.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return {\n            x: currentOffset.x,\n            y: currentOffset.y + bounds.height + containerOptions.vGap\n        };\n    };\n    VBoxLayouter.prototype.getDefaultLayoutOptions = function () {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            vGap: 1,\n            hAlign: 'center'\n        };\n    };\n    VBoxLayouter.prototype.spread = function (a, b) {\n        return __assign({}, a, b);\n    };\n    VBoxLayouter.KIND = 'vbox';\n    return VBoxLayouter;\n}(abstract_layout_1.AbstractLayout));\nexports.VBoxLayouter = VBoxLayouter;\n//# sourceMappingURL=vbox-layout.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/vbox-layout.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_1 = require(\"../../base/commands/command\");\nvar model_1 = require(\"../select/model\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar model_2 = require(\"./model\");\nvar svg_exporter_1 = require(\"./svg-exporter\");\nvar smodel_factory_1 = require(\"../../base/model/smodel-factory\");\nvar model_3 = require(\"../viewport/model\");\nvar model_4 = require(\"../hover/model\");\nvar types_1 = require(\"../../base/types\");\nvar ExportSvgKeyListener = /** @class */ (function (_super) {\n    __extends(ExportSvgKeyListener, _super);\n    function ExportSvgKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ExportSvgKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyE', 'ctrlCmd', 'shift'))\n            return [new RequestExportSvgAction()];\n        else\n            return [];\n    };\n    ExportSvgKeyListener = __decorate([\n        inversify_1.injectable()\n    ], ExportSvgKeyListener);\n    return ExportSvgKeyListener;\n}(key_tool_1.KeyListener));\nexports.ExportSvgKeyListener = ExportSvgKeyListener;\nvar RequestExportSvgAction = /** @class */ (function () {\n    function RequestExportSvgAction() {\n        this.kind = ExportSvgCommand.KIND;\n    }\n    return RequestExportSvgAction;\n}());\nexports.RequestExportSvgAction = RequestExportSvgAction;\nvar ExportSvgCommand = /** @class */ (function (_super) {\n    __extends(ExportSvgCommand, _super);\n    function ExportSvgCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ExportSvgCommand.prototype.execute = function (context) {\n        if (model_2.isExportable(context.root)) {\n            var root = context.modelFactory.createRoot(context.modelFactory.createSchema(context.root));\n            if (model_2.isExportable(root)) {\n                root.export = true;\n                if (model_3.isViewport(root)) {\n                    root.zoom = 1;\n                    root.scroll = {\n                        x: 0,\n                        y: 0\n                    };\n                }\n                root.index.all().forEach(function (element) {\n                    if (model_1.isSelectable(element) && element.selected)\n                        element.selected = false;\n                    if (model_4.isHoverable(element) && element.hoverFeedback)\n                        element.hoverFeedback = false;\n                });\n                return root;\n            }\n        }\n        return context.modelFactory.createRoot(smodel_factory_1.EMPTY_ROOT);\n    };\n    ExportSvgCommand.KIND = 'requestExportSvg';\n    return ExportSvgCommand;\n}(command_1.HiddenCommand));\nexports.ExportSvgCommand = ExportSvgCommand;\nvar ExportSvgDecorator = /** @class */ (function () {\n    function ExportSvgDecorator(svgExporter) {\n        this.svgExporter = svgExporter;\n    }\n    ExportSvgDecorator.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot)\n            this.root = element;\n        return vnode;\n    };\n    ExportSvgDecorator.prototype.postUpdate = function () {\n        if (this.root && model_2.isExportable(this.root) && this.root.export)\n            this.svgExporter.export(this.root);\n    };\n    ExportSvgDecorator = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.SvgExporter)),\n        __metadata(\"design:paramtypes\", [svg_exporter_1.SvgExporter])\n    ], ExportSvgDecorator);\n    return ExportSvgDecorator;\n}());\nexports.ExportSvgDecorator = ExportSvgDecorator;\n//# sourceMappingURL=export.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/export/export.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.openFeature = Symbol('openFeature');\nfunction isOpenable(element) {\n    return element.hasFeature(exports.openFeature);\n}\nexports.isOpenable = isOpenable;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/open/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar browser_1 = require(\"../../utils/browser\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar iterable_1 = require(\"../../utils/iterable\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar command_1 = require(\"../../base/commands/command\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar button_handler_1 = require(\"../button/button-handler\");\nvar model_1 = require(\"../button/model\");\nvar model_2 = require(\"../edit/model\");\nvar edit_routing_1 = require(\"../edit/edit-routing\");\nvar model_3 = require(\"./model\");\n/**\n * Triggered when the user changes the selection, e.g. by clicking on a selectable element. The resulting\n * SelectCommand changes the `selected` state accordingly, so the elements can be rendered differently.\n * This action is also forwarded to the diagram server, if present, so it may react on the selection change.\n * Furthermore, the server can send such an action to the client in order to change the selection programmatically.\n */\nvar SelectAction = /** @class */ (function () {\n    function SelectAction(selectedElementsIDs, deselectedElementsIDs) {\n        if (selectedElementsIDs === void 0) { selectedElementsIDs = []; }\n        if (deselectedElementsIDs === void 0) { deselectedElementsIDs = []; }\n        this.selectedElementsIDs = selectedElementsIDs;\n        this.deselectedElementsIDs = deselectedElementsIDs;\n        this.kind = SelectCommand.KIND;\n    }\n    return SelectAction;\n}());\nexports.SelectAction = SelectAction;\n/**\n * Programmatic action for selecting or deselecting all elements.\n */\nvar SelectAllAction = /** @class */ (function () {\n    /**\n     * If `select` is true, all elements are selected, othewise they are deselected.\n     */\n    function SelectAllAction(select) {\n        if (select === void 0) { select = true; }\n        this.select = select;\n        this.kind = SelectAllCommand.KIND;\n    }\n    return SelectAllAction;\n}());\nexports.SelectAllAction = SelectAllAction;\nvar SelectCommand = /** @class */ (function (_super) {\n    __extends(SelectCommand, _super);\n    function SelectCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.selected = [];\n        _this.deselected = [];\n        return _this;\n    }\n    SelectCommand.prototype.execute = function (context) {\n        var _this = this;\n        var model = context.root;\n        this.action.selectedElementsIDs.forEach(function (id) {\n            var element = model.index.getById(id);\n            if (element instanceof smodel_1.SChildElement && model_3.isSelectable(element)) {\n                _this.selected.push({\n                    element: element,\n                    parent: element.parent,\n                    index: element.parent.children.indexOf(element)\n                });\n            }\n        });\n        this.action.deselectedElementsIDs.forEach(function (id) {\n            var element = model.index.getById(id);\n            if (element instanceof smodel_1.SChildElement && model_3.isSelectable(element)) {\n                _this.deselected.push({\n                    element: element,\n                    parent: element.parent,\n                    index: element.parent.children.indexOf(element)\n                });\n            }\n        });\n        return this.redo(context);\n    };\n    SelectCommand.prototype.undo = function (context) {\n        for (var i = this.selected.length - 1; i >= 0; --i) {\n            var selection = this.selected[i];\n            var element = selection.element;\n            if (model_3.isSelectable(element))\n                element.selected = false;\n            selection.parent.move(element, selection.index);\n        }\n        this.deselected.reverse().forEach(function (selection) {\n            if (model_3.isSelectable(selection.element))\n                selection.element.selected = true;\n        });\n        return context.root;\n    };\n    SelectCommand.prototype.redo = function (context) {\n        for (var i = 0; i < this.selected.length; ++i) {\n            var selection = this.selected[i];\n            var element = selection.element;\n            var childrenLength = selection.parent.children.length;\n            selection.parent.move(element, childrenLength - 1);\n        }\n        this.deselected.forEach(function (selection) {\n            if (model_3.isSelectable(selection.element))\n                selection.element.selected = false;\n        });\n        this.selected.forEach(function (selection) {\n            if (model_3.isSelectable(selection.element))\n                selection.element.selected = true;\n        });\n        return context.root;\n    };\n    SelectCommand.KIND = 'elementSelected';\n    return SelectCommand;\n}(command_1.Command));\nexports.SelectCommand = SelectCommand;\nvar SelectAllCommand = /** @class */ (function (_super) {\n    __extends(SelectAllCommand, _super);\n    function SelectAllCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.previousSelection = {};\n        return _this;\n    }\n    SelectAllCommand.prototype.execute = function (context) {\n        this.selectAll(context.root, this.action.select);\n        return context.root;\n    };\n    SelectAllCommand.prototype.selectAll = function (element, newState) {\n        if (model_3.isSelectable(element)) {\n            this.previousSelection[element.id] = element.selected;\n            element.selected = newState;\n        }\n        for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            this.selectAll(child, newState);\n        }\n    };\n    SelectAllCommand.prototype.undo = function (context) {\n        var index = context.root.index;\n        for (var id in this.previousSelection) {\n            if (this.previousSelection.hasOwnProperty(id)) {\n                var element = index.getById(id);\n                if (element !== undefined && model_3.isSelectable(element))\n                    element.selected = this.previousSelection[id];\n            }\n        }\n        return context.root;\n    };\n    SelectAllCommand.prototype.redo = function (context) {\n        this.selectAll(context.root, this.action.select);\n        return context.root;\n    };\n    SelectAllCommand.KIND = 'allSelected';\n    return SelectAllCommand;\n}(command_1.Command));\nexports.SelectAllCommand = SelectAllCommand;\nvar SelectMouseListener = /** @class */ (function (_super) {\n    __extends(SelectMouseListener, _super);\n    function SelectMouseListener(buttonHandlerRegistry) {\n        var _this = _super.call(this) || this;\n        _this.buttonHandlerRegistry = buttonHandlerRegistry;\n        _this.wasSelected = false;\n        _this.hasDragged = false;\n        return _this;\n    }\n    SelectMouseListener.prototype.mouseDown = function (target, event) {\n        var result = [];\n        if (event.button === 0) {\n            if (this.buttonHandlerRegistry !== undefined && target instanceof model_1.SButton && target.enabled) {\n                var buttonHandler = this.buttonHandlerRegistry.get(target.type);\n                if (buttonHandler !== undefined)\n                    return buttonHandler.buttonPressed(target);\n            }\n            var selectableTarget_1 = smodel_utils_1.findParentByFeature(target, model_3.isSelectable);\n            if (selectableTarget_1 !== undefined || target instanceof smodel_1.SModelRoot) {\n                this.hasDragged = false;\n                var deselect = [];\n                // multi-selection?\n                if (!browser_1.isCtrlOrCmd(event)) {\n                    deselect = iterable_1.toArray(target.root.index.all()\n                        .filter(function (element) { return model_3.isSelectable(element) && element.selected\n                        && !(selectableTarget_1 instanceof model_2.SRoutingHandle && element === selectableTarget_1.parent); }));\n                }\n                if (selectableTarget_1 !== undefined) {\n                    if (!selectableTarget_1.selected) {\n                        this.wasSelected = false;\n                        result.push(new SelectAction([selectableTarget_1.id], deselect.map(function (e) { return e.id; })));\n                        var routableDeselect = deselect.filter(function (e) { return model_2.isRoutable(e); }).map(function (e) { return e.id; });\n                        if (model_2.isRoutable(selectableTarget_1))\n                            result.push(new edit_routing_1.SwitchEditModeAction([selectableTarget_1.id], routableDeselect));\n                        else if (routableDeselect.length > 0)\n                            result.push(new edit_routing_1.SwitchEditModeAction([], routableDeselect));\n                    }\n                    else if (browser_1.isCtrlOrCmd(event)) {\n                        this.wasSelected = false;\n                        result.push(new SelectAction([], [selectableTarget_1.id]));\n                        if (model_2.isRoutable(selectableTarget_1))\n                            result.push(new edit_routing_1.SwitchEditModeAction([], [selectableTarget_1.id]));\n                    }\n                    else {\n                        this.wasSelected = true;\n                    }\n                }\n                else {\n                    result.push(new SelectAction([], deselect.map(function (e) { return e.id; })));\n                    var routableDeselect = deselect.filter(function (e) { return model_2.isRoutable(e); }).map(function (e) { return e.id; });\n                    if (routableDeselect.length > 0)\n                        result.push(new edit_routing_1.SwitchEditModeAction([], routableDeselect));\n                }\n            }\n        }\n        return result;\n    };\n    SelectMouseListener.prototype.mouseMove = function (target, event) {\n        this.hasDragged = true;\n        return [];\n    };\n    SelectMouseListener.prototype.mouseUp = function (target, event) {\n        if (event.button === 0) {\n            if (!this.hasDragged) {\n                var selectableTarget = smodel_utils_1.findParentByFeature(target, model_3.isSelectable);\n                if (selectableTarget !== undefined && this.wasSelected) {\n                    return [new SelectAction([selectableTarget.id], [])];\n                }\n            }\n        }\n        this.hasDragged = false;\n        return [];\n    };\n    SelectMouseListener.prototype.decorate = function (vnode, element) {\n        var selectableTarget = smodel_utils_1.findParentByFeature(element, model_3.isSelectable);\n        if (selectableTarget !== undefined)\n            vnode_utils_1.setClass(vnode, 'selected', selectableTarget.selected);\n        return vnode;\n    };\n    SelectMouseListener = __decorate([\n        __param(0, inversify_1.inject(button_handler_1.ButtonHandlerRegistry)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [button_handler_1.ButtonHandlerRegistry])\n    ], SelectMouseListener);\n    return SelectMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.SelectMouseListener = SelectMouseListener;\nvar SelectKeyboardListener = /** @class */ (function (_super) {\n    __extends(SelectKeyboardListener, _super);\n    function SelectKeyboardListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SelectKeyboardListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyA', 'ctrlCmd')) {\n            var selected = iterable_1.toArray(element.root.index.all().filter(function (e) { return model_3.isSelectable(e); }).map(function (e) { return e.id; }));\n            return [new SelectAction(selected, [])];\n        }\n        return [];\n    };\n    return SelectKeyboardListener;\n}(key_tool_1.KeyListener));\nexports.SelectKeyboardListener = SelectKeyboardListener;\n//# sourceMappingURL=select.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/select/select.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar viewport_1 = require(\"./viewport\");\nvar model_1 = require(\"./model\");\nvar model_2 = require(\"../move/model\");\nvar model_3 = require(\"../edit/model\");\nfunction isScrollable(element) {\n    return 'scroll' in element;\n}\nexports.isScrollable = isScrollable;\nvar ScrollMouseListener = /** @class */ (function (_super) {\n    __extends(ScrollMouseListener, _super);\n    function ScrollMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ScrollMouseListener.prototype.mouseDown = function (target, event) {\n        var moveable = smodel_utils_1.findParentByFeature(target, model_2.isMoveable);\n        if (moveable === undefined && !(target instanceof model_3.SRoutingHandle)) {\n            var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n            if (viewport)\n                this.lastScrollPosition = { x: event.pageX, y: event.pageY };\n            else\n                this.lastScrollPosition = undefined;\n        }\n        return [];\n    };\n    ScrollMouseListener.prototype.mouseMove = function (target, event) {\n        if (event.buttons === 0)\n            this.mouseUp(target, event);\n        else if (this.lastScrollPosition) {\n            var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n            if (viewport) {\n                var dx = (event.pageX - this.lastScrollPosition.x) / viewport.zoom;\n                var dy = (event.pageY - this.lastScrollPosition.y) / viewport.zoom;\n                var newViewport = {\n                    scroll: {\n                        x: viewport.scroll.x - dx,\n                        y: viewport.scroll.y - dy,\n                    },\n                    zoom: viewport.zoom\n                };\n                this.lastScrollPosition = { x: event.pageX, y: event.pageY };\n                return [new viewport_1.ViewportAction(viewport.id, newViewport, false)];\n            }\n        }\n        return [];\n    };\n    ScrollMouseListener.prototype.mouseEnter = function (target, event) {\n        if (target instanceof smodel_1.SModelRoot && event.buttons === 0)\n            this.mouseUp(target, event);\n        return [];\n    };\n    ScrollMouseListener.prototype.mouseUp = function (target, event) {\n        this.lastScrollPosition = undefined;\n        return [];\n    };\n    return ScrollMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.ScrollMouseListener = ScrollMouseListener;\n//# sourceMappingURL=scroll.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/scroll.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar viewport_1 = require(\"./viewport\");\nvar model_1 = require(\"./model\");\nfunction isZoomable(element) {\n    return 'zoom' in element;\n}\nexports.isZoomable = isZoomable;\nvar ZoomMouseListener = /** @class */ (function (_super) {\n    __extends(ZoomMouseListener, _super);\n    function ZoomMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ZoomMouseListener.prototype.wheel = function (target, event) {\n        var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n        if (viewport) {\n            var newZoom = Math.exp(-event.deltaY * 0.005);\n            var factor = 1. / (newZoom * viewport.zoom) - 1. / viewport.zoom;\n            var newViewport = {\n                scroll: {\n                    x: -(factor * event.offsetX - viewport.scroll.x),\n                    y: -(factor * event.offsetY - viewport.scroll.y)\n                },\n                zoom: viewport.zoom * newZoom\n            };\n            return [new viewport_1.ViewportAction(viewport.id, newViewport, false)];\n        }\n        return [];\n    };\n    return ZoomMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.ZoomMouseListener = ZoomMouseListener;\n//# sourceMappingURL=zoom.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/zoom.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\nvar smodel_1 = require(\"../base/model/smodel\");\nvar smodel_storage_1 = require(\"../base/model/smodel-storage\");\nvar action_handler_1 = require(\"../base/actions/action-handler\");\nvar set_model_1 = require(\"../base/features/set-model\");\nvar update_model_1 = require(\"../features/update/update-model\");\nvar bounds_manipulation_1 = require(\"../features/bounds/bounds-manipulation\");\nvar hover_1 = require(\"../features/hover/hover\");\nvar model_source_1 = require(\"./model-source\");\nvar svg_exporter_1 = require(\"../features/export/svg-exporter\");\nvar file_saver_1 = require(\"file-saver\");\nvar expand_1 = require(\"../features/expand/expand\");\nvar open_1 = require(\"../features/open/open\");\nfunction isActionMessage(object) {\n    return object !== undefined && object.hasOwnProperty('clientId') && object.hasOwnProperty('action');\n}\nexports.isActionMessage = isActionMessage;\n/**\n * Sent by the external server when to signal a state change.\n */\nvar ServerStatusAction = /** @class */ (function () {\n    function ServerStatusAction() {\n        this.kind = ServerStatusAction.KIND;\n    }\n    ServerStatusAction.KIND = 'serverStatus';\n    return ServerStatusAction;\n}());\nexports.ServerStatusAction = ServerStatusAction;\nvar receivedFromServerProperty = '__receivedFromServer';\n/**\n * A ModelSource that communicates with an external model provider, e.g.\n * a model editor.\n *\n * This class defines which actions are sent to and received from the\n * external model source.\n */\nvar DiagramServer = /** @class */ (function (_super) {\n    __extends(DiagramServer, _super);\n    function DiagramServer(actionDispatcher, actionHandlerRegistry, viewerOptions, storage, logger) {\n        var _this = _super.call(this, actionDispatcher, actionHandlerRegistry, viewerOptions) || this;\n        _this.storage = storage;\n        _this.logger = logger;\n        _this.currentRoot = {\n            type: 'NONE',\n            id: 'ROOT'\n        };\n        _this.clientId = _this.viewerOptions.baseDiv;\n        return _this;\n    }\n    DiagramServer.prototype.initialize = function (registry) {\n        _super.prototype.initialize.call(this, registry);\n        // Register model manipulation commands\n        registry.registerCommand(update_model_1.UpdateModelCommand);\n        // Register this model source\n        registry.register(bounds_manipulation_1.ComputedBoundsAction.KIND, this);\n        registry.register(bounds_manipulation_1.RequestBoundsCommand.KIND, this);\n        registry.register(hover_1.RequestPopupModelAction.KIND, this);\n        registry.register(expand_1.CollapseExpandAction.KIND, this);\n        registry.register(expand_1.CollapseExpandAllAction.KIND, this);\n        registry.register(open_1.OpenAction.KIND, this);\n        registry.register(ServerStatusAction.KIND, this);\n    };\n    DiagramServer.prototype.handle = function (action) {\n        var forwardToServer = this.handleLocally(action);\n        if (forwardToServer) {\n            var message = {\n                clientId: this.clientId,\n                action: action\n            };\n            this.logger.log(this, 'sending', message);\n            this.sendMessage(message);\n        }\n    };\n    DiagramServer.prototype.messageReceived = function (data) {\n        var _this = this;\n        var object = typeof (data) === 'string' ? JSON.parse(data) : data;\n        if (isActionMessage(object) && object.action) {\n            if (!object.clientId || object.clientId === this.clientId) {\n                object.action[receivedFromServerProperty] = true;\n                this.logger.log(this, 'receiving', object);\n                this.actionDispatcher.dispatch(object.action).then(function () {\n                    _this.storeNewModel(object.action);\n                });\n            }\n        }\n        else {\n            this.logger.error(this, 'received data is not an action message', object);\n        }\n    };\n    /**\n     * Check whether the given action should be handled locally. Returns true if the action should\n     * still be sent to the server, and false if it's only handled locally.\n     */\n    DiagramServer.prototype.handleLocally = function (action) {\n        this.storeNewModel(action);\n        switch (action.kind) {\n            case bounds_manipulation_1.ComputedBoundsAction.KIND:\n                return this.handleComputedBounds(action);\n            case bounds_manipulation_1.RequestBoundsCommand.KIND:\n                return false;\n            case svg_exporter_1.ExportSvgAction.KIND:\n                return this.handleExportSvgAction(action);\n            case ServerStatusAction.KIND:\n                return this.handleServerStateAction(action);\n        }\n        return !action[receivedFromServerProperty];\n    };\n    /**\n     * Put the new model contained in the given action into the model storage, if there is any.\n     */\n    DiagramServer.prototype.storeNewModel = function (action) {\n        if (action.kind === set_model_1.SetModelCommand.KIND\n            || action.kind === update_model_1.UpdateModelCommand.KIND\n            || action.kind === bounds_manipulation_1.RequestBoundsCommand.KIND) {\n            var newRoot = action.newRoot;\n            if (newRoot) {\n                this.currentRoot = newRoot;\n                if (action.kind === set_model_1.SetModelCommand.KIND || action.kind === update_model_1.UpdateModelCommand.KIND) {\n                    this.lastSubmittedModelType = newRoot.type;\n                }\n                this.storage.store(this.currentRoot);\n            }\n        }\n    };\n    /**\n     * If the server requires to compute a layout, the computed bounds are forwarded. Otherwise they\n     * are applied to the current model locally and a model update is triggered.\n     */\n    DiagramServer.prototype.handleComputedBounds = function (action) {\n        if (this.viewerOptions.needsServerLayout) {\n            return true;\n        }\n        else {\n            var index = new smodel_1.SModelIndex();\n            var root = this.currentRoot;\n            index.add(root);\n            for (var _i = 0, _a = action.bounds; _i < _a.length; _i++) {\n                var b = _a[_i];\n                var element = index.getById(b.elementId);\n                if (element !== undefined)\n                    this.applyBounds(element, b.newBounds);\n            }\n            if (action.alignments !== undefined) {\n                for (var _b = 0, _c = action.alignments; _b < _c.length; _b++) {\n                    var a = _c[_b];\n                    var element = index.getById(a.elementId);\n                    if (element !== undefined)\n                        this.applyAlignment(element, a.newAlignment);\n                }\n            }\n            if (root.type === this.lastSubmittedModelType) {\n                this.actionDispatcher.dispatch(new update_model_1.UpdateModelAction(root));\n            }\n            else {\n                this.actionDispatcher.dispatch(new set_model_1.SetModelAction(root));\n            }\n            this.lastSubmittedModelType = root.type;\n            return false;\n        }\n    };\n    DiagramServer.prototype.applyBounds = function (element, newBounds) {\n        var e = element;\n        e.position = { x: newBounds.x, y: newBounds.y };\n        e.size = { width: newBounds.width, height: newBounds.height };\n    };\n    DiagramServer.prototype.applyAlignment = function (element, newAlignment) {\n        var e = element;\n        e.alignment = { x: newAlignment.x, y: newAlignment.y };\n    };\n    DiagramServer.prototype.handleExportSvgAction = function (action) {\n        var blob = new Blob([action.svg], { type: \"text/plain;charset=utf-8\" });\n        file_saver_1.saveAs(blob, \"diagram.svg\");\n        return false;\n    };\n    DiagramServer.prototype.handleServerStateAction = function (action) {\n        return false;\n    };\n    DiagramServer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.inject(types_1.TYPES.ActionHandlerRegistry)),\n        __param(2, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __param(3, inversify_1.inject(types_1.TYPES.SModelStorage)),\n        __param(4, inversify_1.inject(types_1.TYPES.ILogger)),\n        __metadata(\"design:paramtypes\", [Object, action_handler_1.ActionHandlerRegistry, Object, smodel_storage_1.SModelStorage, Object])\n    ], DiagramServer);\n    return DiagramServer;\n}(model_source_1.ModelSource));\nexports.DiagramServer = DiagramServer;\n//# sourceMappingURL=diagram-server.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/diagram-server.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ExpansionState = /** @class */ (function () {\n    function ExpansionState(root) {\n        this.expandedElementIds = [];\n        this.initialize(root);\n    }\n    ExpansionState.prototype.initialize = function (element) {\n        var _this = this;\n        if (element.expanded)\n            this.expandedElementIds.push(element.id);\n        if (element.children !== undefined)\n            element.children.forEach(function (child) { return _this.initialize(child); });\n    };\n    ExpansionState.prototype.apply = function (action) {\n        for (var _i = 0, _a = action.collapseIds; _i < _a.length; _i++) {\n            var collapsed = _a[_i];\n            var index = this.expandedElementIds.indexOf(collapsed);\n            if (index !== -1)\n                this.expandedElementIds.splice(index, 1);\n        }\n        for (var _b = 0, _c = action.expandIds; _b < _c.length; _b++) {\n            var expanded = _c[_b];\n            this.expandedElementIds.push(expanded);\n        }\n    };\n    ExpansionState.prototype.collapseAll = function () {\n        this.expandedElementIds = [];\n    };\n    return ExpansionState;\n}());\nexports.ExpansionState = ExpansionState;\n//# sourceMappingURL=diagram-state.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/diagram-state.js","\"use strict\";\n/*\n * Copyright (C) 2018 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"./geometry\");\nfunction computeCircleAnchor(position, radius, refPoint, offset) {\n    if (offset === void 0) { offset = 0; }\n    var cx = position.x + radius;\n    var cy = position.y + radius;\n    var dx = cx - refPoint.x;\n    var dy = cy - refPoint.y;\n    var distance = Math.sqrt(dx * dx + dy * dy);\n    var normX = (dx / distance) || 0;\n    var normY = (dy / distance) || 0;\n    return {\n        x: cx - normX * (radius + offset),\n        y: cy - normY * (radius + offset)\n    };\n}\nexports.computeCircleAnchor = computeCircleAnchor;\nfunction getXIntersection(yIntersection, centerPoint, point) {\n    var t = (yIntersection - centerPoint.y) / (point.y - centerPoint.y);\n    return (point.x - centerPoint.x) * t + centerPoint.x;\n}\nfunction getYIntersection(xIntersection, centerPoint, point) {\n    var t = (xIntersection - centerPoint.x) / (point.x - centerPoint.x);\n    return (point.y - centerPoint.y) * t + centerPoint.y;\n}\nvar NearestPointFinder = /** @class */ (function () {\n    function NearestPointFinder(centerPoint, refPoint) {\n        this.centerPoint = centerPoint;\n        this.refPoint = refPoint;\n        this.currentDist = -1;\n    }\n    NearestPointFinder.prototype.addCandidate = function (x, y) {\n        var dx = this.refPoint.x - x;\n        var dy = this.refPoint.y - y;\n        var dist = dx * dx + dy * dy;\n        if (this.currentDist < 0 || dist < this.currentDist) {\n            this.currentBest = {\n                x: x,\n                y: y\n            };\n            this.currentDist = dist;\n        }\n    };\n    Object.defineProperty(NearestPointFinder.prototype, \"best\", {\n        get: function () {\n            if (this.currentBest === undefined)\n                return this.centerPoint;\n            else\n                return this.currentBest;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return NearestPointFinder;\n}());\nfunction computeRectangleAnchor(bounds, refPoint, offset) {\n    var c = geometry_1.center(bounds);\n    var finder = new NearestPointFinder(c, refPoint);\n    if (!geometry_1.almostEquals(c.y, refPoint.y)) {\n        var xTop = getXIntersection(bounds.y, c, refPoint);\n        if (xTop >= bounds.x && xTop <= bounds.x + bounds.width)\n            finder.addCandidate(xTop, bounds.y - offset);\n        var xBottom = getXIntersection(bounds.y + bounds.height, c, refPoint);\n        if (xBottom >= bounds.x && xBottom <= bounds.x + bounds.width)\n            finder.addCandidate(xBottom, bounds.y + bounds.height + offset);\n    }\n    if (!geometry_1.almostEquals(c.x, refPoint.x)) {\n        var yLeft = getYIntersection(bounds.x, c, refPoint);\n        if (yLeft >= bounds.y && yLeft <= bounds.y + bounds.height)\n            finder.addCandidate(bounds.x - offset, yLeft);\n        var yRight = getYIntersection(bounds.x + bounds.width, c, refPoint);\n        if (yRight >= bounds.y && yRight <= bounds.y + bounds.height)\n            finder.addCandidate(bounds.x + bounds.width + offset, yRight);\n    }\n    return finder.best;\n}\nexports.computeRectangleAnchor = computeRectangleAnchor;\n//# sourceMappingURL=anchors.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/anchors.js","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-options.js\n// module id = 99\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*******************************************************************************\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io) and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar lib_1 = require(\"sprotty/lib\");\nvar views_1 = require(\"./views\");\nvar sprotty_model_1 = require(\"./sprotty-model\");\nvar FilteringSvgExporter = /** @class */ (function (_super) {\n    __extends(FilteringSvgExporter, _super);\n    function FilteringSvgExporter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FilteringSvgExporter.prototype.isExported = function (styleSheet) {\n        return styleSheet.href !== null && (styleSheet.href.endsWith('diagram.css') || styleSheet.href.endsWith('sprotty.css'));\n    };\n    return FilteringSvgExporter;\n}(lib_1.SvgExporter));\nexports.default = (function () {\n    var elkGraphModule = new inversify_1.ContainerModule(function (bind, unbind, isBound, rebind) {\n        rebind(lib_1.TYPES.ILogger).to(lib_1.ConsoleLogger).inSingletonScope();\n        rebind(lib_1.TYPES.LogLevel).toConstantValue(lib_1.LogLevel.warn);\n        rebind(lib_1.TYPES.IModelFactory).to(lib_1.SGraphFactory).inSingletonScope();\n        rebind(lib_1.TYPES.SvgExporter).to(FilteringSvgExporter).inSingletonScope();\n        var context = { bind: bind, unbind: unbind, isBound: isBound, rebind: rebind };\n        lib_1.configureModelElement(context, 'graph', lib_1.SGraph, lib_1.SGraphView);\n        lib_1.configureModelElement(context, 'node', sprotty_model_1.ElkNode, views_1.ElkNodeView);\n        lib_1.configureModelElement(context, 'port', sprotty_model_1.ElkPort, views_1.ElkPortView);\n        lib_1.configureModelElement(context, 'edge', sprotty_model_1.ElkEdge, views_1.ElkEdgeView);\n        lib_1.configureModelElement(context, 'label', lib_1.SLabel, views_1.ElkLabelView);\n        lib_1.configureModelElement(context, 'junction', sprotty_model_1.ElkJunction, views_1.JunctionView);\n        lib_1.configureViewerOptions(context, {\n            needsClientLayout: false\n        });\n    });\n    var container = new inversify_1.Container();\n    container.load(lib_1.defaultModule, lib_1.selectModule, lib_1.boundsModule, lib_1.moveModule, lib_1.fadeModule, lib_1.hoverModule, lib_1.viewportModule, lib_1.exportModule, lib_1.edgeEditModule, elkGraphModule);\n    return container;\n});\n//# sourceMappingURL=sprotty-config.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/sprotty-config.js","\"use strict\";\n/*******************************************************************************\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io) and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getParameters() {\n    var search = window.location.search.substring(1);\n    var result = {};\n    while (search.length > 0) {\n        var nextParamIndex = search.indexOf('&');\n        var param = void 0;\n        if (nextParamIndex < 0) {\n            param = search;\n            search = '';\n        }\n        else {\n            param = search.substring(0, nextParamIndex);\n            search = search.substring(nextParamIndex + 1);\n        }\n        var valueIndex = param.indexOf('=');\n        if (valueIndex > 0 && valueIndex < param.length - 1) {\n            result[param.substring(0, valueIndex)] = param.substring(valueIndex + 1);\n        }\n    }\n    return result;\n}\nexports.getParameters = getParameters;\nfunction setupModelLink(editor, getParameters) {\n    var contentChangeTimeout;\n    var listener = function (event) {\n        if (contentChangeTimeout !== undefined) {\n            window.clearTimeout(contentChangeTimeout);\n        }\n        contentChangeTimeout = window.setTimeout(function () {\n            var anchor = document.getElementById('model-link');\n            if (anchor !== null) {\n                var parameters = getParameters(event);\n                var newHref = assembleHref(parameters);\n                anchor.setAttribute('href', newHref);\n            }\n        }, 400);\n    };\n    editor.onDidChangeModelContent(listener);\n    listener({});\n}\nexports.setupModelLink = setupModelLink;\nfunction assembleHref(parameters) {\n    var newHref = window.location.href;\n    var queryIndex = newHref.indexOf('?');\n    if (queryIndex > 0)\n        newHref = newHref.substring(0, queryIndex);\n    newHref += combineParameters(parameters);\n    return newHref;\n}\nexports.assembleHref = assembleHref;\nfunction combineParameters(parameters) {\n    var result = '';\n    var i = 0;\n    for (var param in parameters) {\n        result += \"\" + (i === 0 ? '?' : '&') + param + \"=\" + parameters[param];\n        i++;\n    }\n    return result;\n}\nexports.combineParameters = combineParameters;\n//# sourceMappingURL=url-parameters.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/url-parameters.js","/*! *****************************************************************************\r\nCopyright (C) Microsoft. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\nvar Reflect;\r\n(function (Reflect) {\r\n    \"use strict\";\r\n    var hasOwn = Object.prototype.hasOwnProperty;\r\n    // feature test for Symbol support\r\n    var supportsSymbol = typeof Symbol === \"function\";\r\n    var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\r\n    var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\r\n    var HashMap;\r\n    (function (HashMap) {\r\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\r\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\r\n        var downLevel = !supportsCreate && !supportsProto;\r\n        // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\r\n        HashMap.create = supportsCreate\r\n            ? function () { return MakeDictionary(Object.create(null)); }\r\n            : supportsProto\r\n                ? function () { return MakeDictionary({ __proto__: null }); }\r\n                : function () { return MakeDictionary({}); };\r\n        HashMap.has = downLevel\r\n            ? function (map, key) { return hasOwn.call(map, key); }\r\n            : function (map, key) { return key in map; };\r\n        HashMap.get = downLevel\r\n            ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\r\n            : function (map, key) { return map[key]; };\r\n    })(HashMap || (HashMap = {}));\r\n    // Load global or shim versions of Map, Set, and WeakMap\r\n    var functionPrototype = Object.getPrototypeOf(Function);\r\n    var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\r\n    var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\r\n    var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\r\n    var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\r\n    // [[Metadata]] internal slot\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\r\n    var Metadata = new _WeakMap();\r\n    /**\r\n      * Applies a set of decorators to a property of a target object.\r\n      * @param decorators An array of decorators.\r\n      * @param target The target object.\r\n      * @param propertyKey (Optional) The property key to decorate.\r\n      * @param attributes (Optional) The property descriptor for the target key.\r\n      * @remarks Decorators are applied in reverse order.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     Example = Reflect.decorate(decoratorsArray, Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     Object.defineProperty(Example, \"staticMethod\",\r\n      *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\r\n      *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\r\n      *\r\n      *     // method (on prototype)\r\n      *     Object.defineProperty(Example.prototype, \"method\",\r\n      *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\r\n      *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\r\n      *\r\n      */\r\n    function decorate(decorators, target, propertyKey, attributes) {\r\n        if (!IsUndefined(propertyKey)) {\r\n            if (!IsArray(decorators))\r\n                throw new TypeError();\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\r\n                throw new TypeError();\r\n            if (IsNull(attributes))\r\n                attributes = undefined;\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n            return DecorateProperty(decorators, target, propertyKey, attributes);\r\n        }\r\n        else {\r\n            if (!IsArray(decorators))\r\n                throw new TypeError();\r\n            if (!IsConstructor(target))\r\n                throw new TypeError();\r\n            return DecorateConstructor(decorators, target);\r\n        }\r\n    }\r\n    Reflect.decorate = decorate;\r\n    // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\r\n    // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\r\n    /**\r\n      * A default metadata decorator factory that can be used on a class, class member, or parameter.\r\n      * @param metadataKey The key for the metadata entry.\r\n      * @param metadataValue The value for the metadata entry.\r\n      * @returns A decorator function.\r\n      * @remarks\r\n      * If `metadataKey` is already defined for the target and target key, the\r\n      * metadataValue for that key will be overwritten.\r\n      * @example\r\n      *\r\n      *     // constructor\r\n      *     @Reflect.metadata(key, value)\r\n      *     class Example {\r\n      *     }\r\n      *\r\n      *     // property (on constructor, TypeScript only)\r\n      *     class Example {\r\n      *         @Reflect.metadata(key, value)\r\n      *         static staticProperty;\r\n      *     }\r\n      *\r\n      *     // property (on prototype, TypeScript only)\r\n      *     class Example {\r\n      *         @Reflect.metadata(key, value)\r\n      *         property;\r\n      *     }\r\n      *\r\n      *     // method (on constructor)\r\n      *     class Example {\r\n      *         @Reflect.metadata(key, value)\r\n      *         static staticMethod() { }\r\n      *     }\r\n      *\r\n      *     // method (on prototype)\r\n      *     class Example {\r\n      *         @Reflect.metadata(key, value)\r\n      *         method() { }\r\n      *     }\r\n      *\r\n      */\r\n    function metadata(metadataKey, metadataValue) {\r\n        function decorator(target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\r\n                throw new TypeError();\r\n            OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\r\n        }\r\n        return decorator;\r\n    }\r\n    Reflect.metadata = metadata;\r\n    /**\r\n      * Define a unique metadata entry on the target.\r\n      * @param metadataKey A key used to store and retrieve metadata.\r\n      * @param metadataValue A value that contains attached metadata.\r\n      * @param target The target object on which to define metadata.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\r\n      *\r\n      *     // decorator factory as metadata-producing annotation.\r\n      *     function MyAnnotation(options): Decorator {\r\n      *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\r\n      *     }\r\n      *\r\n      */\r\n    function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\r\n    }\r\n    Reflect.defineMetadata = defineMetadata;\r\n    /**\r\n      * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\r\n      * @param metadataKey A key used to store and retrieve metadata.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function hasMetadata(metadataKey, target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryHasMetadata(metadataKey, target, propertyKey);\r\n    }\r\n    Reflect.hasMetadata = hasMetadata;\r\n    /**\r\n      * Gets a value indicating whether the target object has the provided metadata key defined.\r\n      * @param metadataKey A key used to store and retrieve metadata.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function hasOwnMetadata(metadataKey, target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\r\n    }\r\n    Reflect.hasOwnMetadata = hasOwnMetadata;\r\n    /**\r\n      * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\r\n      * @param metadataKey A key used to store and retrieve metadata.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.getMetadata(\"custom:annotation\", Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function getMetadata(metadataKey, target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryGetMetadata(metadataKey, target, propertyKey);\r\n    }\r\n    Reflect.getMetadata = getMetadata;\r\n    /**\r\n      * Gets the metadata value for the provided metadata key on the target object.\r\n      * @param metadataKey A key used to store and retrieve metadata.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function getOwnMetadata(metadataKey, target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\r\n    }\r\n    Reflect.getOwnMetadata = getOwnMetadata;\r\n    /**\r\n      * Gets the metadata keys defined on the target object or its prototype chain.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns An array of unique metadata keys.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.getMetadataKeys(Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function getMetadataKeys(target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryMetadataKeys(target, propertyKey);\r\n    }\r\n    Reflect.getMetadataKeys = getMetadataKeys;\r\n    /**\r\n      * Gets the unique metadata keys defined on the target object.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns An array of unique metadata keys.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.getOwnMetadataKeys(Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function getOwnMetadataKeys(target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        return OrdinaryOwnMetadataKeys(target, propertyKey);\r\n    }\r\n    Reflect.getOwnMetadataKeys = getOwnMetadataKeys;\r\n    /**\r\n      * Deletes the metadata entry from the target object with the provided key.\r\n      * @param metadataKey A key used to store and retrieve metadata.\r\n      * @param target The target object on which the metadata is defined.\r\n      * @param propertyKey (Optional) The property key for the target.\r\n      * @returns `true` if the metadata entry was found and deleted; otherwise, false.\r\n      * @example\r\n      *\r\n      *     class Example {\r\n      *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n      *         // static staticProperty;\r\n      *         // property;\r\n      *\r\n      *         constructor(p) { }\r\n      *         static staticMethod(p) { }\r\n      *         method(p) { }\r\n      *     }\r\n      *\r\n      *     // constructor\r\n      *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\r\n      *\r\n      *     // property (on constructor)\r\n      *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n      *\r\n      *     // property (on prototype)\r\n      *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n      *\r\n      *     // method (on constructor)\r\n      *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n      *\r\n      *     // method (on prototype)\r\n      *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n      *\r\n      */\r\n    function deleteMetadata(metadataKey, target, propertyKey) {\r\n        if (!IsObject(target))\r\n            throw new TypeError();\r\n        if (!IsUndefined(propertyKey))\r\n            propertyKey = ToPropertyKey(propertyKey);\r\n        var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\r\n        if (IsUndefined(metadataMap))\r\n            return false;\r\n        if (!metadataMap.delete(metadataKey))\r\n            return false;\r\n        if (metadataMap.size > 0)\r\n            return true;\r\n        var targetMetadata = Metadata.get(target);\r\n        targetMetadata.delete(propertyKey);\r\n        if (targetMetadata.size > 0)\r\n            return true;\r\n        Metadata.delete(target);\r\n        return true;\r\n    }\r\n    Reflect.deleteMetadata = deleteMetadata;\r\n    function DecorateConstructor(decorators, target) {\r\n        for (var i = decorators.length - 1; i >= 0; --i) {\r\n            var decorator = decorators[i];\r\n            var decorated = decorator(target);\r\n            if (!IsUndefined(decorated) && !IsNull(decorated)) {\r\n                if (!IsConstructor(decorated))\r\n                    throw new TypeError();\r\n                target = decorated;\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n    function DecorateProperty(decorators, target, propertyKey, descriptor) {\r\n        for (var i = decorators.length - 1; i >= 0; --i) {\r\n            var decorator = decorators[i];\r\n            var decorated = decorator(target, propertyKey, descriptor);\r\n            if (!IsUndefined(decorated) && !IsNull(decorated)) {\r\n                if (!IsObject(decorated))\r\n                    throw new TypeError();\r\n                descriptor = decorated;\r\n            }\r\n        }\r\n        return descriptor;\r\n    }\r\n    function GetOrCreateMetadataMap(O, P, Create) {\r\n        var targetMetadata = Metadata.get(O);\r\n        if (IsUndefined(targetMetadata)) {\r\n            if (!Create)\r\n                return undefined;\r\n            targetMetadata = new _Map();\r\n            Metadata.set(O, targetMetadata);\r\n        }\r\n        var metadataMap = targetMetadata.get(P);\r\n        if (IsUndefined(metadataMap)) {\r\n            if (!Create)\r\n                return undefined;\r\n            metadataMap = new _Map();\r\n            targetMetadata.set(P, metadataMap);\r\n        }\r\n        return metadataMap;\r\n    }\r\n    // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\r\n    function OrdinaryHasMetadata(MetadataKey, O, P) {\r\n        var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\r\n        if (hasOwn)\r\n            return true;\r\n        var parent = OrdinaryGetPrototypeOf(O);\r\n        if (!IsNull(parent))\r\n            return OrdinaryHasMetadata(MetadataKey, parent, P);\r\n        return false;\r\n    }\r\n    // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\r\n    function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\r\n        var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n        if (IsUndefined(metadataMap))\r\n            return false;\r\n        return ToBoolean(metadataMap.has(MetadataKey));\r\n    }\r\n    // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\r\n    function OrdinaryGetMetadata(MetadataKey, O, P) {\r\n        var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\r\n        if (hasOwn)\r\n            return OrdinaryGetOwnMetadata(MetadataKey, O, P);\r\n        var parent = OrdinaryGetPrototypeOf(O);\r\n        if (!IsNull(parent))\r\n            return OrdinaryGetMetadata(MetadataKey, parent, P);\r\n        return undefined;\r\n    }\r\n    // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\r\n    function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\r\n        var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n        if (IsUndefined(metadataMap))\r\n            return undefined;\r\n        return metadataMap.get(MetadataKey);\r\n    }\r\n    // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\r\n    function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\r\n        var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\r\n        metadataMap.set(MetadataKey, MetadataValue);\r\n    }\r\n    // 3.1.6.1 OrdinaryMetadataKeys(O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\r\n    function OrdinaryMetadataKeys(O, P) {\r\n        var ownKeys = OrdinaryOwnMetadataKeys(O, P);\r\n        var parent = OrdinaryGetPrototypeOf(O);\r\n        if (parent === null)\r\n            return ownKeys;\r\n        var parentKeys = OrdinaryMetadataKeys(parent, P);\r\n        if (parentKeys.length <= 0)\r\n            return ownKeys;\r\n        if (ownKeys.length <= 0)\r\n            return parentKeys;\r\n        var set = new _Set();\r\n        var keys = [];\r\n        for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\r\n            var key = ownKeys_1[_i];\r\n            var hasKey = set.has(key);\r\n            if (!hasKey) {\r\n                set.add(key);\r\n                keys.push(key);\r\n            }\r\n        }\r\n        for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\r\n            var key = parentKeys_1[_a];\r\n            var hasKey = set.has(key);\r\n            if (!hasKey) {\r\n                set.add(key);\r\n                keys.push(key);\r\n            }\r\n        }\r\n        return keys;\r\n    }\r\n    // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\r\n    // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\r\n    function OrdinaryOwnMetadataKeys(O, P) {\r\n        var keys = [];\r\n        var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n        if (IsUndefined(metadataMap))\r\n            return keys;\r\n        var keysObj = metadataMap.keys();\r\n        var iterator = GetIterator(keysObj);\r\n        var k = 0;\r\n        while (true) {\r\n            var next = IteratorStep(iterator);\r\n            if (!next) {\r\n                keys.length = k;\r\n                return keys;\r\n            }\r\n            var nextValue = IteratorValue(next);\r\n            try {\r\n                keys[k] = nextValue;\r\n            }\r\n            catch (e) {\r\n                try {\r\n                    IteratorClose(iterator);\r\n                }\r\n                finally {\r\n                    throw e;\r\n                }\r\n            }\r\n            k++;\r\n        }\r\n    }\r\n    // 6 ECMAScript Data Typ0es and Values\r\n    // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\r\n    function Type(x) {\r\n        if (x === null)\r\n            return 1 /* Null */;\r\n        switch (typeof x) {\r\n            case \"undefined\": return 0 /* Undefined */;\r\n            case \"boolean\": return 2 /* Boolean */;\r\n            case \"string\": return 3 /* String */;\r\n            case \"symbol\": return 4 /* Symbol */;\r\n            case \"number\": return 5 /* Number */;\r\n            case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\r\n            default: return 6 /* Object */;\r\n        }\r\n    }\r\n    // 6.1.1 The Undefined Type\r\n    // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\r\n    function IsUndefined(x) {\r\n        return x === undefined;\r\n    }\r\n    // 6.1.2 The Null Type\r\n    // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\r\n    function IsNull(x) {\r\n        return x === null;\r\n    }\r\n    // 6.1.5 The Symbol Type\r\n    // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\r\n    function IsSymbol(x) {\r\n        return typeof x === \"symbol\";\r\n    }\r\n    // 6.1.7 The Object Type\r\n    // https://tc39.github.io/ecma262/#sec-object-type\r\n    function IsObject(x) {\r\n        return typeof x === \"object\" ? x !== null : typeof x === \"function\";\r\n    }\r\n    // 7.1 Type Conversion\r\n    // https://tc39.github.io/ecma262/#sec-type-conversion\r\n    // 7.1.1 ToPrimitive(input [, PreferredType])\r\n    // https://tc39.github.io/ecma262/#sec-toprimitive\r\n    function ToPrimitive(input, PreferredType) {\r\n        switch (Type(input)) {\r\n            case 0 /* Undefined */: return input;\r\n            case 1 /* Null */: return input;\r\n            case 2 /* Boolean */: return input;\r\n            case 3 /* String */: return input;\r\n            case 4 /* Symbol */: return input;\r\n            case 5 /* Number */: return input;\r\n        }\r\n        var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\r\n        var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\r\n        if (exoticToPrim !== undefined) {\r\n            var result = exoticToPrim.call(input, hint);\r\n            if (IsObject(result))\r\n                throw new TypeError();\r\n            return result;\r\n        }\r\n        return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\r\n    }\r\n    // 7.1.1.1 OrdinaryToPrimitive(O, hint)\r\n    // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\r\n    function OrdinaryToPrimitive(O, hint) {\r\n        if (hint === \"string\") {\r\n            var toString_1 = O.toString;\r\n            if (IsCallable(toString_1)) {\r\n                var result = toString_1.call(O);\r\n                if (!IsObject(result))\r\n                    return result;\r\n            }\r\n            var valueOf = O.valueOf;\r\n            if (IsCallable(valueOf)) {\r\n                var result = valueOf.call(O);\r\n                if (!IsObject(result))\r\n                    return result;\r\n            }\r\n        }\r\n        else {\r\n            var valueOf = O.valueOf;\r\n            if (IsCallable(valueOf)) {\r\n                var result = valueOf.call(O);\r\n                if (!IsObject(result))\r\n                    return result;\r\n            }\r\n            var toString_2 = O.toString;\r\n            if (IsCallable(toString_2)) {\r\n                var result = toString_2.call(O);\r\n                if (!IsObject(result))\r\n                    return result;\r\n            }\r\n        }\r\n        throw new TypeError();\r\n    }\r\n    // 7.1.2 ToBoolean(argument)\r\n    // https://tc39.github.io/ecma262/2016/#sec-toboolean\r\n    function ToBoolean(argument) {\r\n        return !!argument;\r\n    }\r\n    // 7.1.12 ToString(argument)\r\n    // https://tc39.github.io/ecma262/#sec-tostring\r\n    function ToString(argument) {\r\n        return \"\" + argument;\r\n    }\r\n    // 7.1.14 ToPropertyKey(argument)\r\n    // https://tc39.github.io/ecma262/#sec-topropertykey\r\n    function ToPropertyKey(argument) {\r\n        var key = ToPrimitive(argument, 3 /* String */);\r\n        if (IsSymbol(key))\r\n            return key;\r\n        return ToString(key);\r\n    }\r\n    // 7.2 Testing and Comparison Operations\r\n    // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\r\n    // 7.2.2 IsArray(argument)\r\n    // https://tc39.github.io/ecma262/#sec-isarray\r\n    function IsArray(argument) {\r\n        return Array.isArray\r\n            ? Array.isArray(argument)\r\n            : argument instanceof Object\r\n                ? argument instanceof Array\r\n                : Object.prototype.toString.call(argument) === \"[object Array]\";\r\n    }\r\n    // 7.2.3 IsCallable(argument)\r\n    // https://tc39.github.io/ecma262/#sec-iscallable\r\n    function IsCallable(argument) {\r\n        // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\r\n        return typeof argument === \"function\";\r\n    }\r\n    // 7.2.4 IsConstructor(argument)\r\n    // https://tc39.github.io/ecma262/#sec-isconstructor\r\n    function IsConstructor(argument) {\r\n        // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\r\n        return typeof argument === \"function\";\r\n    }\r\n    // 7.2.7 IsPropertyKey(argument)\r\n    // https://tc39.github.io/ecma262/#sec-ispropertykey\r\n    function IsPropertyKey(argument) {\r\n        switch (Type(argument)) {\r\n            case 3 /* String */: return true;\r\n            case 4 /* Symbol */: return true;\r\n            default: return false;\r\n        }\r\n    }\r\n    // 7.3 Operations on Objects\r\n    // https://tc39.github.io/ecma262/#sec-operations-on-objects\r\n    // 7.3.9 GetMethod(V, P)\r\n    // https://tc39.github.io/ecma262/#sec-getmethod\r\n    function GetMethod(V, P) {\r\n        var func = V[P];\r\n        if (func === undefined || func === null)\r\n            return undefined;\r\n        if (!IsCallable(func))\r\n            throw new TypeError();\r\n        return func;\r\n    }\r\n    // 7.4 Operations on Iterator Objects\r\n    // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\r\n    function GetIterator(obj) {\r\n        var method = GetMethod(obj, iteratorSymbol);\r\n        if (!IsCallable(method))\r\n            throw new TypeError(); // from Call\r\n        var iterator = method.call(obj);\r\n        if (!IsObject(iterator))\r\n            throw new TypeError();\r\n        return iterator;\r\n    }\r\n    // 7.4.4 IteratorValue(iterResult)\r\n    // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\r\n    function IteratorValue(iterResult) {\r\n        return iterResult.value;\r\n    }\r\n    // 7.4.5 IteratorStep(iterator)\r\n    // https://tc39.github.io/ecma262/#sec-iteratorstep\r\n    function IteratorStep(iterator) {\r\n        var result = iterator.next();\r\n        return result.done ? false : result;\r\n    }\r\n    // 7.4.6 IteratorClose(iterator, completion)\r\n    // https://tc39.github.io/ecma262/#sec-iteratorclose\r\n    function IteratorClose(iterator) {\r\n        var f = iterator[\"return\"];\r\n        if (f)\r\n            f.call(iterator);\r\n    }\r\n    // 9.1 Ordinary Object Internal Methods and Internal Slots\r\n    // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\r\n    // 9.1.1.1 OrdinaryGetPrototypeOf(O)\r\n    // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\r\n    function OrdinaryGetPrototypeOf(O) {\r\n        var proto = Object.getPrototypeOf(O);\r\n        if (typeof O !== \"function\" || O === functionPrototype)\r\n            return proto;\r\n        // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\r\n        // Try to determine the superclass constructor. Compatible implementations\r\n        // must either set __proto__ on a subclass constructor to the superclass constructor,\r\n        // or ensure each class has a valid `constructor` property on its prototype that\r\n        // points back to the constructor.\r\n        // If this is not the same as Function.[[Prototype]], then this is definately inherited.\r\n        // This is the case when in ES6 or when using __proto__ in a compatible browser.\r\n        if (proto !== functionPrototype)\r\n            return proto;\r\n        // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\r\n        var prototype = O.prototype;\r\n        var prototypeProto = prototype && Object.getPrototypeOf(prototype);\r\n        if (prototypeProto == null || prototypeProto === Object.prototype)\r\n            return proto;\r\n        // If the constructor was not a function, then we cannot determine the heritage.\r\n        var constructor = prototypeProto.constructor;\r\n        if (typeof constructor !== \"function\")\r\n            return proto;\r\n        // If we have some kind of self-reference, then we cannot determine the heritage.\r\n        if (constructor === O)\r\n            return proto;\r\n        // we have a pretty good guess at the heritage.\r\n        return constructor;\r\n    }\r\n    // naive Map shim\r\n    function CreateMapPolyfill() {\r\n        var cacheSentinel = {};\r\n        var arraySentinel = [];\r\n        var MapIterator = (function () {\r\n            function MapIterator(keys, values, selector) {\r\n                this._index = 0;\r\n                this._keys = keys;\r\n                this._values = values;\r\n                this._selector = selector;\r\n            }\r\n            MapIterator.prototype[\"@@iterator\"] = function () { return this; };\r\n            MapIterator.prototype[iteratorSymbol] = function () { return this; };\r\n            MapIterator.prototype.next = function () {\r\n                var index = this._index;\r\n                if (index >= 0 && index < this._keys.length) {\r\n                    var result = this._selector(this._keys[index], this._values[index]);\r\n                    if (index + 1 >= this._keys.length) {\r\n                        this._index = -1;\r\n                        this._keys = arraySentinel;\r\n                        this._values = arraySentinel;\r\n                    }\r\n                    else {\r\n                        this._index++;\r\n                    }\r\n                    return { value: result, done: false };\r\n                }\r\n                return { value: undefined, done: true };\r\n            };\r\n            MapIterator.prototype.throw = function (error) {\r\n                if (this._index >= 0) {\r\n                    this._index = -1;\r\n                    this._keys = arraySentinel;\r\n                    this._values = arraySentinel;\r\n                }\r\n                throw error;\r\n            };\r\n            MapIterator.prototype.return = function (value) {\r\n                if (this._index >= 0) {\r\n                    this._index = -1;\r\n                    this._keys = arraySentinel;\r\n                    this._values = arraySentinel;\r\n                }\r\n                return { value: value, done: true };\r\n            };\r\n            return MapIterator;\r\n        }());\r\n        return (function () {\r\n            function Map() {\r\n                this._keys = [];\r\n                this._values = [];\r\n                this._cacheKey = cacheSentinel;\r\n                this._cacheIndex = -2;\r\n            }\r\n            Object.defineProperty(Map.prototype, \"size\", {\r\n                get: function () { return this._keys.length; },\r\n                enumerable: true,\r\n                configurable: true\r\n            });\r\n            Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\r\n            Map.prototype.get = function (key) {\r\n                var index = this._find(key, /*insert*/ false);\r\n                return index >= 0 ? this._values[index] : undefined;\r\n            };\r\n            Map.prototype.set = function (key, value) {\r\n                var index = this._find(key, /*insert*/ true);\r\n                this._values[index] = value;\r\n                return this;\r\n            };\r\n            Map.prototype.delete = function (key) {\r\n                var index = this._find(key, /*insert*/ false);\r\n                if (index >= 0) {\r\n                    var size = this._keys.length;\r\n                    for (var i = index + 1; i < size; i++) {\r\n                        this._keys[i - 1] = this._keys[i];\r\n                        this._values[i - 1] = this._values[i];\r\n                    }\r\n                    this._keys.length--;\r\n                    this._values.length--;\r\n                    if (key === this._cacheKey) {\r\n                        this._cacheKey = cacheSentinel;\r\n                        this._cacheIndex = -2;\r\n                    }\r\n                    return true;\r\n                }\r\n                return false;\r\n            };\r\n            Map.prototype.clear = function () {\r\n                this._keys.length = 0;\r\n                this._values.length = 0;\r\n                this._cacheKey = cacheSentinel;\r\n                this._cacheIndex = -2;\r\n            };\r\n            Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\r\n            Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\r\n            Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\r\n            Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\r\n            Map.prototype[iteratorSymbol] = function () { return this.entries(); };\r\n            Map.prototype._find = function (key, insert) {\r\n                if (this._cacheKey !== key) {\r\n                    this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\r\n                }\r\n                if (this._cacheIndex < 0 && insert) {\r\n                    this._cacheIndex = this._keys.length;\r\n                    this._keys.push(key);\r\n                    this._values.push(undefined);\r\n                }\r\n                return this._cacheIndex;\r\n            };\r\n            return Map;\r\n        }());\r\n        function getKey(key, _) {\r\n            return key;\r\n        }\r\n        function getValue(_, value) {\r\n            return value;\r\n        }\r\n        function getEntry(key, value) {\r\n            return [key, value];\r\n        }\r\n    }\r\n    // naive Set shim\r\n    function CreateSetPolyfill() {\r\n        return (function () {\r\n            function Set() {\r\n                this._map = new _Map();\r\n            }\r\n            Object.defineProperty(Set.prototype, \"size\", {\r\n                get: function () { return this._map.size; },\r\n                enumerable: true,\r\n                configurable: true\r\n            });\r\n            Set.prototype.has = function (value) { return this._map.has(value); };\r\n            Set.prototype.add = function (value) { return this._map.set(value, value), this; };\r\n            Set.prototype.delete = function (value) { return this._map.delete(value); };\r\n            Set.prototype.clear = function () { this._map.clear(); };\r\n            Set.prototype.keys = function () { return this._map.keys(); };\r\n            Set.prototype.values = function () { return this._map.values(); };\r\n            Set.prototype.entries = function () { return this._map.entries(); };\r\n            Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\r\n            Set.prototype[iteratorSymbol] = function () { return this.keys(); };\r\n            return Set;\r\n        }());\r\n    }\r\n    // naive WeakMap shim\r\n    function CreateWeakMapPolyfill() {\r\n        var UUID_SIZE = 16;\r\n        var keys = HashMap.create();\r\n        var rootKey = CreateUniqueKey();\r\n        return (function () {\r\n            function WeakMap() {\r\n                this._key = CreateUniqueKey();\r\n            }\r\n            WeakMap.prototype.has = function (target) {\r\n                var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                return table !== undefined ? HashMap.has(table, this._key) : false;\r\n            };\r\n            WeakMap.prototype.get = function (target) {\r\n                var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                return table !== undefined ? HashMap.get(table, this._key) : undefined;\r\n            };\r\n            WeakMap.prototype.set = function (target, value) {\r\n                var table = GetOrCreateWeakMapTable(target, /*create*/ true);\r\n                table[this._key] = value;\r\n                return this;\r\n            };\r\n            WeakMap.prototype.delete = function (target) {\r\n                var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                return table !== undefined ? delete table[this._key] : false;\r\n            };\r\n            WeakMap.prototype.clear = function () {\r\n                // NOTE: not a real clear, just makes the previous data unreachable\r\n                this._key = CreateUniqueKey();\r\n            };\r\n            return WeakMap;\r\n        }());\r\n        function CreateUniqueKey() {\r\n            var key;\r\n            do\r\n                key = \"@@WeakMap@@\" + CreateUUID();\r\n            while (HashMap.has(keys, key));\r\n            keys[key] = true;\r\n            return key;\r\n        }\r\n        function GetOrCreateWeakMapTable(target, create) {\r\n            if (!hasOwn.call(target, rootKey)) {\r\n                if (!create)\r\n                    return undefined;\r\n                Object.defineProperty(target, rootKey, { value: HashMap.create() });\r\n            }\r\n            return target[rootKey];\r\n        }\r\n        function FillRandomBytes(buffer, size) {\r\n            for (var i = 0; i < size; ++i)\r\n                buffer[i] = Math.random() * 0xff | 0;\r\n            return buffer;\r\n        }\r\n        function GenRandomBytes(size) {\r\n            if (typeof Uint8Array === \"function\") {\r\n                if (typeof crypto !== \"undefined\")\r\n                    return crypto.getRandomValues(new Uint8Array(size));\r\n                if (typeof msCrypto !== \"undefined\")\r\n                    return msCrypto.getRandomValues(new Uint8Array(size));\r\n                return FillRandomBytes(new Uint8Array(size), size);\r\n            }\r\n            return FillRandomBytes(new Array(size), size);\r\n        }\r\n        function CreateUUID() {\r\n            var data = GenRandomBytes(UUID_SIZE);\r\n            // mark as random - RFC 4122  4.4\r\n            data[6] = data[6] & 0x4f | 0x40;\r\n            data[8] = data[8] & 0xbf | 0x80;\r\n            var result = \"\";\r\n            for (var offset = 0; offset < UUID_SIZE; ++offset) {\r\n                var byte = data[offset];\r\n                if (offset === 4 || offset === 6 || offset === 8)\r\n                    result += \"-\";\r\n                if (byte < 16)\r\n                    result += \"0\";\r\n                result += byte.toString(16).toLowerCase();\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n    // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\r\n    function MakeDictionary(obj) {\r\n        obj.__ = undefined;\r\n        delete obj.__;\r\n        return obj;\r\n    }\r\n    // patch global Reflect\r\n    (function (__global) {\r\n        if (typeof __global.Reflect !== \"undefined\") {\r\n            if (__global.Reflect !== Reflect) {\r\n                for (var p in Reflect) {\r\n                    if (hasOwn.call(Reflect, p)) {\r\n                        __global.Reflect[p] = Reflect[p];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            __global.Reflect = Reflect;\r\n        }\r\n    })(typeof global !== \"undefined\" ? global :\r\n        typeof self !== \"undefined\" ? self :\r\n            Function(\"return this;\")());\r\n})(Reflect || (Reflect = {}));\r\n//# sourceMappingURL=Reflect.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/reflect-metadata/Reflect.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*******************************************************************************\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io) and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nvar lib_1 = require(\"sprotty/lib\");\nvar ElkNode = /** @class */ (function (_super) {\n    __extends(ElkNode, _super);\n    function ElkNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkNode.prototype.hasFeature = function (feature) {\n        if (feature === lib_1.moveFeature)\n            return false;\n        else\n            return _super.prototype.hasFeature.call(this, feature);\n    };\n    return ElkNode;\n}(lib_1.RectangularNode));\nexports.ElkNode = ElkNode;\nvar ElkPort = /** @class */ (function (_super) {\n    __extends(ElkPort, _super);\n    function ElkPort() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkPort.prototype.hasFeature = function (feature) {\n        if (feature === lib_1.moveFeature)\n            return false;\n        else\n            return _super.prototype.hasFeature.call(this, feature);\n    };\n    return ElkPort;\n}(lib_1.RectangularPort));\nexports.ElkPort = ElkPort;\nvar ElkEdge = /** @class */ (function (_super) {\n    __extends(ElkEdge, _super);\n    function ElkEdge() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkEdge.prototype.hasFeature = function (feature) {\n        if (feature === lib_1.editFeature)\n            return false;\n        else\n            return _super.prototype.hasFeature.call(this, feature);\n    };\n    return ElkEdge;\n}(lib_1.SEdge));\nexports.ElkEdge = ElkEdge;\nvar ElkJunction = /** @class */ (function (_super) {\n    __extends(ElkJunction, _super);\n    function ElkJunction() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkJunction.prototype.hasFeature = function (feature) {\n        if (feature === lib_1.moveFeature || feature === lib_1.selectFeature || feature === lib_1.hoverFeedbackFeature)\n            return false;\n        else\n            return _super.prototype.hasFeature.call(this, feature);\n    };\n    return ElkJunction;\n}(lib_1.SNode));\nexports.ElkJunction = ElkJunction;\n//# sourceMappingURL=sprotty-model.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/sprotty-model.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*******************************************************************************\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io) and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nvar snabbdom = require(\"snabbdom-jsx\");\nvar lib_1 = require(\"sprotty/lib\");\nvar JSX = { createElement: snabbdom.svg };\nvar ElkNodeView = /** @class */ (function (_super) {\n    __extends(ElkNodeView, _super);\n    function ElkNodeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkNodeView.prototype.render = function (node, context) {\n        return JSX.createElement(\"g\", null,\n            JSX.createElement(\"rect\", { \"class-elknode\": true, \"class-mouseover\": node.hoverFeedback, \"class-selected\": node.selected, x: \"0\", y: \"0\", width: node.bounds.width, height: node.bounds.height }),\n            context.renderChildren(node));\n    };\n    return ElkNodeView;\n}(lib_1.RectangularNodeView));\nexports.ElkNodeView = ElkNodeView;\nvar ElkPortView = /** @class */ (function (_super) {\n    __extends(ElkPortView, _super);\n    function ElkPortView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkPortView.prototype.render = function (port, context) {\n        return JSX.createElement(\"g\", null,\n            JSX.createElement(\"rect\", { \"class-elkport\": true, \"class-mouseover\": port.hoverFeedback, \"class-selected\": port.selected, x: \"0\", y: \"0\", width: port.bounds.width, height: port.bounds.height }),\n            context.renderChildren(port));\n    };\n    return ElkPortView;\n}(lib_1.RectangularNodeView));\nexports.ElkPortView = ElkPortView;\nvar ElkEdgeView = /** @class */ (function (_super) {\n    __extends(ElkEdgeView, _super);\n    function ElkEdgeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ElkEdgeView.prototype.renderLine = function (edge, segments, context) {\n        var firstPoint = segments[0];\n        var path = \"M \" + firstPoint.x + \",\" + firstPoint.y;\n        for (var i = 1; i < segments.length; i++) {\n            var p = segments[i];\n            path += \" L \" + p.x + \",\" + p.y;\n        }\n        return JSX.createElement(\"path\", { \"class-elkedge\": true, d: path });\n    };\n    ElkEdgeView.prototype.renderAdditionals = function (edge, segments, context) {\n        var p1 = segments[segments.length - 2];\n        var p2 = segments[segments.length - 1];\n        return [\n            JSX.createElement(\"path\", { \"class-edge\": true, \"class-arrow\": true, d: \"M 0,0 L 8,-3 L 8,3 Z\", transform: \"rotate(\" + lib_1.toDegrees(lib_1.angleOfPoint({ x: p1.x - p2.x, y: p1.y - p2.y })) + \" \" + p2.x + \" \" + p2.y + \") translate(\" + p2.x + \" \" + p2.y + \")\" })\n        ];\n    };\n    return ElkEdgeView;\n}(lib_1.PolylineEdgeView));\nexports.ElkEdgeView = ElkEdgeView;\nvar ElkLabelView = /** @class */ (function () {\n    function ElkLabelView() {\n    }\n    ElkLabelView.prototype.render = function (label, context) {\n        return JSX.createElement(\"text\", { \"class-elklabel\": true }, label.text);\n    };\n    return ElkLabelView;\n}());\nexports.ElkLabelView = ElkLabelView;\nvar JunctionView = /** @class */ (function (_super) {\n    __extends(JunctionView, _super);\n    function JunctionView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    JunctionView.prototype.render = function (node, context) {\n        var radius = this.getRadius(node);\n        return JSX.createElement(\"g\", null,\n            JSX.createElement(\"circle\", { \"class-elkjunction\": true, r: radius }));\n    };\n    JunctionView.prototype.getRadius = function (node) {\n        return 2;\n    };\n    return JunctionView;\n}(lib_1.CircularNodeView));\nexports.JunctionView = JunctionView;\n//# sourceMappingURL=views.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/views.js","var attrRE = /([\\w-]+)|=|(['\"])([.\\s\\S]*?)\\2/g;\nvar voidElements = require('void-elements');\n\nmodule.exports = function (tag) {\n    var i = 0;\n    var key;\n    var expectingValueAfterEquals = true;\n    var res = {\n        type: 'tag',\n        name: '',\n        voidElement: false,\n        attrs: {},\n        children: []\n    };\n\n    tag.replace(attrRE, function (match) {\n        if (match === '=') {\n            expectingValueAfterEquals = true;\n            i++;\n            return;\n        }\n\n        if (!expectingValueAfterEquals) {\n            if (key) {\n                res.attrs[key] = key; // boolean attribute\n            }\n            key=match;\n        } else {\n            if (i === 0) {\n                if (voidElements[match] || tag.charAt(tag.length - 2) === '/') {\n                    res.voidElement = true;\n                }\n                res.name = match;\n            } else {\n                res.attrs[key] = match.replace(/^['\"]|['\"]$/g, '');\n                key=undefined;\n            }\n        }\n        i++;\n        expectingValueAfterEquals = false;\n    });\n\n    return res;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/html-parse-stringify2/lib/parse-tag.js","/*jshint -W030 */\nvar tagRE = /(?:<!--[\\S\\s]*?-->|<(?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])+>)/g;\nvar parseTag = require('./parse-tag');\n// re-used obj for quick lookups of components\nvar empty = Object.create ? Object.create(null) : {};\n// common logic for pushing a child node onto a list\nfunction pushTextNode(list, html, level, start, ignoreWhitespace) {\n    // calculate correct end of the content slice in case there's\n    // no tag after the text node.\n    var end = html.indexOf('<', start);\n    var content = html.slice(start, end === -1 ? undefined : end);\n    // if a node is nothing but whitespace, collapse it as the spec states:\n    // https://www.w3.org/TR/html4/struct/text.html#h-9.1\n    if (/^\\s*$/.test(content)) {\n        content = ' ';\n    }\n    // don't add whitespace-only text nodes if they would be trailing text nodes\n    // or if they would be leading whitespace-only text nodes:\n    //  * end > -1 indicates this is not a trailing text node\n    //  * leading node is when level is -1 and list has length 0\n    if ((!ignoreWhitespace && end > -1 && level + list.length >= 0) || content !== ' ') {\n        list.push({\n            type: 'text',\n            content: content\n        });\n    }\n}\n\nmodule.exports = function parse(html, options) {\n    options || (options = {});\n    options.components || (options.components = empty);\n    var result = [];\n    var current;\n    var level = -1;\n    var arr = [];\n    var byTag = {};\n    var inComponent = false;\n\n    html.replace(tagRE, function (tag, index) {\n        if (inComponent) {\n            if (tag !== ('</' + current.name + '>')) {\n                return;\n            } else {\n                inComponent = false;\n            }\n        }\n\n        var isOpen = tag.charAt(1) !== '/';\n        var isComment = tag.indexOf('<!--') === 0;\n        var start = index + tag.length;\n        var nextChar = html.charAt(start);\n        var parent;\n\n        if (isOpen && !isComment) {\n            level++;\n\n            current = parseTag(tag);\n            if (current.type === 'tag' && options.components[current.name]) {\n                current.type = 'component';\n                inComponent = true;\n            }\n\n            if (!current.voidElement && !inComponent && nextChar && nextChar !== '<') {\n                pushTextNode(current.children, html, level, start, options.ignoreWhitespace);\n            }\n\n            byTag[current.tagName] = current;\n\n            // if we're at root, push new base node\n            if (level === 0) {\n                result.push(current);\n            }\n\n            parent = arr[level - 1];\n\n            if (parent) {\n                parent.children.push(current);\n            }\n\n            arr[level] = current;\n        }\n\n        if (isComment || !isOpen || current.voidElement) {\n            if (!isComment) {\n                level--;\n            }\n            if (!inComponent && nextChar !== '<' && nextChar) {\n                // trailing text node\n                // if we're at the root, push a base text node. otherwise add as\n                // a child to the current node.\n                parent = level === -1 ? result : arr[level].children;\n                pushTextNode(parent, html, level, start, options.ignoreWhitespace);\n            }\n        }\n    });\n\n    // If the \"html\" passed isn't actually html, add it as a text node.\n    if (!result.length && html.length) {\n        pushTextNode(result, html, 0, 0, options.ignoreWhitespace);\n    }\n\n    return result;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/html-parse-stringify2/lib/parse.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction inject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.inject = inject;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/inject.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nfunction injectable() {\n    return function (target) {\n        if (Reflect.hasOwnMetadata(METADATA_KEY.PARAM_TYPES, target) === true) {\n            throw new Error(ERRORS_MSGS.DUPLICATED_INJECTABLE_DECORATOR);\n        }\n        var types = Reflect.getMetadata(METADATA_KEY.DESIGN_PARAM_TYPES, target) || [];\n        Reflect.defineMetadata(METADATA_KEY.PARAM_TYPES, types, target);\n        return target;\n    };\n}\nexports.injectable = injectable;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/injectable.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction multiInject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.MULTI_INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.multiInject = multiInject;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/multi_inject.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction named(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, name);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.named = named;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/named.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction optional() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.OPTIONAL_TAG, true);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.optional = optional;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/optional.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nfunction postConstruct() {\n    return function (target, propertyKey, descriptor) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.POST_CONSTRUCT, propertyKey);\n        if (Reflect.hasOwnMetadata(METADATA_KEY.POST_CONSTRUCT, target.constructor)) {\n            throw new Error(ERRORS_MSGS.MULTIPLE_POST_CONSTRUCT_METHODS);\n        }\n        Reflect.defineMetadata(METADATA_KEY.POST_CONSTRUCT, metadata, target.constructor);\n    };\n}\nexports.postConstruct = postConstruct;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/post_construct.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction tagged(metadataKey, metadataValue) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(metadataKey, metadataValue);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.tagged = tagged;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/tagged.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction targetName(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAME_TAG, name);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.targetName = targetName;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/target_name.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction unmanaged() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.UNMANAGED_TAG, true);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.unmanaged = unmanaged;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/annotation/unmanaged.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar guid_1 = require(\"../utils/guid\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar Binding = (function () {\n    function Binding(serviceIdentifier, defaultScope) {\n        this.guid = guid_1.guid();\n        this.activated = false;\n        this.serviceIdentifier = serviceIdentifier;\n        this.scope = defaultScope;\n        this.type = literal_types_1.BindingTypeEnum.Invalid;\n        this.constraint = function (request) { return true; };\n        this.implementationType = null;\n        this.cache = null;\n        this.factory = null;\n        this.provider = null;\n        this.onActivation = null;\n        this.dynamicValue = null;\n    }\n    Binding.prototype.clone = function () {\n        var clone = new Binding(this.serviceIdentifier, this.scope);\n        clone.activated = false;\n        clone.implementationType = this.implementationType;\n        clone.dynamicValue = this.dynamicValue;\n        clone.scope = this.scope;\n        clone.type = this.type;\n        clone.factory = this.factory;\n        clone.provider = this.provider;\n        clone.constraint = this.constraint;\n        clone.onActivation = this.onActivation;\n        clone.cache = this.cache;\n        return clone;\n    };\n    return Binding;\n}());\nexports.Binding = Binding;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/bindings/binding.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BindingCount = {\n    MultipleBindingsAvailable: 2,\n    NoBindingsAvailable: 0,\n    OnlyOneBindingAvailable: 1\n};\nexports.BindingCount = BindingCount;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/bindings/binding_count.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_1 = require(\"../bindings/binding\");\nvar lookup_1 = require(\"./lookup\");\nvar planner_1 = require(\"../planning/planner\");\nvar resolver_1 = require(\"../resolution/resolver\");\nvar binding_to_syntax_1 = require(\"../syntax/binding_to_syntax\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar container_snapshot_1 = require(\"./container_snapshot\");\nvar guid_1 = require(\"../utils/guid\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar metadata_reader_1 = require(\"../planning/metadata_reader\");\nvar Container = (function () {\n    function Container(containerOptions) {\n        if (containerOptions !== undefined) {\n            if (typeof containerOptions !== \"object\") {\n                throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);\n            }\n            else if (containerOptions.defaultScope === undefined) {\n                throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\n            }\n            else if (containerOptions.defaultScope !== literal_types_1.BindingScopeEnum.Singleton &&\n                containerOptions.defaultScope !== literal_types_1.BindingScopeEnum.Transient) {\n                throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\n            }\n            this.options = {\n                defaultScope: containerOptions.defaultScope\n            };\n        }\n        else {\n            this.options = {\n                defaultScope: literal_types_1.BindingScopeEnum.Transient\n            };\n        }\n        this.guid = guid_1.guid();\n        this._bindingDictionary = new lookup_1.Lookup();\n        this._snapshots = [];\n        this._middleware = null;\n        this.parent = null;\n        this._metadataReader = new metadata_reader_1.MetadataReader();\n    }\n    Container.merge = function (container1, container2) {\n        var container = new Container();\n        var bindingDictionary = planner_1.getBindingDictionary(container);\n        var bindingDictionary1 = planner_1.getBindingDictionary(container1);\n        var bindingDictionary2 = planner_1.getBindingDictionary(container2);\n        function copyDictionary(origin, destination) {\n            origin.traverse(function (key, value) {\n                value.forEach(function (binding) {\n                    destination.add(binding.serviceIdentifier, binding.clone());\n                });\n            });\n        }\n        copyDictionary(bindingDictionary1, bindingDictionary);\n        copyDictionary(bindingDictionary2, bindingDictionary);\n        return container;\n    };\n    Container.prototype.load = function () {\n        var _this = this;\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var setModuleId = function (bindingToSyntax, moduleId) {\n            bindingToSyntax._binding.moduleId = moduleId;\n        };\n        var getBindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var bindingToSyntax = _this.bind.call(_this, serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        var getUnbindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _unbind = _this.unbind.bind(_this);\n                _unbind(serviceIdentifier);\n            };\n        };\n        var getIsboundFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _isBound = _this.isBound.bind(_this);\n                return _isBound(serviceIdentifier);\n            };\n        };\n        var getRebindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var bindingToSyntax = _this.rebind.call(_this, serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        modules.forEach(function (module) {\n            var bindFunction = getBindFunction(module.guid);\n            var unbindFunction = getUnbindFunction(module.guid);\n            var isboundFunction = getIsboundFunction(module.guid);\n            var rebindFunction = getRebindFunction(module.guid);\n            module.registry(bindFunction, unbindFunction, isboundFunction, rebindFunction);\n        });\n    };\n    Container.prototype.unload = function () {\n        var _this = this;\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var conditionFactory = function (expected) { return function (item) {\n            return item.moduleId === expected;\n        }; };\n        modules.forEach(function (module) {\n            var condition = conditionFactory(module.guid);\n            _this._bindingDictionary.removeByCondition(condition);\n        });\n    };\n    Container.prototype.bind = function (serviceIdentifier) {\n        var defaultScope = literal_types_1.BindingScopeEnum.Transient;\n        defaultScope = (this.options.defaultScope === defaultScope) ? defaultScope : literal_types_1.BindingScopeEnum.Singleton;\n        var binding = new binding_1.Binding(serviceIdentifier, defaultScope);\n        this._bindingDictionary.add(serviceIdentifier, binding);\n        return new binding_to_syntax_1.BindingToSyntax(binding);\n    };\n    Container.prototype.rebind = function (serviceIdentifier) {\n        this.unbind(serviceIdentifier);\n        return this.bind(serviceIdentifier);\n    };\n    Container.prototype.unbind = function (serviceIdentifier) {\n        try {\n            this._bindingDictionary.remove(serviceIdentifier);\n        }\n        catch (e) {\n            throw new Error(ERROR_MSGS.CANNOT_UNBIND + \" \" + serialization_1.getServiceIdentifierAsString(serviceIdentifier));\n        }\n    };\n    Container.prototype.unbindAll = function () {\n        this._bindingDictionary = new lookup_1.Lookup();\n    };\n    Container.prototype.isBound = function (serviceIdentifier) {\n        var bound = this._bindingDictionary.hasKey(serviceIdentifier);\n        if (!bound && this.parent) {\n            bound = this.parent.isBound(serviceIdentifier);\n        }\n        return bound;\n    };\n    Container.prototype.isBoundNamed = function (serviceIdentifier, named) {\n        return this.isBoundTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.isBoundTagged = function (serviceIdentifier, key, value) {\n        var bound = false;\n        if (this._bindingDictionary.hasKey(serviceIdentifier)) {\n            var bindings = this._bindingDictionary.get(serviceIdentifier);\n            var request_1 = planner_1.createMockRequest(this, serviceIdentifier, key, value);\n            bound = bindings.some(function (b) { return b.constraint(request_1); });\n        }\n        if (!bound && this.parent) {\n            bound = this.parent.isBoundTagged(serviceIdentifier, key, value);\n        }\n        return bound;\n    };\n    Container.prototype.snapshot = function () {\n        this._snapshots.push(container_snapshot_1.ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware));\n    };\n    Container.prototype.restore = function () {\n        var snapshot = this._snapshots.pop();\n        if (snapshot === undefined) {\n            throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);\n        }\n        this._bindingDictionary = snapshot.bindings;\n        this._middleware = snapshot.middleware;\n    };\n    Container.prototype.createChild = function () {\n        var child = new Container();\n        child.parent = this;\n        return child;\n    };\n    Container.prototype.applyMiddleware = function () {\n        var middlewares = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            middlewares[_i] = arguments[_i];\n        }\n        var initial = (this._middleware) ? this._middleware : this._planAndResolve();\n        this._middleware = middlewares.reduce(function (prev, curr) {\n            return curr(prev);\n        }, initial);\n    };\n    Container.prototype.applyCustomMetadataReader = function (metadataReader) {\n        this._metadataReader = metadataReader;\n    };\n    Container.prototype.get = function (serviceIdentifier) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getNamed = function (serviceIdentifier, named) {\n        return this.getTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.getAll = function (serviceIdentifier) {\n        return this._get(true, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getAllTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getAllNamed = function (serviceIdentifier, named) {\n        return this.getAllTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.resolve = function (constructorFunction) {\n        var tempContainer = new Container();\n        tempContainer.bind(constructorFunction).toSelf();\n        tempContainer.parent = this;\n        return tempContainer.get(constructorFunction);\n    };\n    Container.prototype._get = function (avoidConstraints, isMultiInject, targetType, serviceIdentifier, key, value) {\n        var result = null;\n        var defaultArgs = {\n            avoidConstraints: avoidConstraints,\n            contextInterceptor: function (context) { return context; },\n            isMultiInject: isMultiInject,\n            key: key,\n            serviceIdentifier: serviceIdentifier,\n            targetType: targetType,\n            value: value\n        };\n        if (this._middleware) {\n            result = this._middleware(defaultArgs);\n            if (result === undefined || result === null) {\n                throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN);\n            }\n        }\n        else {\n            result = this._planAndResolve()(defaultArgs);\n        }\n        return result;\n    };\n    Container.prototype._planAndResolve = function () {\n        var _this = this;\n        return function (args) {\n            var context = planner_1.plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);\n            context = args.contextInterceptor(context);\n            var result = resolver_1.resolve(context);\n            return result;\n        };\n    };\n    return Container;\n}());\nexports.Container = Container;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/container/container.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar guid_1 = require(\"../utils/guid\");\nvar ContainerModule = (function () {\n    function ContainerModule(registry) {\n        this.guid = guid_1.guid();\n        this.registry = registry;\n    }\n    return ContainerModule;\n}());\nexports.ContainerModule = ContainerModule;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/container/container_module.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ContainerSnapshot = (function () {\n    function ContainerSnapshot() {\n    }\n    ContainerSnapshot.of = function (bindings, middleware) {\n        var snapshot = new ContainerSnapshot();\n        snapshot.bindings = bindings;\n        snapshot.middleware = middleware;\n        return snapshot;\n    };\n    return ContainerSnapshot;\n}());\nexports.ContainerSnapshot = ContainerSnapshot;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/container/container_snapshot.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar Lookup = (function () {\n    function Lookup() {\n        this._map = new Map();\n    }\n    Lookup.prototype.getMap = function () {\n        return this._map;\n    };\n    Lookup.prototype.add = function (serviceIdentifier, value) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (value === null || value === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            entry.push(value);\n            this._map.set(serviceIdentifier, entry);\n        }\n        else {\n            this._map.set(serviceIdentifier, [value]);\n        }\n    };\n    Lookup.prototype.get = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            return entry;\n        }\n        else {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.remove = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (!this._map.delete(serviceIdentifier)) {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.removeByCondition = function (condition) {\n        var _this = this;\n        this._map.forEach(function (entries, key) {\n            var updatedEntries = entries.filter(function (entry) { return !condition(entry); });\n            if (updatedEntries.length > 0) {\n                _this._map.set(key, updatedEntries);\n            }\n            else {\n                _this._map.delete(key);\n            }\n        });\n    };\n    Lookup.prototype.hasKey = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        return this._map.has(serviceIdentifier);\n    };\n    Lookup.prototype.clone = function () {\n        var copy = new Lookup();\n        this._map.forEach(function (value, key) {\n            value.forEach(function (b) { return copy.add(key, b.clone()); });\n        });\n        return copy;\n    };\n    Lookup.prototype.traverse = function (func) {\n        this._map.forEach(function (value, key) {\n            func(key, value);\n        });\n    };\n    return Lookup;\n}());\nexports.Lookup = Lookup;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/container/lookup.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar guid_1 = require(\"../utils/guid\");\nvar Context = (function () {\n    function Context(container) {\n        this.guid = guid_1.guid();\n        this.container = container;\n    }\n    Context.prototype.addPlan = function (plan) {\n        this.plan = plan;\n    };\n    return Context;\n}());\nexports.Context = Context;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/context.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Plan = (function () {\n    function Plan(parentContext, rootRequest) {\n        this.parentContext = parentContext;\n        this.rootRequest = rootRequest;\n    }\n    return Plan;\n}());\nexports.Plan = Plan;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/plan.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar plan_1 = require(\"./plan\");\nvar context_1 = require(\"./context\");\nvar request_1 = require(\"./request\");\nvar target_1 = require(\"./target\");\nvar binding_count_1 = require(\"../bindings/binding_count\");\nvar reflection_utils_1 = require(\"./reflection_utils\");\nvar metadata_1 = require(\"./metadata\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar serialization_1 = require(\"../utils/serialization\");\nfunction getBindingDictionary(cntnr) {\n    return cntnr._bindingDictionary;\n}\nexports.getBindingDictionary = getBindingDictionary;\nfunction _createTarget(isMultiInject, targetType, serviceIdentifier, name, key, value) {\n    var metadataKey = isMultiInject ? METADATA_KEY.MULTI_INJECT_TAG : METADATA_KEY.INJECT_TAG;\n    var injectMetadata = new metadata_1.Metadata(metadataKey, serviceIdentifier);\n    var target = new target_1.Target(targetType, name, serviceIdentifier, injectMetadata);\n    if (key !== undefined) {\n        var tagMetadata = new metadata_1.Metadata(key, value);\n        target.metadata.push(tagMetadata);\n    }\n    return target;\n}\nfunction _getActiveBindings(avoidConstraints, context, parentRequest, target) {\n    var bindings = getBindings(context.container, target.serviceIdentifier);\n    var activeBindings = [];\n    if (avoidConstraints === false) {\n        activeBindings = bindings.filter(function (binding) {\n            var request = new request_1.Request(binding.serviceIdentifier, context, parentRequest, binding, target);\n            return binding.constraint(request);\n        });\n    }\n    else {\n        activeBindings = bindings;\n    }\n    _validateActiveBindingCount(target.serviceIdentifier, activeBindings, target, context.container);\n    return activeBindings;\n}\nfunction _validateActiveBindingCount(serviceIdentifier, bindings, target, container) {\n    switch (bindings.length) {\n        case binding_count_1.BindingCount.NoBindingsAvailable:\n            if (target.isOptional() === true) {\n                return bindings;\n            }\n            else {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.NOT_REGISTERED;\n                msg += serialization_1.listMetadataForTarget(serviceIdentifierString, target);\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n        case binding_count_1.BindingCount.OnlyOneBindingAvailable:\n            if (target.isArray() === false) {\n                return bindings;\n            }\n        case binding_count_1.BindingCount.MultipleBindingsAvailable:\n        default:\n            if (target.isArray() === false) {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier), msg = ERROR_MSGS.AMBIGUOUS_MATCH + \" \" + serviceIdentifierString;\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n            else {\n                return bindings;\n            }\n    }\n}\nfunction _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, parentRequest, target) {\n    try {\n        var activeBindings = void 0;\n        var childRequest_1;\n        if (parentRequest === null) {\n            activeBindings = _getActiveBindings(avoidConstraints, context, null, target);\n            childRequest_1 = new request_1.Request(serviceIdentifier, context, null, activeBindings, target);\n            var thePlan = new plan_1.Plan(context, childRequest_1);\n            context.addPlan(thePlan);\n        }\n        else {\n            activeBindings = _getActiveBindings(avoidConstraints, context, parentRequest, target);\n            childRequest_1 = parentRequest.addChildRequest(target.serviceIdentifier, activeBindings, target);\n        }\n        activeBindings.forEach(function (binding) {\n            var subChildRequest = null;\n            if (target.isArray()) {\n                subChildRequest = childRequest_1.addChildRequest(binding.serviceIdentifier, binding, target);\n            }\n            else {\n                subChildRequest = childRequest_1;\n            }\n            if (binding.type === literal_types_1.BindingTypeEnum.Instance && binding.implementationType !== null) {\n                var dependencies = reflection_utils_1.getDependencies(metadataReader, binding.implementationType);\n                dependencies.forEach(function (dependency) {\n                    _createSubRequests(metadataReader, false, dependency.serviceIdentifier, context, subChildRequest, dependency);\n                });\n            }\n        });\n    }\n    catch (error) {\n        if (error instanceof RangeError && parentRequest !== null) {\n            serialization_1.circularDependencyToException(parentRequest.parentContext.plan.rootRequest);\n        }\n        else {\n            throw new Error(error.message);\n        }\n    }\n}\nfunction getBindings(container, serviceIdentifier) {\n    var bindings = [];\n    var bindingDictionary = getBindingDictionary(container);\n    if (bindingDictionary.hasKey(serviceIdentifier)) {\n        bindings = bindingDictionary.get(serviceIdentifier);\n    }\n    else if (container.parent !== null) {\n        bindings = getBindings(container.parent, serviceIdentifier);\n    }\n    return bindings;\n}\nfunction plan(metadataReader, container, isMultiInject, targetType, serviceIdentifier, key, value, avoidConstraints) {\n    if (avoidConstraints === void 0) { avoidConstraints = false; }\n    var context = new context_1.Context(container);\n    var target = _createTarget(isMultiInject, targetType, serviceIdentifier, \"\", key, value);\n    _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, null, target);\n    return context;\n}\nexports.plan = plan;\nfunction createMockRequest(container, serviceIdentifier, key, value) {\n    var target = new target_1.Target(literal_types_1.TargetTypeEnum.Variable, \"\", serviceIdentifier, new metadata_1.Metadata(key, value));\n    var context = new context_1.Context(container);\n    var request = new request_1.Request(serviceIdentifier, context, null, [], target);\n    return request;\n}\nexports.createMockRequest = createMockRequest;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/planner.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar QueryableString = (function () {\n    function QueryableString(str) {\n        this.str = str;\n    }\n    QueryableString.prototype.startsWith = function (searchString) {\n        return this.str.indexOf(searchString) === 0;\n    };\n    QueryableString.prototype.endsWith = function (searchString) {\n        var reverseString = \"\";\n        var reverseSearchString = searchString.split(\"\").reverse().join(\"\");\n        reverseString = this.str.split(\"\").reverse().join(\"\");\n        return this.startsWith.call({ str: reverseString }, reverseSearchString);\n    };\n    QueryableString.prototype.contains = function (searchString) {\n        return (this.str.indexOf(searchString) !== -1);\n    };\n    QueryableString.prototype.equals = function (compareString) {\n        return this.str === compareString;\n    };\n    QueryableString.prototype.value = function () {\n        return this.str;\n    };\n    return QueryableString;\n}());\nexports.QueryableString = QueryableString;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/queryable_string.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar serialization_1 = require(\"../utils/serialization\");\nvar target_1 = require(\"./target\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nfunction getDependencies(metadataReader, func) {\n    var constructorName = serialization_1.getFunctionName(func);\n    var targets = getTargets(metadataReader, constructorName, func, false);\n    return targets;\n}\nexports.getDependencies = getDependencies;\nfunction getTargets(metadataReader, constructorName, func, isBaseClass) {\n    var metadata = metadataReader.getConstructorMetadata(func);\n    var serviceIdentifiers = metadata.compilerGeneratedMetadata;\n    if (serviceIdentifiers === undefined) {\n        var msg = ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION + \" \" + constructorName + \".\";\n        throw new Error(msg);\n    }\n    var constructorArgsMetadata = metadata.userGeneratedMetadata;\n    var keys = Object.keys(constructorArgsMetadata);\n    var hasUserDeclaredUnknownInjections = (func.length === 0 && keys.length > 0);\n    var iterations = (hasUserDeclaredUnknownInjections) ? keys.length : func.length;\n    var constructorTargets = getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations);\n    var propertyTargets = getClassPropsAsTargets(metadataReader, func);\n    var targets = constructorTargets.concat(propertyTargets);\n    var baseClassDependencyCount = getBaseClassDependencyCount(metadataReader, func);\n    if (targets.length < baseClassDependencyCount) {\n        var error = ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH_1 +\n            constructorName + ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH_2;\n        throw new Error(error);\n    }\n    return targets;\n}\nfunction getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata) {\n    var targetMetadata = constructorArgsMetadata[index.toString()] || [];\n    var metadata = formatTargetMetadata(targetMetadata);\n    var isManaged = metadata.unmanaged !== true;\n    var serviceIdentifier = serviceIdentifiers[index];\n    var injectIdentifier = (metadata.inject || metadata.multiInject);\n    serviceIdentifier = (injectIdentifier) ? (injectIdentifier) : serviceIdentifier;\n    if (isManaged === true) {\n        var isObject = serviceIdentifier === Object;\n        var isFunction = serviceIdentifier === Function;\n        var isUndefined = serviceIdentifier === undefined;\n        var isUnknownType = (isObject || isFunction || isUndefined);\n        if (isBaseClass === false && isUnknownType) {\n            var msg = ERROR_MSGS.MISSING_INJECT_ANNOTATION + \" argument \" + index + \" in class \" + constructorName + \".\";\n            throw new Error(msg);\n        }\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ConstructorArgument, metadata.targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        return target;\n    }\n    return null;\n}\nfunction getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations) {\n    var targets = [];\n    for (var i = 0; i < iterations; i++) {\n        var index = i;\n        var target = getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata);\n        if (target !== null) {\n            targets.push(target);\n        }\n    }\n    return targets;\n}\nfunction getClassPropsAsTargets(metadataReader, constructorFunc) {\n    var classPropsMetadata = metadataReader.getPropertiesMetadata(constructorFunc);\n    var targets = [];\n    var keys = Object.keys(classPropsMetadata);\n    for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        var targetMetadata = classPropsMetadata[key];\n        var metadata = formatTargetMetadata(classPropsMetadata[key]);\n        var targetName = metadata.targetName || key;\n        var serviceIdentifier = (metadata.inject || metadata.multiInject);\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ClassProperty, targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        targets.push(target);\n    }\n    var baseConstructor = Object.getPrototypeOf(constructorFunc.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseTargets = getClassPropsAsTargets(metadataReader, baseConstructor);\n        targets = targets.concat(baseTargets);\n    }\n    return targets;\n}\nfunction getBaseClassDependencyCount(metadataReader, func) {\n    var baseConstructor = Object.getPrototypeOf(func.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseConstructorName = serialization_1.getFunctionName(baseConstructor);\n        var targets = getTargets(metadataReader, baseConstructorName, baseConstructor, true);\n        var metadata = targets.map(function (t) {\n            return t.metadata.filter(function (m) {\n                return m.key === METADATA_KEY.UNMANAGED_TAG;\n            });\n        });\n        var unmanagedCount = [].concat.apply([], metadata).length;\n        var dependencyCount = targets.length - unmanagedCount;\n        if (dependencyCount > 0) {\n            return dependencyCount;\n        }\n        else {\n            return getBaseClassDependencyCount(metadataReader, baseConstructor);\n        }\n    }\n    else {\n        return 0;\n    }\n}\nfunction formatTargetMetadata(targetMetadata) {\n    var targetMetadataMap = {};\n    targetMetadata.forEach(function (m) {\n        targetMetadataMap[m.key.toString()] = m.value;\n    });\n    return {\n        inject: targetMetadataMap[METADATA_KEY.INJECT_TAG],\n        multiInject: targetMetadataMap[METADATA_KEY.MULTI_INJECT_TAG],\n        targetName: targetMetadataMap[METADATA_KEY.NAME_TAG],\n        unmanaged: targetMetadataMap[METADATA_KEY.UNMANAGED_TAG]\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/reflection_utils.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar guid_1 = require(\"../utils/guid\");\nvar Request = (function () {\n    function Request(serviceIdentifier, parentContext, parentRequest, bindings, target) {\n        this.guid = guid_1.guid();\n        this.serviceIdentifier = serviceIdentifier;\n        this.parentContext = parentContext;\n        this.parentRequest = parentRequest;\n        this.target = target;\n        this.childRequests = [];\n        this.bindings = (Array.isArray(bindings) ? bindings : [bindings]);\n    }\n    Request.prototype.addChildRequest = function (serviceIdentifier, bindings, target) {\n        var child = new Request(serviceIdentifier, this.parentContext, this, bindings, target);\n        this.childRequests.push(child);\n        return child;\n    };\n    return Request;\n}());\nexports.Request = Request;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/planning/request.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar error_msgs_1 = require(\"../constants/error_msgs\");\nfunction _injectProperties(instance, childRequests, resolveRequest) {\n    var propertyInjectionsRequests = childRequests.filter(function (childRequest) {\n        return (childRequest.target !== null && childRequest.target.type === literal_types_1.TargetTypeEnum.ClassProperty);\n    });\n    var propertyInjections = propertyInjectionsRequests.map(function (childRequest) {\n        return resolveRequest(childRequest);\n    });\n    propertyInjectionsRequests.forEach(function (r, index) {\n        var propertyName = \"\";\n        propertyName = r.target.name.value();\n        var injection = propertyInjections[index];\n        instance[propertyName] = injection;\n    });\n    return instance;\n}\nfunction _createInstance(Func, injections) {\n    return new (Func.bind.apply(Func, [void 0].concat(injections)))();\n}\nfunction _postConstruct(constr, result) {\n    if (Reflect.hasMetadata(METADATA_KEY.POST_CONSTRUCT, constr)) {\n        var data = Reflect.getMetadata(METADATA_KEY.POST_CONSTRUCT, constr);\n        try {\n            result[data.value]();\n        }\n        catch (e) {\n            throw new Error(error_msgs_1.POST_CONSTRUCT_ERROR(constr.name, e.message));\n        }\n    }\n}\nfunction resolveInstance(constr, childRequests, resolveRequest) {\n    var result = null;\n    if (childRequests.length > 0) {\n        var constructorInjectionsRequests = childRequests.filter(function (childRequest) {\n            return (childRequest.target !== null && childRequest.target.type === literal_types_1.TargetTypeEnum.ConstructorArgument);\n        });\n        var constructorInjections = constructorInjectionsRequests.map(function (childRequest) {\n            return resolveRequest(childRequest);\n        });\n        result = _createInstance(constr, constructorInjections);\n        result = _injectProperties(result, childRequests, resolveRequest);\n    }\n    else {\n        result = new constr();\n    }\n    _postConstruct(constr, result);\n    return result;\n}\nexports.resolveInstance = resolveInstance;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/resolution/instantiation.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar instantiation_1 = require(\"./instantiation\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction _resolveRequest(request) {\n    var bindings = request.bindings;\n    var childRequests = request.childRequests;\n    var targetIsAnArray = request.target && request.target.isArray();\n    var targetParentIsNotAnArray = !request.parentRequest ||\n        !request.parentRequest.target ||\n        !request.target ||\n        !request.parentRequest.target.matchesArray(request.target.serviceIdentifier);\n    if (targetIsAnArray && targetParentIsNotAnArray) {\n        return childRequests.map(function (childRequest) {\n            return _resolveRequest(childRequest);\n        });\n    }\n    else {\n        var result = null;\n        if (request.target.isOptional() === true && bindings.length === 0) {\n            return undefined;\n        }\n        var binding = bindings[0];\n        var isSingleton = binding.scope === literal_types_1.BindingScopeEnum.Singleton;\n        if (isSingleton && binding.activated === true) {\n            return binding.cache;\n        }\n        if (binding.type === literal_types_1.BindingTypeEnum.ConstantValue) {\n            result = binding.cache;\n        }\n        else if (binding.type === literal_types_1.BindingTypeEnum.Function) {\n            result = binding.cache;\n        }\n        else if (binding.type === literal_types_1.BindingTypeEnum.Constructor) {\n            result = binding.implementationType;\n        }\n        else if (binding.type === literal_types_1.BindingTypeEnum.DynamicValue && binding.dynamicValue !== null) {\n            result = binding.dynamicValue(request.parentContext);\n        }\n        else if (binding.type === literal_types_1.BindingTypeEnum.Factory && binding.factory !== null) {\n            result = binding.factory(request.parentContext);\n        }\n        else if (binding.type === literal_types_1.BindingTypeEnum.Provider && binding.provider !== null) {\n            result = binding.provider(request.parentContext);\n        }\n        else if (binding.type === literal_types_1.BindingTypeEnum.Instance && binding.implementationType !== null) {\n            result = instantiation_1.resolveInstance(binding.implementationType, childRequests, _resolveRequest);\n        }\n        else {\n            var serviceIdentifier = serialization_1.getServiceIdentifierAsString(request.serviceIdentifier);\n            throw new Error(ERROR_MSGS.INVALID_BINDING_TYPE + \" \" + serviceIdentifier);\n        }\n        if (typeof binding.onActivation === \"function\") {\n            result = binding.onActivation(request.parentContext, result);\n        }\n        if (isSingleton) {\n            binding.cache = result;\n            binding.activated = true;\n        }\n        return result;\n    }\n}\nfunction resolve(context) {\n    return _resolveRequest(context.plan.rootRequest);\n}\nexports.resolve = resolve;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/resolution/resolver.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar BindingInSyntax = (function () {\n    function BindingInSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingInSyntax.prototype.inSingletonScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inTransientScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Transient;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    return BindingInSyntax;\n}());\nexports.BindingInSyntax = BindingInSyntax;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/binding_in_syntax.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_in_syntax_1 = require(\"./binding_in_syntax\");\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar BindingInWhenOnSyntax = (function () {\n    function BindingInWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n        this._bindingInSyntax = new binding_in_syntax_1.BindingInSyntax(binding);\n    }\n    BindingInWhenOnSyntax.prototype.inSingletonScope = function () {\n        return this._bindingInSyntax.inSingletonScope();\n    };\n    BindingInWhenOnSyntax.prototype.inTransientScope = function () {\n        return this._bindingInSyntax.inTransientScope();\n    };\n    BindingInWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingInWhenOnSyntax;\n}());\nexports.BindingInWhenOnSyntax = BindingInWhenOnSyntax;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/binding_in_when_on_syntax.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_in_when_on_syntax_1 = require(\"./binding_in_when_on_syntax\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar BindingToSyntax = (function () {\n    function BindingToSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingToSyntax.prototype.to = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Instance;\n        this._binding.implementationType = constructor;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toSelf = function () {\n        if (typeof this._binding.serviceIdentifier !== \"function\") {\n            throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\n        }\n        var self = this._binding.serviceIdentifier;\n        return this.to(self);\n    };\n    BindingToSyntax.prototype.toConstantValue = function (value) {\n        this._binding.type = literal_types_1.BindingTypeEnum.ConstantValue;\n        this._binding.cache = value;\n        this._binding.dynamicValue = null;\n        this._binding.implementationType = null;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toDynamicValue = function (func) {\n        this._binding.type = literal_types_1.BindingTypeEnum.DynamicValue;\n        this._binding.cache = null;\n        this._binding.dynamicValue = func;\n        this._binding.implementationType = null;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toConstructor = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Constructor;\n        this._binding.implementationType = constructor;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFactory = function (factory) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = factory;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFunction = function (func) {\n        if (typeof func !== \"function\") {\n            throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\n        }\n        var bindingWhenOnSyntax = this.toConstantValue(func);\n        this._binding.type = literal_types_1.BindingTypeEnum.Function;\n        return bindingWhenOnSyntax;\n    };\n    BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = function (context) {\n            return function () {\n                return context.container.get(serviceIdentifier);\n            };\n        };\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toProvider = function (provider) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Provider;\n        this._binding.provider = provider;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    return BindingToSyntax;\n}());\nexports.BindingToSyntax = BindingToSyntax;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/syntax/binding_to_syntax.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction template(strings) {\n    var keys = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        keys[_i - 1] = arguments[_i];\n    }\n    return (function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            values[_i] = arguments[_i];\n        }\n        var result = [strings[0]];\n        keys.forEach(function (key, i) {\n            var value = Number.isInteger(key) ? values[key] : values[keys.indexOf(key)];\n            result.push(value, strings[i + 1]);\n        });\n        return result.join(\"\");\n    });\n}\nexports.template = template;\n\n\n\n// WEBPACK FOOTER //\n// ./~/inversify/lib/utils/template.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (html) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n\n    var context = options.context || document;\n\n    // If there's nothing here, return null;\n    if (!html) {\n        return null;\n    }\n\n    // Maintain a list of created vnodes so we can call the create hook.\n    var createdVNodes = [];\n\n    // Parse the string into the AST and convert to VNodes.\n    var vnodes = convertNodes((0, _parse2.default)(html), createdVNodes, context);\n\n    var res = void 0;\n    if (!vnodes) {\n        // If there are no vnodes but there is string content, then the string\n        // must be just text or at least invalid HTML that we should treat as\n        // text (since the AST parser didn't find any well-formed HTML).\n        res = toVNode({ type: 'text', content: html }, createdVNodes, context);\n    } else if (vnodes.length === 1) {\n        // If there's only one root node, just return it as opposed to an array.\n        res = vnodes[0];\n    } else {\n        // Otherwise we have an array of VNodes, which we should return.\n        res = vnodes;\n    }\n\n    // Call the 'create' hook for each created node.\n    options.hooks && options.hooks.create && createdVNodes.forEach(function (node) {\n        options.hooks.create(node);\n    });\n    return res;\n};\n\nvar _parse = require('html-parse-stringify2/lib/parse');\n\nvar _parse2 = _interopRequireDefault(_parse);\n\nvar _h = require('snabbdom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction convertNodes(nodes, createdVNodes, context) {\n    if (nodes instanceof Array && nodes.length > 0) {\n        return nodes.map(function (node) {\n            return toVNode(node, createdVNodes, context);\n        });\n    } else {\n        return undefined;\n    }\n}\n\nfunction toVNode(node, createdVNodes, context) {\n    var newNode = void 0;\n    if (node.type === 'text') {\n        newNode = (0, _utils.createTextVNode)(node.content, context);\n    } else {\n        newNode = (0, _h2.default)(node.name, buildVNodeData(node, context), convertNodes(node.children, createdVNodes, context));\n    }\n    createdVNodes.push(newNode);\n    return newNode;\n}\n\nfunction buildVNodeData(node, context) {\n    var data = {};\n    if (!node.attrs) {\n        return data;\n    }\n\n    var attrs = Object.keys(node.attrs).reduce(function (memo, name) {\n        if (name !== 'style' && name !== 'class') {\n            var val = (0, _utils.unescapeEntities)(node.attrs[name], context);\n            memo ? memo[name] = val : memo = _defineProperty({}, name, val);\n        }\n        return memo;\n    }, null);\n    if (attrs) {\n        data.attrs = attrs;\n    }\n\n    var style = parseStyle(node);\n    if (style) {\n        data.style = style;\n    }\n\n    var classes = parseClass(node);\n    if (classes) {\n        data.class = classes;\n    }\n\n    return data;\n}\n\nfunction parseStyle(node) {\n    try {\n        return node.attrs.style.split(';').reduce(function (memo, styleProp) {\n            var res = styleProp.split(':');\n            var name = (0, _utils.transformName)(res[0].trim());\n            if (name) {\n                var val = res[1].replace('!important', '').trim();\n                memo ? memo[name] = val : memo = _defineProperty({}, name, val);\n            }\n            return memo;\n        }, null);\n    } catch (e) {\n        return null;\n    }\n}\n\nfunction parseClass(node) {\n    try {\n        return node.attrs.class.split(' ').reduce(function (memo, className) {\n            className = className.trim();\n            if (className) {\n                memo ? memo[className] = true : memo = _defineProperty({}, className, true);\n            }\n            return memo;\n        }, null);\n    } catch (e) {\n        return null;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom-virtualize/lib/strings.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.createTextVNode = createTextVNode;\nexports.transformName = transformName;\nexports.unescapeEntities = unescapeEntities;\n\nvar _vnode = require('snabbdom/vnode');\n\nvar _vnode2 = _interopRequireDefault(_vnode);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createTextVNode(text, context) {\n    return (0, _vnode2.default)(undefined, undefined, undefined, unescapeEntities(text, context));\n}\n\nfunction transformName(name) {\n    // Replace -a with A to help camel case style property names.\n    name = name.replace(/-(\\w)/g, function _replace($1, $2) {\n        return $2.toUpperCase();\n    });\n    // Handle properties that start with a -.\n    var firstChar = name.charAt(0).toLowerCase();\n    return '' + firstChar + name.substring(1);\n}\n\n// Regex for matching HTML entities.\nvar entityRegex = new RegExp('&[a-z0-9#]+;', 'gi');\n// Element for setting innerHTML for transforming entities.\nvar el = null;\n\nfunction unescapeEntities(text, context) {\n    // Create the element using the context if it doesn't exist.\n    if (!el) {\n        el = context.createElement('div');\n    }\n    return text.replace(entityRegex, function (entity) {\n        el.innerHTML = entity;\n        return el.textContent;\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom-virtualize/lib/utils.js","module.exports = require('./lib/strings');\n\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom-virtualize/strings.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction createElement(tagName) {\n    return document.createElement(tagName);\n}\nfunction createElementNS(namespaceURI, qualifiedName) {\n    return document.createElementNS(namespaceURI, qualifiedName);\n}\nfunction createTextNode(text) {\n    return document.createTextNode(text);\n}\nfunction createComment(text) {\n    return document.createComment(text);\n}\nfunction insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n}\nfunction removeChild(node, child) {\n    node.removeChild(child);\n}\nfunction appendChild(node, child) {\n    node.appendChild(child);\n}\nfunction parentNode(node) {\n    return node.parentNode;\n}\nfunction nextSibling(node) {\n    return node.nextSibling;\n}\nfunction tagName(elm) {\n    return elm.tagName;\n}\nfunction setTextContent(node, text) {\n    node.textContent = text;\n}\nfunction getTextContent(node) {\n    return node.textContent;\n}\nfunction isElement(node) {\n    return node.nodeType === 1;\n}\nfunction isText(node) {\n    return node.nodeType === 3;\n}\nfunction isComment(node) {\n    return node.nodeType === 8;\n}\nexports.htmlDomApi = {\n    createElement: createElement,\n    createElementNS: createElementNS,\n    createTextNode: createTextNode,\n    createComment: createComment,\n    insertBefore: insertBefore,\n    removeChild: removeChild,\n    appendChild: appendChild,\n    parentNode: parentNode,\n    nextSibling: nextSibling,\n    tagName: tagName,\n    setTextContent: setTextContent,\n    getTextContent: getTextContent,\n    isElement: isElement,\n    isText: isText,\n    isComment: isComment,\n};\nexports.default = exports.htmlDomApi;\n//# sourceMappingURL=htmldomapi.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/htmldomapi.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar xlinkNS = 'http://www.w3.org/1999/xlink';\nvar xmlNS = 'http://www.w3.org/XML/1998/namespace';\nvar colonChar = 58;\nvar xChar = 120;\nfunction updateAttrs(oldVnode, vnode) {\n    var key, elm = vnode.elm, oldAttrs = oldVnode.data.attrs, attrs = vnode.data.attrs;\n    if (!oldAttrs && !attrs)\n        return;\n    if (oldAttrs === attrs)\n        return;\n    oldAttrs = oldAttrs || {};\n    attrs = attrs || {};\n    // update modified attributes, add new attributes\n    for (key in attrs) {\n        var cur = attrs[key];\n        var old = oldAttrs[key];\n        if (old !== cur) {\n            if (cur === true) {\n                elm.setAttribute(key, \"\");\n            }\n            else if (cur === false) {\n                elm.removeAttribute(key);\n            }\n            else {\n                if (key.charCodeAt(0) !== xChar) {\n                    elm.setAttribute(key, cur);\n                }\n                else if (key.charCodeAt(3) === colonChar) {\n                    // Assume xml namespace\n                    elm.setAttributeNS(xmlNS, key, cur);\n                }\n                else if (key.charCodeAt(5) === colonChar) {\n                    // Assume xlink namespace\n                    elm.setAttributeNS(xlinkNS, key, cur);\n                }\n                else {\n                    elm.setAttribute(key, cur);\n                }\n            }\n        }\n    }\n    // remove removed attributes\n    // use `in` operator since the previous `for` iteration uses it (.i.e. add even attributes with undefined value)\n    // the other option is to remove all attributes with value == undefined\n    for (key in oldAttrs) {\n        if (!(key in attrs)) {\n            elm.removeAttribute(key);\n        }\n    }\n}\nexports.attributesModule = { create: updateAttrs, update: updateAttrs };\nexports.default = exports.attributesModule;\n//# sourceMappingURL=attributes.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/modules/attributes.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction updateClass(oldVnode, vnode) {\n    var cur, name, elm = vnode.elm, oldClass = oldVnode.data.class, klass = vnode.data.class;\n    if (!oldClass && !klass)\n        return;\n    if (oldClass === klass)\n        return;\n    oldClass = oldClass || {};\n    klass = klass || {};\n    for (name in oldClass) {\n        if (!klass[name]) {\n            elm.classList.remove(name);\n        }\n    }\n    for (name in klass) {\n        cur = klass[name];\n        if (cur !== oldClass[name]) {\n            elm.classList[cur ? 'add' : 'remove'](name);\n        }\n    }\n}\nexports.classModule = { create: updateClass, update: updateClass };\nexports.default = exports.classModule;\n//# sourceMappingURL=class.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/modules/class.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction invokeHandler(handler, vnode, event) {\n    if (typeof handler === \"function\") {\n        // call function handler\n        handler.call(vnode, event, vnode);\n    }\n    else if (typeof handler === \"object\") {\n        // call handler with arguments\n        if (typeof handler[0] === \"function\") {\n            // special case for single argument for performance\n            if (handler.length === 2) {\n                handler[0].call(vnode, handler[1], event, vnode);\n            }\n            else {\n                var args = handler.slice(1);\n                args.push(event);\n                args.push(vnode);\n                handler[0].apply(vnode, args);\n            }\n        }\n        else {\n            // call multiple handlers\n            for (var i = 0; i < handler.length; i++) {\n                invokeHandler(handler[i]);\n            }\n        }\n    }\n}\nfunction handleEvent(event, vnode) {\n    var name = event.type, on = vnode.data.on;\n    // call event handler(s) if exists\n    if (on && on[name]) {\n        invokeHandler(on[name], vnode, event);\n    }\n}\nfunction createListener() {\n    return function handler(event) {\n        handleEvent(event, handler.vnode);\n    };\n}\nfunction updateEventListeners(oldVnode, vnode) {\n    var oldOn = oldVnode.data.on, oldListener = oldVnode.listener, oldElm = oldVnode.elm, on = vnode && vnode.data.on, elm = (vnode && vnode.elm), name;\n    // optimization for reused immutable handlers\n    if (oldOn === on) {\n        return;\n    }\n    // remove existing listeners which no longer used\n    if (oldOn && oldListener) {\n        // if element changed or deleted we remove all existing listeners unconditionally\n        if (!on) {\n            for (name in oldOn) {\n                // remove listener if element was changed or existing listeners removed\n                oldElm.removeEventListener(name, oldListener, false);\n            }\n        }\n        else {\n            for (name in oldOn) {\n                // remove listener if existing listener removed\n                if (!on[name]) {\n                    oldElm.removeEventListener(name, oldListener, false);\n                }\n            }\n        }\n    }\n    // add new listeners which has not already attached\n    if (on) {\n        // reuse existing listener or create new\n        var listener = vnode.listener = oldVnode.listener || createListener();\n        // update vnode for listener\n        listener.vnode = vnode;\n        // if element changed or added we add all needed listeners unconditionally\n        if (!oldOn) {\n            for (name in on) {\n                // add listener if element was changed or new listeners added\n                elm.addEventListener(name, listener, false);\n            }\n        }\n        else {\n            for (name in on) {\n                // add listener if new listener added\n                if (!oldOn[name]) {\n                    elm.addEventListener(name, listener, false);\n                }\n            }\n        }\n    }\n}\nexports.eventListenersModule = {\n    create: updateEventListeners,\n    update: updateEventListeners,\n    destroy: updateEventListeners\n};\nexports.default = exports.eventListenersModule;\n//# sourceMappingURL=eventlisteners.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/modules/eventlisteners.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction updateProps(oldVnode, vnode) {\n    var key, cur, old, elm = vnode.elm, oldProps = oldVnode.data.props, props = vnode.data.props;\n    if (!oldProps && !props)\n        return;\n    if (oldProps === props)\n        return;\n    oldProps = oldProps || {};\n    props = props || {};\n    for (key in oldProps) {\n        if (!props[key]) {\n            delete elm[key];\n        }\n    }\n    for (key in props) {\n        cur = props[key];\n        old = oldProps[key];\n        if (old !== cur && (key !== 'value' || elm[key] !== cur)) {\n            elm[key] = cur;\n        }\n    }\n}\nexports.propsModule = { create: updateProps, update: updateProps };\nexports.default = exports.propsModule;\n//# sourceMappingURL=props.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/modules/props.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar raf = (typeof window !== 'undefined' && window.requestAnimationFrame) || setTimeout;\nvar nextFrame = function (fn) { raf(function () { raf(fn); }); };\nfunction setNextFrame(obj, prop, val) {\n    nextFrame(function () { obj[prop] = val; });\n}\nfunction updateStyle(oldVnode, vnode) {\n    var cur, name, elm = vnode.elm, oldStyle = oldVnode.data.style, style = vnode.data.style;\n    if (!oldStyle && !style)\n        return;\n    if (oldStyle === style)\n        return;\n    oldStyle = oldStyle || {};\n    style = style || {};\n    var oldHasDel = 'delayed' in oldStyle;\n    for (name in oldStyle) {\n        if (!style[name]) {\n            if (name[0] === '-' && name[1] === '-') {\n                elm.style.removeProperty(name);\n            }\n            else {\n                elm.style[name] = '';\n            }\n        }\n    }\n    for (name in style) {\n        cur = style[name];\n        if (name === 'delayed' && style.delayed) {\n            for (var name2 in style.delayed) {\n                cur = style.delayed[name2];\n                if (!oldHasDel || cur !== oldStyle.delayed[name2]) {\n                    setNextFrame(elm.style, name2, cur);\n                }\n            }\n        }\n        else if (name !== 'remove' && cur !== oldStyle[name]) {\n            if (name[0] === '-' && name[1] === '-') {\n                elm.style.setProperty(name, cur);\n            }\n            else {\n                elm.style[name] = cur;\n            }\n        }\n    }\n}\nfunction applyDestroyStyle(vnode) {\n    var style, name, elm = vnode.elm, s = vnode.data.style;\n    if (!s || !(style = s.destroy))\n        return;\n    for (name in style) {\n        elm.style[name] = style[name];\n    }\n}\nfunction applyRemoveStyle(vnode, rm) {\n    var s = vnode.data.style;\n    if (!s || !s.remove) {\n        rm();\n        return;\n    }\n    var name, elm = vnode.elm, i = 0, compStyle, style = s.remove, amount = 0, applied = [];\n    for (name in style) {\n        applied.push(name);\n        elm.style[name] = style[name];\n    }\n    compStyle = getComputedStyle(elm);\n    var props = compStyle['transition-property'].split(', ');\n    for (; i < props.length; ++i) {\n        if (applied.indexOf(props[i]) !== -1)\n            amount++;\n    }\n    elm.addEventListener('transitionend', function (ev) {\n        if (ev.target === elm)\n            --amount;\n        if (amount === 0)\n            rm();\n    });\n}\nexports.styleModule = {\n    create: updateStyle,\n    update: updateStyle,\n    destroy: applyDestroyStyle,\n    remove: applyRemoveStyle\n};\nexports.default = exports.styleModule;\n//# sourceMappingURL=style.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/modules/style.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar h_1 = require(\"./h\");\nfunction copyToThunk(vnode, thunk) {\n    thunk.elm = vnode.elm;\n    vnode.data.fn = thunk.data.fn;\n    vnode.data.args = thunk.data.args;\n    thunk.data = vnode.data;\n    thunk.children = vnode.children;\n    thunk.text = vnode.text;\n    thunk.elm = vnode.elm;\n}\nfunction init(thunk) {\n    var cur = thunk.data;\n    var vnode = cur.fn.apply(undefined, cur.args);\n    copyToThunk(vnode, thunk);\n}\nfunction prepatch(oldVnode, thunk) {\n    var i, old = oldVnode.data, cur = thunk.data;\n    var oldArgs = old.args, args = cur.args;\n    if (old.fn !== cur.fn || oldArgs.length !== args.length) {\n        copyToThunk(cur.fn.apply(undefined, args), thunk);\n        return;\n    }\n    for (i = 0; i < args.length; ++i) {\n        if (oldArgs[i] !== args[i]) {\n            copyToThunk(cur.fn.apply(undefined, args), thunk);\n            return;\n        }\n    }\n    copyToThunk(oldVnode, thunk);\n}\nexports.thunk = function thunk(sel, key, fn, args) {\n    if (args === undefined) {\n        args = fn;\n        fn = key;\n        key = undefined;\n    }\n    return h_1.h(sel, {\n        key: key,\n        hook: { init: init, prepatch: prepatch },\n        fn: fn,\n        args: args\n    });\n};\nexports.default = exports.thunk;\n//# sourceMappingURL=thunk.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/snabbdom/thunk.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../types\");\nfunction overrideCommandStackOptions(container, options) {\n    var defaultOptions = container.get(types_1.TYPES.CommandStackOptions);\n    for (var p in options) {\n        if (options.hasOwnProperty(p))\n            defaultOptions[p] = options[p];\n    }\n    return defaultOptions;\n}\nexports.overrideCommandStackOptions = overrideCommandStackOptions;\n//# sourceMappingURL=command-stack-options.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/commands/command-stack-options.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_storage_1 = require(\"./model/smodel-storage\");\nvar types_1 = require(\"./types\");\nvar initialize_canvas_1 = require(\"./features/initialize-canvas\");\nvar logging_1 = require(\"../utils/logging\");\nvar action_dispatcher_1 = require(\"./actions/action-dispatcher\");\nvar action_handler_1 = require(\"./actions/action-handler\");\nvar command_stack_1 = require(\"./commands/command-stack\");\nvar smodel_factory_1 = require(\"./model/smodel-factory\");\nvar animation_frame_syncer_1 = require(\"./animations/animation-frame-syncer\");\nvar viewer_1 = require(\"./views/viewer\");\nvar viewer_options_1 = require(\"./views/viewer-options\");\nvar mouse_tool_1 = require(\"./views/mouse-tool\");\nvar key_tool_1 = require(\"./views/key-tool\");\nvar vnode_decorators_1 = require(\"./views/vnode-decorators\");\nvar view_1 = require(\"./views/view\");\nvar viewer_cache_1 = require(\"./views/viewer-cache\");\nvar dom_helper_1 = require(\"./views/dom-helper\");\nvar id_decorator_1 = require(\"./views/id-decorator\");\nvar command_1 = require(\"./commands/command\");\nvar defaultContainerModule = new inversify_1.ContainerModule(function (bind) {\n    // Logging ---------------------------------------------\n    bind(types_1.TYPES.ILogger).to(logging_1.NullLogger).inSingletonScope();\n    bind(types_1.TYPES.LogLevel).toConstantValue(logging_1.LogLevel.warn);\n    // Registries ---------------------------------------------\n    bind(types_1.TYPES.SModelRegistry).to(smodel_factory_1.SModelRegistry).inSingletonScope();\n    bind(types_1.TYPES.ActionHandlerRegistry).to(action_handler_1.ActionHandlerRegistry).inSingletonScope();\n    bind(types_1.TYPES.ViewRegistry).to(view_1.ViewRegistry).inSingletonScope();\n    // Model Creation ---------------------------------------------\n    bind(types_1.TYPES.IModelFactory).to(smodel_factory_1.SModelFactory).inSingletonScope();\n    // Action Dispatcher ---------------------------------------------\n    bind(types_1.TYPES.IActionDispatcher).to(action_dispatcher_1.ActionDispatcher).inSingletonScope();\n    bind(types_1.TYPES.IActionDispatcherProvider).toProvider(function (context) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(context.container.get(types_1.TYPES.IActionDispatcher));\n            });\n        };\n    });\n    // Action handler\n    bind(types_1.TYPES.IActionHandlerInitializer).to(command_1.CommandActionHandlerInitializer);\n    // Command Stack ---------------------------------------------\n    bind(types_1.TYPES.ICommandStack).to(command_stack_1.CommandStack).inSingletonScope();\n    bind(types_1.TYPES.ICommandStackProvider).toProvider(function (context) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(context.container.get(types_1.TYPES.ICommandStack));\n            });\n        };\n    });\n    bind(types_1.TYPES.CommandStackOptions).toConstantValue({\n        defaultDuration: 250,\n        undoHistoryLimit: 50\n    });\n    // Viewer ---------------------------------------------\n    bind(viewer_1.Viewer).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IViewer).toDynamicValue(function (context) {\n        return context.container.get(viewer_1.Viewer);\n    }).inSingletonScope().whenTargetNamed('delegate');\n    bind(viewer_cache_1.ViewerCache).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IViewer).toDynamicValue(function (context) {\n        return context.container.get(viewer_cache_1.ViewerCache);\n    }).inSingletonScope().whenTargetIsDefault();\n    bind(types_1.TYPES.IViewerProvider).toProvider(function (context) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(context.container.get(types_1.TYPES.IViewer));\n            });\n        };\n    });\n    bind(types_1.TYPES.ViewerOptions).toConstantValue(viewer_options_1.defaultViewerOptions());\n    bind(types_1.TYPES.DOMHelper).to(dom_helper_1.DOMHelper).inSingletonScope();\n    bind(types_1.TYPES.ModelRendererFactory).toFactory(function (context) {\n        return function (decorators) {\n            var viewRegistry = context.container.get(types_1.TYPES.ViewRegistry);\n            return new viewer_1.ModelRenderer(viewRegistry, decorators);\n        };\n    });\n    // Tools & Decorators --------------------------------------\n    bind(id_decorator_1.IdDecorator).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(id_decorator_1.IdDecorator);\n    }).inSingletonScope();\n    bind(mouse_tool_1.MouseTool).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(mouse_tool_1.MouseTool);\n    }).inSingletonScope();\n    bind(key_tool_1.KeyTool).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(key_tool_1.KeyTool);\n    }).inSingletonScope();\n    bind(vnode_decorators_1.FocusFixDecorator).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(vnode_decorators_1.FocusFixDecorator);\n    }).inSingletonScope();\n    bind(types_1.TYPES.PopupVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(id_decorator_1.IdDecorator);\n    }).inSingletonScope();\n    bind(mouse_tool_1.PopupMouseTool).toSelf().inSingletonScope();\n    bind(types_1.TYPES.PopupVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(mouse_tool_1.PopupMouseTool);\n    }).inSingletonScope();\n    bind(types_1.TYPES.HiddenVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(id_decorator_1.IdDecorator);\n    }).inSingletonScope();\n    // Animation Frame Sync ------------------------------------------\n    bind(types_1.TYPES.AnimationFrameSyncer).to(animation_frame_syncer_1.AnimationFrameSyncer).inSingletonScope();\n    // Canvas Initialization ---------------------------------------------\n    bind(types_1.TYPES.ICommand).toConstructor(initialize_canvas_1.InitializeCanvasBoundsCommand);\n    bind(initialize_canvas_1.CanvasBoundsInitializer).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodeDecorator).toDynamicValue(function (context) {\n        return context.container.get(initialize_canvas_1.CanvasBoundsInitializer);\n    }).inSingletonScope();\n    bind(types_1.TYPES.SModelStorage).to(smodel_storage_1.SModelStorage).inSingletonScope();\n});\nexports.default = defaultContainerModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar dom_helper_1 = require(\"./dom-helper\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar IdDecorator = /** @class */ (function () {\n    function IdDecorator(logger, domHelper) {\n        this.logger = logger;\n        this.domHelper = domHelper;\n    }\n    IdDecorator.prototype.decorate = function (vnode, element) {\n        var attrs = vnode_utils_1.getAttrs(vnode);\n        if (attrs.id !== undefined)\n            this.logger.warn(vnode, 'Overriding id of vnode (' + attrs.id + '). Make sure not to set it manually in view.');\n        attrs.id = this.domHelper.createUniqueDOMElementId(element);\n        if (!vnode.key)\n            vnode.key = element.id;\n        return vnode;\n    };\n    IdDecorator.prototype.postUpdate = function () {\n    };\n    IdDecorator = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ILogger)),\n        __param(1, inversify_1.inject(types_1.TYPES.DOMHelper)),\n        __metadata(\"design:paramtypes\", [Object, dom_helper_1.DOMHelper])\n    ], IdDecorator);\n    return IdDecorator;\n}());\nexports.IdDecorator = IdDecorator;\n//# sourceMappingURL=id-decorator.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/base/views/id-decorator.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar bounds_manipulation_1 = require(\"./bounds-manipulation\");\nvar hidden_bounds_updater_1 = require(\"./hidden-bounds-updater\");\nvar layout_1 = require(\"./layout\");\nvar boundsModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.ICommand).toConstructor(bounds_manipulation_1.SetBoundsCommand);\n    bind(types_1.TYPES.ICommand).toConstructor(bounds_manipulation_1.RequestBoundsCommand);\n    bind(types_1.TYPES.HiddenVNodeDecorator).to(hidden_bounds_updater_1.HiddenBoundsUpdater).inSingletonScope();\n    bind(types_1.TYPES.Layouter).to(layout_1.Layouter).inSingletonScope();\n    bind(types_1.TYPES.LayoutRegistry).to(layout_1.LayoutRegistry).inSingletonScope();\n});\nexports.default = boundsModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar bounds_manipulation_1 = require(\"./bounds-manipulation\");\nvar model_1 = require(\"./model\");\nvar layout_1 = require(\"./layout\");\nvar model_2 = require(\"../export/model\");\nvar BoundsData = /** @class */ (function () {\n    function BoundsData() {\n    }\n    return BoundsData;\n}());\nexports.BoundsData = BoundsData;\n/**\n * Grabs the bounds from hidden SVG DOM elements, applies layouts and fires\n * ComputedBoundsActions.\n *\n * The actual bounds of an element can usually not be determined from the SModel\n * as they depend on the view implementation and CSS stylings. So the best way is\n * to grab them from a live (but hidden) SVG using getBBox().\n *\n * If an element is Alignable, and the top-left corner of its bounding box is not\n * the origin, we also issue a realign with the ComputedBoundsAction.\n */\nvar HiddenBoundsUpdater = /** @class */ (function () {\n    function HiddenBoundsUpdater(actionDispatcher, layouter) {\n        this.actionDispatcher = actionDispatcher;\n        this.layouter = layouter;\n        this.element2boundsData = new Map;\n    }\n    HiddenBoundsUpdater.prototype.decorate = function (vnode, element) {\n        if (model_1.isSizeable(element) || model_1.isLayoutContainer(element)) {\n            this.element2boundsData.set(element, {\n                vnode: vnode,\n                bounds: element.bounds,\n                boundsChanged: false,\n                alignmentChanged: false\n            });\n        }\n        if (element instanceof smodel_1.SModelRoot)\n            this.root = element;\n        return vnode;\n    };\n    HiddenBoundsUpdater.prototype.postUpdate = function () {\n        if (this.root !== undefined && model_2.isExportable(this.root) && this.root.export)\n            return;\n        this.getBoundsFromDOM();\n        this.layouter.layout(this.element2boundsData);\n        var resizes = [];\n        var realignments = [];\n        this.element2boundsData.forEach(function (boundsData, element) {\n            if (boundsData.boundsChanged && boundsData.bounds !== undefined)\n                resizes.push({\n                    elementId: element.id,\n                    newBounds: boundsData.bounds\n                });\n            if (boundsData.alignmentChanged && boundsData.alignment !== undefined)\n                realignments.push({\n                    elementId: element.id,\n                    newAlignment: boundsData.alignment\n                });\n        });\n        var revision = (this.root !== undefined) ? this.root.revision : undefined;\n        this.actionDispatcher.dispatch(new bounds_manipulation_1.ComputedBoundsAction(resizes, revision, realignments));\n        this.element2boundsData.clear();\n    };\n    HiddenBoundsUpdater.prototype.getBoundsFromDOM = function () {\n        var _this = this;\n        this.element2boundsData.forEach(function (boundsData, element) {\n            if (boundsData.bounds && model_1.isSizeable(element)) {\n                var vnode = boundsData.vnode;\n                if (vnode && vnode.elm) {\n                    var boundingBox = _this.getBounds(vnode.elm, element);\n                    if (model_1.isAlignable(element) && !(geometry_1.almostEquals(boundingBox.x, 0) && geometry_1.almostEquals(boundingBox.y, 0))) {\n                        boundsData.alignment = {\n                            x: -boundingBox.x,\n                            y: -boundingBox.y\n                        };\n                        boundsData.alignmentChanged = true;\n                    }\n                    var newBounds = {\n                        x: element.bounds.x,\n                        y: element.bounds.y,\n                        width: boundingBox.width,\n                        height: boundingBox.height\n                    };\n                    if (!(geometry_1.almostEquals(newBounds.x, element.bounds.x)\n                        && geometry_1.almostEquals(newBounds.y, element.bounds.y)\n                        && geometry_1.almostEquals(newBounds.width, element.bounds.width)\n                        && geometry_1.almostEquals(newBounds.height, element.bounds.height))) {\n                        boundsData.bounds = newBounds;\n                        boundsData.boundsChanged = true;\n                    }\n                }\n            }\n        });\n    };\n    HiddenBoundsUpdater.prototype.getBounds = function (elm, element) {\n        var bounds = elm.getBBox();\n        return {\n            x: bounds.x,\n            y: bounds.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    };\n    HiddenBoundsUpdater = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.inject(types_1.TYPES.Layouter)),\n        __metadata(\"design:paramtypes\", [Object, layout_1.Layouter])\n    ], HiddenBoundsUpdater);\n    return HiddenBoundsUpdater;\n}());\nexports.HiddenBoundsUpdater = HiddenBoundsUpdater;\n//# sourceMappingURL=hidden-bounds-updater.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/hidden-bounds-updater.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar animation_1 = require(\"../../base/animations/animation\");\nvar ResizeAnimation = /** @class */ (function (_super) {\n    __extends(ResizeAnimation, _super);\n    function ResizeAnimation(model, elementResizes, context, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.elementResizes = elementResizes;\n        _this.reverse = reverse;\n        return _this;\n    }\n    ResizeAnimation.prototype.tween = function (t) {\n        var _this = this;\n        this.elementResizes.forEach(function (elementResize) {\n            var element = elementResize.element;\n            var newDimension = (_this.reverse) ? {\n                width: (1 - t) * elementResize.toDimension.width + t * elementResize.fromDimension.width,\n                height: (1 - t) * elementResize.toDimension.height + t * elementResize.fromDimension.height\n            } : {\n                width: (1 - t) * elementResize.fromDimension.width + t * elementResize.toDimension.width,\n                height: (1 - t) * elementResize.fromDimension.height + t * elementResize.toDimension.height\n            };\n            element.bounds = {\n                x: element.bounds.x,\n                y: element.bounds.y,\n                width: newDimension.width,\n                height: newDimension.height\n            };\n        });\n        return this.model;\n    };\n    return ResizeAnimation;\n}(animation_1.Animation));\nexports.ResizeAnimation = ResizeAnimation;\n//# sourceMappingURL=resize.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/bounds/resize.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar button_handler_1 = require(\"./button-handler\");\nvar buttonModule = new inversify_1.ContainerModule(function (bind) {\n    bind(button_handler_1.ButtonHandlerRegistry).toSelf().inSingletonScope();\n});\nexports.default = buttonModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/button/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar edit_routing_1 = require(\"./edit-routing\");\nvar edgeEditModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.ICommand).toConstructor(edit_routing_1.SwitchEditModeCommand);\n    bind(types_1.TYPES.ICommand).toConstructor(edit_routing_1.MoveRoutingHandleCommand);\n});\nexports.default = edgeEditModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/edit/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar expand_1 = require(\"./expand\");\nvar expandModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.IButtonHandler).toConstructor(expand_1.ExpandButtonHandler);\n});\nexports.default = expandModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/expand/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom = require(\"snabbdom-jsx\");\nvar model_1 = require(\"./model\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar JSX = { createElement: snabbdom.svg };\nvar ExpandButtonView = /** @class */ (function () {\n    function ExpandButtonView() {\n    }\n    ExpandButtonView.prototype.render = function (button, context) {\n        var expandable = smodel_utils_1.findParentByFeature(button, model_1.isExpandable);\n        var path = (expandable !== undefined && expandable.expanded)\n            ? 'M 1,5 L 8,12 L 15,5 Z'\n            : 'M 1,8 L 8,15 L 8,1 Z';\n        return JSX.createElement(\"g\", { \"class-sprotty-button\": \"{true}\", \"class-enabled\": \"{button.enabled}\" },\n            JSX.createElement(\"rect\", { x: 0, y: 0, width: 16, height: 16, opacity: 0 }),\n            JSX.createElement(\"path\", { d: path }));\n    };\n    return ExpandButtonView;\n}());\nexports.ExpandButtonView = ExpandButtonView;\n//# sourceMappingURL=views.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/expand/views.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar export_1 = require(\"./export\");\nvar svg_exporter_1 = require(\"./svg-exporter\");\nvar exportSvgModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.KeyListener).to(export_1.ExportSvgKeyListener).inSingletonScope();\n    bind(types_1.TYPES.HiddenVNodeDecorator).to(export_1.ExportSvgDecorator).inSingletonScope();\n    bind(types_1.TYPES.ICommand).toConstructor(export_1.ExportSvgCommand);\n    bind(types_1.TYPES.SvgExporter).to(svg_exporter_1.SvgExporter).inSingletonScope();\n});\nexports.default = exportSvgModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/export/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar fade_1 = require(\"./fade\");\nvar fadeModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.IVNodeDecorator).to(fade_1.ElementFader).inSingletonScope();\n});\nexports.default = fadeModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/fade/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar hover_1 = require(\"./hover\");\nvar popup_position_updater_1 = require(\"./popup-position-updater\");\nvar initializer_1 = require(\"./initializer\");\nvar hoverModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.PopupVNodeDecorator).to(popup_position_updater_1.PopupPositionUpdater).inSingletonScope();\n    bind(types_1.TYPES.IActionHandlerInitializer).to(initializer_1.PopupActionHandlerInitializer);\n    bind(types_1.TYPES.ICommand).toConstructor(hover_1.HoverFeedbackCommand);\n    bind(types_1.TYPES.ICommand).toConstructor(hover_1.SetPopupModelCommand);\n    bind(types_1.TYPES.MouseListener).to(hover_1.HoverMouseListener);\n    bind(types_1.TYPES.PopupMouseListener).to(hover_1.PopupHoverMouseListener);\n    bind(types_1.TYPES.KeyListener).to(hover_1.HoverKeyListener);\n    bind(types_1.TYPES.HoverState).toConstantValue({\n        mouseOverTimer: undefined,\n        mouseOutTimer: undefined,\n        popupOpen: false,\n        previousPopupElement: undefined\n    });\n});\nexports.default = hoverModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/hover/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar hover_1 = require(\"./hover\");\nvar smodel_factory_1 = require(\"../../base/model/smodel-factory\");\nvar center_fit_1 = require(\"../viewport/center-fit\");\nvar viewport_1 = require(\"../viewport/viewport\");\nvar move_1 = require(\"../move/move\");\nvar ClosePopupActionHandler = /** @class */ (function () {\n    function ClosePopupActionHandler() {\n        this.popupOpen = false;\n    }\n    ClosePopupActionHandler.prototype.handle = function (action) {\n        if (action.kind === hover_1.SetPopupModelCommand.KIND) {\n            this.popupOpen = action.newRoot.type !== smodel_factory_1.EMPTY_ROOT.type;\n        }\n        else if (this.popupOpen) {\n            return new hover_1.SetPopupModelAction({ id: smodel_factory_1.EMPTY_ROOT.id, type: smodel_factory_1.EMPTY_ROOT.type });\n        }\n    };\n    return ClosePopupActionHandler;\n}());\nvar PopupActionHandlerInitializer = /** @class */ (function () {\n    function PopupActionHandlerInitializer() {\n    }\n    PopupActionHandlerInitializer.prototype.initialize = function (registry) {\n        var closePopupActionHandler = new ClosePopupActionHandler();\n        registry.register(center_fit_1.FitToScreenCommand.KIND, closePopupActionHandler);\n        registry.register(center_fit_1.CenterCommand.KIND, closePopupActionHandler);\n        registry.register(viewport_1.ViewportCommand.KIND, closePopupActionHandler);\n        registry.register(hover_1.SetPopupModelCommand.KIND, closePopupActionHandler);\n        registry.register(move_1.MoveCommand.KIND, closePopupActionHandler);\n    };\n    PopupActionHandlerInitializer = __decorate([\n        inversify_1.injectable()\n    ], PopupActionHandlerInitializer);\n    return PopupActionHandlerInitializer;\n}());\nexports.PopupActionHandlerInitializer = PopupActionHandlerInitializer;\n//# sourceMappingURL=initializer.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/hover/initializer.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar PopupPositionUpdater = /** @class */ (function () {\n    function PopupPositionUpdater(options) {\n        this.options = options;\n    }\n    PopupPositionUpdater.prototype.decorate = function (vnode, element) {\n        return vnode;\n    };\n    PopupPositionUpdater.prototype.postUpdate = function () {\n        var popupDiv = document.getElementById(this.options.popupDiv);\n        if (popupDiv !== null && typeof window !== 'undefined') {\n            var boundingClientRect = popupDiv.getBoundingClientRect();\n            if (window.innerHeight < boundingClientRect.height + boundingClientRect.top) {\n                popupDiv.style.top = (window.scrollY + window.innerHeight - boundingClientRect.height - 5) + 'px';\n            }\n            if (window.innerWidth < boundingClientRect.left + boundingClientRect.width) {\n                popupDiv.style.left = (window.scrollX + window.innerWidth - boundingClientRect.width - 5) + 'px';\n            }\n            if (boundingClientRect.left < 0) {\n                popupDiv.style.left = '0px';\n            }\n            if (boundingClientRect.top < 0) {\n                popupDiv.style.top = '0px';\n            }\n        }\n    };\n    PopupPositionUpdater = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __metadata(\"design:paramtypes\", [Object])\n    ], PopupPositionUpdater);\n    return PopupPositionUpdater;\n}());\nexports.PopupPositionUpdater = PopupPositionUpdater;\n//# sourceMappingURL=popup-position-updater.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/hover/popup-position-updater.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar move_1 = require(\"./move\");\nvar moveModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.MouseListener).to(move_1.MoveMouseListener);\n    bind(types_1.TYPES.ICommand).toConstructor(move_1.MoveCommand);\n    bind(types_1.TYPES.IVNodeDecorator).to(move_1.LocationDecorator);\n    bind(types_1.TYPES.HiddenVNodeDecorator).to(move_1.LocationDecorator);\n});\nexports.default = moveModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/move/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar open_1 = require(\"./open\");\nvar openModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.MouseListener).to(open_1.OpenMouseListener);\n});\nexports.default = openModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/open/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar select_1 = require(\"./select\");\nvar selectModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.ICommand).toConstructor(select_1.SelectCommand);\n    bind(types_1.TYPES.ICommand).toConstructor(select_1.SelectAllCommand);\n    bind(types_1.TYPES.KeyListener).to(select_1.SelectKeyboardListener);\n    bind(types_1.TYPES.MouseListener).to(select_1.SelectMouseListener);\n});\nexports.default = selectModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/select/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar undo_redo_1 = require(\"./undo-redo\");\nvar undoRedoModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.KeyListener).to(undo_redo_1.UndoRedoKeyListener);\n});\nexports.default = undoRedoModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/undo-redo/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar center_fit_1 = require(\"./center-fit\");\nvar viewport_1 = require(\"./viewport\");\nvar scroll_1 = require(\"./scroll\");\nvar zoom_1 = require(\"./zoom\");\nvar viewportModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.ICommand).toConstructor(center_fit_1.CenterCommand);\n    bind(types_1.TYPES.ICommand).toConstructor(center_fit_1.FitToScreenCommand);\n    bind(types_1.TYPES.ICommand).toConstructor(viewport_1.ViewportCommand);\n    bind(types_1.TYPES.KeyListener).to(center_fit_1.CenterKeyboardListener);\n    bind(types_1.TYPES.MouseListener).to(scroll_1.ScrollMouseListener);\n    bind(types_1.TYPES.MouseListener).to(zoom_1.ZoomMouseListener);\n});\nexports.default = viewportModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/features/viewport/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2018 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar LinearEdgeRouter = /** @class */ (function () {\n    function LinearEdgeRouter() {\n    }\n    LinearEdgeRouter.prototype.route = function (edge, options) {\n        if (options === void 0) { options = { minimalPointDistance: 2 }; }\n        var source = edge.source;\n        var target = edge.target;\n        if (source === undefined || target === undefined) {\n            return [];\n        }\n        var sourceAnchor;\n        var targetAnchor;\n        var rpCount = edge.routingPoints !== undefined ? edge.routingPoints.length : 0;\n        if (rpCount >= 1) {\n            // Use the first routing point as start anchor reference\n            var p0 = edge.routingPoints[0];\n            sourceAnchor = source.getTranslatedAnchor(p0, edge.parent, edge, edge.sourceAnchorCorrection);\n            // Use the last routing point as end anchor reference\n            var pn = edge.routingPoints[rpCount - 1];\n            targetAnchor = target.getTranslatedAnchor(pn, edge.parent, edge, edge.targetAnchorCorrection);\n        }\n        else {\n            // Use the target center as start anchor reference\n            var startRef = geometry_1.center(target.bounds);\n            sourceAnchor = source.getTranslatedAnchor(startRef, target.parent, edge, edge.sourceAnchorCorrection);\n            // Use the source center as end anchor reference\n            var endRef = geometry_1.center(source.bounds);\n            targetAnchor = target.getTranslatedAnchor(endRef, source.parent, edge, edge.targetAnchorCorrection);\n        }\n        var result = [];\n        result.push({ kind: 'source', x: sourceAnchor.x, y: sourceAnchor.y });\n        for (var i = 0; i < rpCount; i++) {\n            var p = edge.routingPoints[i];\n            if (i > 0 && i < rpCount - 1\n                || i === 0 && geometry_1.maxDistance(sourceAnchor, p) >= options.minimalPointDistance + (edge.sourceAnchorCorrection || 0)\n                || i === rpCount - 1 && geometry_1.maxDistance(p, targetAnchor) >= options.minimalPointDistance + (edge.targetAnchorCorrection || 0)) {\n                result.push({ kind: 'linear', x: p.x, y: p.y, pointIndex: i });\n            }\n        }\n        result.push({ kind: 'target', x: targetAnchor.x, y: targetAnchor.y });\n        return result;\n    };\n    LinearEdgeRouter = __decorate([\n        inversify_1.injectable()\n    ], LinearEdgeRouter);\n    return LinearEdgeRouter;\n}());\nexports.LinearEdgeRouter = LinearEdgeRouter;\n//# sourceMappingURL=routing.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/graph/routing.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_factory_1 = require(\"../base/model/smodel-factory\");\nvar smodel_1 = require(\"../base/model/smodel\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar sgraph_1 = require(\"./sgraph\");\nvar model_1 = require(\"../features/button/model\");\nvar SGraphFactory = /** @class */ (function (_super) {\n    __extends(SGraphFactory, _super);\n    function SGraphFactory() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SGraphFactory.prototype.createElement = function (schema, parent) {\n        var child;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SChildElement))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SChildElement.\");\n            child = regElement;\n        }\n        else if (this.isNodeSchema(schema)) {\n            child = new sgraph_1.SNode();\n        }\n        else if (this.isPortSchema(schema)) {\n            child = new sgraph_1.SPort();\n        }\n        else if (this.isEdgeSchema(schema)) {\n            child = new sgraph_1.SEdge();\n        }\n        else if (this.isLabelSchema(schema)) {\n            child = new sgraph_1.SLabel();\n        }\n        else if (this.isCompartmentSchema(schema)) {\n            child = new sgraph_1.SCompartment();\n        }\n        else if (this.isButtonSchema(schema)) {\n            child = new model_1.SButton();\n        }\n        else {\n            child = new smodel_1.SChildElement();\n        }\n        return this.initializeChild(child, schema, parent);\n    };\n    SGraphFactory.prototype.createRoot = function (schema) {\n        var root;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SModelRoot))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SModelRoot.\");\n            root = regElement;\n        }\n        else if (this.isGraphSchema(schema)) {\n            root = new sgraph_1.SGraph();\n        }\n        else {\n            root = new smodel_1.SModelRoot();\n        }\n        return this.initializeRoot(root, schema);\n    };\n    SGraphFactory.prototype.isGraphSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'graph';\n    };\n    SGraphFactory.prototype.isNodeSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'node';\n    };\n    SGraphFactory.prototype.isPortSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'port';\n    };\n    SGraphFactory.prototype.isEdgeSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'edge';\n    };\n    SGraphFactory.prototype.isLabelSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'label';\n    };\n    SGraphFactory.prototype.isCompartmentSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'comp';\n    };\n    SGraphFactory.prototype.isButtonSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'button';\n    };\n    SGraphFactory = __decorate([\n        inversify_1.injectable()\n    ], SGraphFactory);\n    return SGraphFactory;\n}(smodel_factory_1.SModelFactory));\nexports.SGraphFactory = SGraphFactory;\n//# sourceMappingURL=sgraph-factory.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/graph/sgraph-factory.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom = require(\"snabbdom-jsx\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar vnode_utils_1 = require(\"../base/views/vnode-utils\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar model_1 = require(\"../features/edit/model\");\nvar JSX = { createElement: snabbdom.svg };\n/**\n * IView component that turns an SGraph element and its children into a tree of virtual DOM elements.\n */\nvar SGraphView = /** @class */ (function () {\n    function SGraphView() {\n    }\n    SGraphView.prototype.render = function (model, context) {\n        var transform = \"scale(\" + model.zoom + \") translate(\" + -model.scroll.x + \",\" + -model.scroll.y + \")\";\n        return JSX.createElement(\"svg\", { \"class-sprotty-graph\": true },\n            JSX.createElement(\"g\", { transform: transform }, context.renderChildren(model)));\n    };\n    return SGraphView;\n}());\nexports.SGraphView = SGraphView;\nvar PolylineEdgeView = /** @class */ (function () {\n    function PolylineEdgeView() {\n    }\n    PolylineEdgeView.prototype.render = function (edge, context) {\n        var route = edge.route();\n        if (route.length === 0)\n            return this.renderDanglingEdge(\"Cannot compute route\", edge, context);\n        return JSX.createElement(\"g\", { \"class-sprotty-edge\": true, \"class-mouseover\": edge.hoverFeedback },\n            this.renderLine(edge, route, context),\n            this.renderAdditionals(edge, route, context),\n            context.renderChildren(edge, { route: route }));\n    };\n    PolylineEdgeView.prototype.renderLine = function (edge, segments, context) {\n        var firstPoint = segments[0];\n        var path = \"M \" + firstPoint.x + \",\" + firstPoint.y;\n        for (var i = 1; i < segments.length; i++) {\n            var p = segments[i];\n            path += \" L \" + p.x + \",\" + p.y;\n        }\n        return JSX.createElement(\"path\", { d: path });\n    };\n    PolylineEdgeView.prototype.renderAdditionals = function (edge, segments, context) {\n        return [];\n    };\n    PolylineEdgeView.prototype.renderDanglingEdge = function (message, edge, context) {\n        return JSX.createElement(\"text\", { \"class-sprotty-edge-dangling\": true, title: message }, \"?\");\n    };\n    return PolylineEdgeView;\n}());\nexports.PolylineEdgeView = PolylineEdgeView;\nvar SRoutingHandleView = /** @class */ (function () {\n    function SRoutingHandleView() {\n        this.minimalPointDistance = 10;\n    }\n    SRoutingHandleView.prototype.render = function (handle, context, args) {\n        if (args && args.route) {\n            var position = this.getPosition(handle, args.route);\n            if (position !== undefined) {\n                var node = JSX.createElement(\"circle\", { \"class-sprotty-routing-handle\": true, \"class-selected\": handle.selected, \"class-mouseover\": handle.hoverFeedback, cx: position.x, cy: position.y }); // Radius must be specified via CSS\n                vnode_utils_1.setAttr(node, 'data-kind', handle.kind);\n                return node;\n            }\n        }\n        // Fallback: Create an empty group\n        return JSX.createElement(\"g\", null);\n    };\n    SRoutingHandleView.prototype.getPosition = function (handle, route) {\n        if (handle.kind === 'line') {\n            return this.getLinePosition(handle, route);\n        }\n        else {\n            return this.getJunctionPosition(handle, route);\n        }\n    };\n    SRoutingHandleView.prototype.getJunctionPosition = function (handle, route) {\n        return route.find(function (rp) { return rp.pointIndex === handle.pointIndex; });\n    };\n    SRoutingHandleView.prototype.getLinePosition = function (handle, route) {\n        var parent = handle.parent;\n        if (model_1.isRoutable(parent)) {\n            var getIndex = function (rp) {\n                if (rp.pointIndex !== undefined)\n                    return rp.pointIndex;\n                else if (rp.kind === 'target')\n                    return parent.routingPoints.length;\n                else\n                    return -1;\n            };\n            var rp1 = void 0, rp2 = void 0;\n            for (var _i = 0, route_1 = route; _i < route_1.length; _i++) {\n                var rp = route_1[_i];\n                var i = getIndex(rp);\n                if (i <= handle.pointIndex && (rp1 === undefined || i > getIndex(rp1)))\n                    rp1 = rp;\n                if (i > handle.pointIndex && (rp2 === undefined || i < getIndex(rp2)))\n                    rp2 = rp;\n            }\n            if (rp1 !== undefined && rp2 !== undefined) {\n                // Skip this handle if its related line segment is not included in the route\n                if (getIndex(rp1) !== handle.pointIndex && handle.pointIndex >= 0) {\n                    var point = parent.routingPoints[handle.pointIndex];\n                    if (geometry_1.maxDistance(point, rp1) >= geometry_1.maxDistance(point, rp2))\n                        return undefined;\n                }\n                if (getIndex(rp2) !== handle.pointIndex + 1 && handle.pointIndex + 1 < parent.routingPoints.length) {\n                    var point = parent.routingPoints[handle.pointIndex + 1];\n                    if (geometry_1.maxDistance(point, rp1) < geometry_1.maxDistance(point, rp2))\n                        return undefined;\n                }\n                // Skip this handle if its related line segment is too short\n                if (geometry_1.maxDistance(rp1, rp2) >= this.minimalPointDistance)\n                    return geometry_1.centerOfLine(rp1, rp2);\n            }\n        }\n        return undefined;\n    };\n    return SRoutingHandleView;\n}());\nexports.SRoutingHandleView = SRoutingHandleView;\nvar SLabelView = /** @class */ (function () {\n    function SLabelView() {\n    }\n    SLabelView.prototype.render = function (label, context) {\n        var vnode = JSX.createElement(\"text\", { \"class-sprotty-label\": true }, label.text);\n        var subType = smodel_utils_1.getSubType(label);\n        if (subType)\n            vnode_utils_1.setAttr(vnode, 'class', subType);\n        return vnode;\n    };\n    return SLabelView;\n}());\nexports.SLabelView = SLabelView;\nvar SCompartmentView = /** @class */ (function () {\n    function SCompartmentView() {\n    }\n    SCompartmentView.prototype.render = function (model, context) {\n        var translate = \"translate(\" + model.bounds.x + \", \" + model.bounds.y + \")\";\n        var vnode = JSX.createElement(\"g\", { transform: translate, \"class-sprotty-comp\": \"{true}\" }, context.renderChildren(model));\n        var subType = smodel_utils_1.getSubType(model);\n        if (subType)\n            vnode_utils_1.setAttr(vnode, 'class', subType);\n        return vnode;\n    };\n    return SCompartmentView;\n}());\nexports.SCompartmentView = SCompartmentView;\n//# sourceMappingURL=views.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/graph/views.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar strings_1 = require(\"snabbdom-virtualize/strings\");\nvar PreRenderedView = /** @class */ (function () {\n    function PreRenderedView() {\n    }\n    PreRenderedView.prototype.render = function (model, context) {\n        var node = strings_1.default(model.code);\n        this.correctNamespace(node);\n        return node;\n    };\n    PreRenderedView.prototype.correctNamespace = function (node) {\n        if (node.sel === 'svg' || node.sel === 'g')\n            this.setNamespace(node, 'http://www.w3.org/2000/svg');\n    };\n    PreRenderedView.prototype.setNamespace = function (node, ns) {\n        if (node.data === undefined)\n            node.data = {};\n        node.data.ns = ns;\n        var children = node.children;\n        if (children !== undefined) {\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                if (typeof child !== 'string')\n                    this.setNamespace(child, ns);\n            }\n        }\n    };\n    return PreRenderedView;\n}());\nexports.PreRenderedView = PreRenderedView;\n//# sourceMappingURL=generic-views.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/lib/generic-views.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom = require(\"snabbdom-jsx\");\nvar vnode_utils_1 = require(\"../base/views/vnode-utils\");\nvar JSX = { createElement: snabbdom.html };\nvar HtmlRootView = /** @class */ (function () {\n    function HtmlRootView() {\n    }\n    HtmlRootView.prototype.render = function (model, context) {\n        var root = JSX.createElement(\"div\", null, context.renderChildren(model));\n        for (var _i = 0, _a = model.classes; _i < _a.length; _i++) {\n            var c = _a[_i];\n            vnode_utils_1.setClass(root, c, true);\n        }\n        return root;\n    };\n    return HtmlRootView;\n}());\nexports.HtmlRootView = HtmlRootView;\n//# sourceMappingURL=html-views.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/lib/html-views.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../base/model/smodel\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar anchors_1 = require(\"../utils/anchors\");\nvar model_1 = require(\"../features/bounds/model\");\nvar model_2 = require(\"../features/move/model\");\nvar model_3 = require(\"../features/select/model\");\nvar sgraph_1 = require(\"../graph/sgraph\");\n/**\n * A node that is represented by a circle.\n */\nvar CircularNode = /** @class */ (function (_super) {\n    __extends(CircularNode, _super);\n    function CircularNode() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.strokeWidth = 0;\n        return _this;\n    }\n    Object.defineProperty(CircularNode.prototype, \"radius\", {\n        get: function () {\n            var d = Math.min(this.size.width, this.size.height);\n            return d > 0 ? d / 2 : 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularNode.prototype.getAnchor = function (refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var strokeCorrection = 0.5 * this.strokeWidth;\n        return anchors_1.computeCircleAnchor(this.position, this.radius, refPoint, offset + strokeCorrection);\n    };\n    return CircularNode;\n}(sgraph_1.SNode));\nexports.CircularNode = CircularNode;\n/**\n * A node that is represented by a rectangle.\n */\nvar RectangularNode = /** @class */ (function (_super) {\n    __extends(RectangularNode, _super);\n    function RectangularNode() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.strokeWidth = 0;\n        return _this;\n    }\n    RectangularNode.prototype.getAnchor = function (refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var strokeCorrection = 0.5 * this.strokeWidth;\n        return anchors_1.computeRectangleAnchor(this.bounds, refPoint, offset + strokeCorrection);\n    };\n    return RectangularNode;\n}(sgraph_1.SNode));\nexports.RectangularNode = RectangularNode;\n/**\n * A port that is represented by a circle.\n */\nvar CircularPort = /** @class */ (function (_super) {\n    __extends(CircularPort, _super);\n    function CircularPort() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.strokeWidth = 0;\n        return _this;\n    }\n    Object.defineProperty(CircularPort.prototype, \"radius\", {\n        get: function () {\n            var d = Math.min(this.size.width, this.size.height);\n            return d > 0 ? d / 2 : 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularPort.prototype.getAnchor = function (refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var strokeCorrection = 0.5 * this.strokeWidth;\n        return anchors_1.computeCircleAnchor(this.position, this.radius, refPoint, offset + strokeCorrection);\n    };\n    return CircularPort;\n}(sgraph_1.SPort));\nexports.CircularPort = CircularPort;\n/**\n * A port that is represented by a rectangle.\n */\nvar RectangularPort = /** @class */ (function (_super) {\n    __extends(RectangularPort, _super);\n    function RectangularPort() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.strokeWidth = 0;\n        return _this;\n    }\n    RectangularPort.prototype.getAnchor = function (refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var strokeCorrection = 0.5 * this.strokeWidth;\n        return anchors_1.computeRectangleAnchor(this.bounds, refPoint, offset + strokeCorrection);\n    };\n    return RectangularPort;\n}(sgraph_1.SPort));\nexports.RectangularPort = RectangularPort;\n/**\n * Root model element class for HTML content. Usually this is rendered with a `div` DOM element.\n */\nvar HtmlRoot = /** @class */ (function (_super) {\n    __extends(HtmlRoot, _super);\n    function HtmlRoot() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.classes = [];\n        return _this;\n    }\n    return HtmlRoot;\n}(smodel_1.SModelRoot));\nexports.HtmlRoot = HtmlRoot;\n/**\n * Pre-rendered elements contain HTML or SVG code to be transferred to the DOM. This can be useful to\n * render complex figures or to compute the view on the server instead of the client code.\n */\nvar PreRenderedElement = /** @class */ (function (_super) {\n    __extends(PreRenderedElement, _super);\n    function PreRenderedElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PreRenderedElement;\n}(smodel_1.SChildElement));\nexports.PreRenderedElement = PreRenderedElement;\n/**\n * Same as PreRenderedElement, but with a position and a size.\n */\nvar ShapedPreRenderedElement = /** @class */ (function (_super) {\n    __extends(ShapedPreRenderedElement, _super);\n    function ShapedPreRenderedElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.position = geometry_1.ORIGIN_POINT;\n        _this.size = geometry_1.EMPTY_DIMENSION;\n        _this.selected = false;\n        _this.alignment = geometry_1.ORIGIN_POINT;\n        return _this;\n    }\n    Object.defineProperty(ShapedPreRenderedElement.prototype, \"bounds\", {\n        get: function () {\n            return {\n                x: this.position.x,\n                y: this.position.y,\n                width: this.size.width,\n                height: this.size.height\n            };\n        },\n        set: function (newBounds) {\n            this.position = {\n                x: newBounds.x,\n                y: newBounds.y\n            };\n            this.size = {\n                width: newBounds.width,\n                height: newBounds.height\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ShapedPreRenderedElement.prototype.hasFeature = function (feature) {\n        return feature === model_2.moveFeature || feature === model_1.boundsFeature || feature === model_3.selectFeature || feature === model_1.alignFeature;\n    };\n    return ShapedPreRenderedElement;\n}(PreRenderedElement));\nexports.ShapedPreRenderedElement = ShapedPreRenderedElement;\n//# sourceMappingURL=model.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/lib/model.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom = require(\"snabbdom-jsx\");\nvar sgraph_1 = require(\"../graph/sgraph\");\nvar JSX = { createElement: snabbdom.svg };\nvar SvgViewportView = /** @class */ (function () {\n    function SvgViewportView() {\n    }\n    SvgViewportView.prototype.render = function (model, context) {\n        var transform = \"scale(\" + model.zoom + \") translate(\" + -model.scroll.x + \",\" + -model.scroll.y + \")\";\n        return JSX.createElement(\"svg\", null,\n            JSX.createElement(\"g\", { transform: transform }, context.renderChildren(model)));\n    };\n    return SvgViewportView;\n}());\nexports.SvgViewportView = SvgViewportView;\nvar CircularNodeView = /** @class */ (function () {\n    function CircularNodeView() {\n    }\n    CircularNodeView.prototype.render = function (node, context) {\n        var radius = this.getRadius(node);\n        return JSX.createElement(\"g\", null,\n            JSX.createElement(\"circle\", { \"class-sprotty-node\": node instanceof sgraph_1.SNode, \"class-sprotty-port\": node instanceof sgraph_1.SPort, \"class-mouseover\": node.hoverFeedback, \"class-selected\": node.selected, r: radius, cx: radius, cy: radius }),\n            context.renderChildren(node));\n    };\n    CircularNodeView.prototype.getRadius = function (node) {\n        var d = Math.min(node.size.width, node.size.height);\n        return d > 0 ? d / 2 : 0;\n    };\n    return CircularNodeView;\n}());\nexports.CircularNodeView = CircularNodeView;\nvar RectangularNodeView = /** @class */ (function () {\n    function RectangularNodeView() {\n    }\n    RectangularNodeView.prototype.render = function (node, context) {\n        return JSX.createElement(\"g\", null,\n            JSX.createElement(\"rect\", { \"class-sprotty-node\": node instanceof sgraph_1.SNode, \"class-sprotty-port\": node instanceof sgraph_1.SPort, \"class-mouseover\": node.hoverFeedback, \"class-selected\": node.selected, x: \"0\", y: \"0\", width: Math.max(node.size.width, 0), height: Math.max(node.size.height, 0) }),\n            context.renderChildren(node));\n    };\n    return RectangularNodeView;\n}());\nexports.RectangularNodeView = RectangularNodeView;\n//# sourceMappingURL=svg-views.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/lib/svg-views.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\n/**\n * This container module does NOT provide any binding for TYPES.ModelSource because that needs to be\n * done according to the needs of the application. You can choose between a local (LocalModelSource)\n * and a remote (e.g. WebSocketDiagramServer) implementation.\n */\nvar modelSourceModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.ModelSourceProvider).toProvider(function (context) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(context.container.get(types_1.TYPES.ModelSource));\n            });\n        };\n    });\n});\nexports.default = modelSourceModule;\n//# sourceMappingURL=di.config.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/di.config.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar async_1 = require(\"../utils/async\");\nvar types_1 = require(\"../base/types\");\nvar action_handler_1 = require(\"../base/actions/action-handler\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar set_model_1 = require(\"../base/features/set-model\");\nvar smodel_1 = require(\"../base/model/smodel\");\nvar bounds_manipulation_1 = require(\"../features/bounds/bounds-manipulation\");\nvar model_matching_1 = require(\"../features/update/model-matching\");\nvar update_model_1 = require(\"../features/update/update-model\");\nvar hover_1 = require(\"../features/hover/hover\");\nvar model_source_1 = require(\"./model-source\");\nvar svg_exporter_1 = require(\"../features/export/svg-exporter\");\nvar file_saver_1 = require(\"file-saver\");\nvar expand_1 = require(\"../features/expand/expand\");\nvar diagram_state_1 = require(\"./diagram-state\");\n/**\n * A model source that allows to set and modify the model through function calls.\n * This class can be used as a facade over the action-based API of sprotty. It handles\n * actions for bounds calculation and model updates.\n */\nvar LocalModelSource = /** @class */ (function (_super) {\n    __extends(LocalModelSource, _super);\n    function LocalModelSource(actionDispatcher, actionHandlerRegistry, viewerOptions, logger, modelProvider, popupModelProvider, layoutEngine) {\n        var _this = _super.call(this, actionDispatcher, actionHandlerRegistry, viewerOptions) || this;\n        _this.logger = logger;\n        _this.modelProvider = modelProvider;\n        _this.popupModelProvider = popupModelProvider;\n        _this.layoutEngine = layoutEngine;\n        _this.currentRoot = {\n            type: 'NONE',\n            id: 'ROOT'\n        };\n        _this.diagramState = {\n            expansionState: new diagram_state_1.ExpansionState(_this.currentRoot)\n        };\n        /**\n         * When client layout is active, model updates are not applied immediately. Instead the\n         * model is rendered on a hidden canvas first to derive actual bounds. The promises listed\n         * here are resolved after the new bounds have been applied and the new model state has\n         * been actually applied to the visible canvas.\n         */\n        _this.pendingUpdates = [];\n        return _this;\n    }\n    Object.defineProperty(LocalModelSource.prototype, \"model\", {\n        get: function () {\n            return this.currentRoot;\n        },\n        set: function (root) {\n            this.setModel(root);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LocalModelSource.prototype.initialize = function (registry) {\n        _super.prototype.initialize.call(this, registry);\n        // Register model manipulation commands\n        registry.registerCommand(update_model_1.UpdateModelCommand);\n        // Register this model source\n        registry.register(bounds_manipulation_1.ComputedBoundsAction.KIND, this);\n        registry.register(hover_1.RequestPopupModelAction.KIND, this);\n        registry.register(expand_1.CollapseExpandAction.KIND, this);\n        registry.register(expand_1.CollapseExpandAllAction.KIND, this);\n    };\n    /**\n     * Set the model without incremental update.\n     */\n    LocalModelSource.prototype.setModel = function (newRoot) {\n        this.currentRoot = newRoot;\n        this.diagramState = {\n            expansionState: new diagram_state_1.ExpansionState(newRoot)\n        };\n        return this.submitModel(newRoot, false);\n    };\n    /**\n     * Apply an incremental update to the model with an animation showing the transition to\n     * the new state. If `newRoot` is undefined, the current root is submitted; in that case\n     * it is assumed that it has been modified before.\n     */\n    LocalModelSource.prototype.updateModel = function (newRoot) {\n        if (newRoot === undefined) {\n            return this.submitModel(this.currentRoot, true);\n        }\n        else {\n            this.currentRoot = newRoot;\n            return this.submitModel(newRoot, true);\n        }\n    };\n    /**\n     * If client layout is active, run a `RequestBoundsAction` and wait for the resulting\n     * `ComputedBoundsAction`, otherwise call `doSubmitModel()` directly.\n     */\n    LocalModelSource.prototype.submitModel = function (newRoot, update) {\n        if (this.viewerOptions.needsClientLayout) {\n            var deferred = new async_1.Deferred();\n            this.pendingUpdates.push(deferred);\n            this.actionDispatcher.dispatch(new bounds_manipulation_1.RequestBoundsAction(newRoot));\n            return deferred.promise;\n        }\n        else {\n            return this.doSubmitModel(newRoot, update);\n        }\n    };\n    /**\n     * Submit the given model with an `UpdateModelAction` or a `SetModelAction` depending on the\n     * `update` argument. If available, the model layout engine is invoked first.\n     */\n    LocalModelSource.prototype.doSubmitModel = function (newRoot, update, index) {\n        return __awaiter(this, void 0, void 0, function () {\n            var layoutResult, error_1, lastSubmittedModelType, updates, input;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(this.layoutEngine !== undefined)) return [3 /*break*/, 6];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 5, , 6]);\n                        layoutResult = this.layoutEngine.layout(newRoot, index);\n                        if (!(layoutResult instanceof Promise)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, layoutResult];\n                    case 2:\n                        newRoot = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        if (layoutResult !== undefined)\n                            newRoot = layoutResult;\n                        _a.label = 4;\n                    case 4: return [3 /*break*/, 6];\n                    case 5:\n                        error_1 = _a.sent();\n                        this.logger.error(this, error_1.toString(), error_1.stack);\n                        return [3 /*break*/, 6];\n                    case 6:\n                        lastSubmittedModelType = this.lastSubmittedModelType;\n                        this.lastSubmittedModelType = newRoot.type;\n                        updates = this.pendingUpdates;\n                        this.pendingUpdates = [];\n                        if (!(update && newRoot.type === lastSubmittedModelType)) return [3 /*break*/, 8];\n                        input = Array.isArray(update) ? update : newRoot;\n                        return [4 /*yield*/, this.actionDispatcher.dispatch(new update_model_1.UpdateModelAction(input))];\n                    case 7:\n                        _a.sent();\n                        return [3 /*break*/, 10];\n                    case 8: return [4 /*yield*/, this.actionDispatcher.dispatch(new set_model_1.SetModelAction(newRoot))];\n                    case 9:\n                        _a.sent();\n                        _a.label = 10;\n                    case 10:\n                        updates.forEach(function (d) { return d.resolve(); });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Modify the current model with an array of matches.\n     */\n    LocalModelSource.prototype.applyMatches = function (matches) {\n        var root = this.currentRoot;\n        model_matching_1.applyMatches(root, matches);\n        return this.submitModel(root, matches);\n    };\n    /**\n     * Modify the current model by adding new elements.\n     */\n    LocalModelSource.prototype.addElements = function (elements) {\n        var matches = [];\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var e = elements_1[_i];\n            var anye = e;\n            if (anye.element !== undefined && anye.parentId !== undefined) {\n                matches.push({\n                    right: anye.element,\n                    rightParentId: anye.parentId\n                });\n            }\n            else if (anye.id !== undefined) {\n                matches.push({\n                    right: anye,\n                    rightParentId: this.currentRoot.id\n                });\n            }\n        }\n        return this.applyMatches(matches);\n    };\n    /**\n     * Modify the current model by removing elements.\n     */\n    LocalModelSource.prototype.removeElements = function (elements) {\n        var matches = [];\n        var index = new smodel_1.SModelIndex();\n        index.add(this.currentRoot);\n        for (var _i = 0, elements_2 = elements; _i < elements_2.length; _i++) {\n            var e = elements_2[_i];\n            var anye = e;\n            if (anye.elementId !== undefined && anye.parentId !== undefined) {\n                var element = index.getById(anye.elementId);\n                if (element !== undefined) {\n                    matches.push({\n                        left: element,\n                        leftParentId: anye.parentId\n                    });\n                }\n            }\n            else {\n                var element = index.getById(anye);\n                if (element !== undefined) {\n                    matches.push({\n                        left: element,\n                        leftParentId: this.currentRoot.id\n                    });\n                }\n            }\n        }\n        return this.applyMatches(matches);\n    };\n    // ----- Methods for handling incoming actions ----------------------------\n    LocalModelSource.prototype.handle = function (action) {\n        switch (action.kind) {\n            case set_model_1.RequestModelAction.KIND:\n                this.handleRequestModel(action);\n                break;\n            case bounds_manipulation_1.ComputedBoundsAction.KIND:\n                this.handleComputedBounds(action);\n                break;\n            case hover_1.RequestPopupModelAction.KIND:\n                this.handleRequestPopupModel(action);\n                break;\n            case svg_exporter_1.ExportSvgAction.KIND:\n                this.handleExportSvgAction(action);\n                break;\n            case expand_1.CollapseExpandAction.KIND:\n                this.handleCollapseExpandAction(action);\n                break;\n            case expand_1.CollapseExpandAllAction.KIND:\n                this.handleCollapseExpandAllAction(action);\n                break;\n        }\n    };\n    LocalModelSource.prototype.handleRequestModel = function (action) {\n        if (this.modelProvider)\n            this.currentRoot = this.modelProvider.getModel(this.diagramState, this.currentRoot);\n        this.submitModel(this.currentRoot, false);\n    };\n    LocalModelSource.prototype.handleComputedBounds = function (action) {\n        var root = this.currentRoot;\n        var index = new smodel_1.SModelIndex();\n        index.add(root);\n        for (var _i = 0, _a = action.bounds; _i < _a.length; _i++) {\n            var b = _a[_i];\n            var element = index.getById(b.elementId);\n            if (element !== undefined)\n                this.applyBounds(element, b.newBounds);\n        }\n        if (action.alignments !== undefined) {\n            for (var _b = 0, _c = action.alignments; _b < _c.length; _b++) {\n                var a = _c[_b];\n                var element = index.getById(a.elementId);\n                if (element !== undefined)\n                    this.applyAlignment(element, a.newAlignment);\n            }\n        }\n        this.doSubmitModel(root, true, index);\n    };\n    LocalModelSource.prototype.applyBounds = function (element, newBounds) {\n        var e = element;\n        e.position = { x: newBounds.x, y: newBounds.y };\n        e.size = { width: newBounds.width, height: newBounds.height };\n    };\n    LocalModelSource.prototype.applyAlignment = function (element, newAlignment) {\n        var e = element;\n        e.alignment = { x: newAlignment.x, y: newAlignment.y };\n    };\n    LocalModelSource.prototype.handleRequestPopupModel = function (action) {\n        if (this.popupModelProvider !== undefined) {\n            var element = smodel_utils_1.findElement(this.currentRoot, action.elementId);\n            var popupRoot = this.popupModelProvider.getPopupModel(action, element);\n            if (popupRoot !== undefined) {\n                popupRoot.canvasBounds = action.bounds;\n                this.actionDispatcher.dispatch(new hover_1.SetPopupModelAction(popupRoot));\n            }\n        }\n    };\n    LocalModelSource.prototype.handleExportSvgAction = function (action) {\n        var blob = new Blob([action.svg], { type: \"text/plain;charset=utf-8\" });\n        file_saver_1.saveAs(blob, \"diagram.svg\");\n    };\n    LocalModelSource.prototype.handleCollapseExpandAction = function (action) {\n        if (this.modelProvider !== undefined) {\n            this.diagramState.expansionState.apply(action);\n            var expandedModel = this.modelProvider.getModel(this.diagramState, this.currentRoot);\n            this.updateModel(expandedModel);\n        }\n    };\n    LocalModelSource.prototype.handleCollapseExpandAllAction = function (action) {\n        if (this.modelProvider !== undefined) {\n            if (action.expand) {\n                // Expanding all elements locally is currently not supported\n            }\n            else {\n                this.diagramState.expansionState.collapseAll();\n            }\n            var expandedModel = this.modelProvider.getModel(this.diagramState, this.currentRoot);\n            this.updateModel(expandedModel);\n        }\n    };\n    LocalModelSource = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.IActionDispatcher)),\n        __param(1, inversify_1.inject(types_1.TYPES.ActionHandlerRegistry)),\n        __param(2, inversify_1.inject(types_1.TYPES.ViewerOptions)),\n        __param(3, inversify_1.inject(types_1.TYPES.ILogger)),\n        __param(4, inversify_1.inject(types_1.TYPES.StateAwareModelProvider)), __param(4, inversify_1.optional()),\n        __param(5, inversify_1.inject(types_1.TYPES.IPopupModelProvider)), __param(5, inversify_1.optional()),\n        __param(6, inversify_1.inject(types_1.TYPES.IModelLayoutEngine)), __param(6, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Object, action_handler_1.ActionHandlerRegistry, Object, Object, Object, Object, Object])\n    ], LocalModelSource);\n    return LocalModelSource;\n}(model_source_1.ModelSource));\nexports.LocalModelSource = LocalModelSource;\n//# sourceMappingURL=local-model-source.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/local-model-source.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar logging_1 = require(\"../utils/logging\");\nvar types_1 = require(\"../base/types\");\nvar LoggingAction = /** @class */ (function () {\n    function LoggingAction(severity, time, caller, message, params) {\n        this.severity = severity;\n        this.time = time;\n        this.caller = caller;\n        this.message = message;\n        this.params = params;\n        this.kind = LoggingAction.KIND;\n    }\n    LoggingAction.KIND = 'logging';\n    return LoggingAction;\n}());\nexports.LoggingAction = LoggingAction;\n/**\n * A logger that forwards messages of type 'error', 'warn', and 'info' to the model source.\n */\nvar ForwardingLogger = /** @class */ (function () {\n    function ForwardingLogger(modelSourceProvider, logLevel) {\n        this.modelSourceProvider = modelSourceProvider;\n        this.logLevel = logLevel;\n    }\n    ForwardingLogger.prototype.error = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.error)\n            this.forward(thisArg, message, logging_1.LogLevel.error, params);\n    };\n    ForwardingLogger.prototype.warn = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.warn)\n            this.forward(thisArg, message, logging_1.LogLevel.warn, params);\n    };\n    ForwardingLogger.prototype.info = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.info)\n            this.forward(thisArg, message, logging_1.LogLevel.info, params);\n    };\n    ForwardingLogger.prototype.log = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.log) {\n            // We cannot forward 'log' level messages since that would lead to endless loops\n            try {\n                var caller = typeof thisArg === 'object' ? thisArg.constructor.name : String(thisArg);\n                console.log.apply(thisArg, [caller + ': ' + message].concat(params));\n            }\n            catch (error) { }\n        }\n    };\n    ForwardingLogger.prototype.forward = function (thisArg, message, logLevel, params) {\n        var date = new Date();\n        var action = new LoggingAction(logging_1.LogLevel[logLevel], date.toLocaleTimeString(), typeof thisArg === 'object' ? thisArg.constructor.name : String(thisArg), message, params.map(function (p) { return JSON.stringify(p); }));\n        this.modelSourceProvider().then(function (modelSource) {\n            try {\n                modelSource.handle(action);\n            }\n            catch (error) {\n                try {\n                    console.log.apply(thisArg, [message, action, error]);\n                }\n                catch (error) { }\n            }\n        });\n    };\n    ForwardingLogger = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ModelSourceProvider)),\n        __param(1, inversify_1.inject(types_1.TYPES.LogLevel)),\n        __metadata(\"design:paramtypes\", [Function, Number])\n    ], ForwardingLogger);\n    return ForwardingLogger;\n}());\nexports.ForwardingLogger = ForwardingLogger;\n//# sourceMappingURL=logging.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/logging.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar diagram_server_1 = require(\"./diagram-server\");\n/**\n * An external ModelSource that connects to the model provider using a\n * websocket.\n */\nvar WebSocketDiagramServer = /** @class */ (function (_super) {\n    __extends(WebSocketDiagramServer, _super);\n    function WebSocketDiagramServer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    WebSocketDiagramServer.prototype.listen = function (webSocket) {\n        var _this = this;\n        webSocket.addEventListener('message', function (event) {\n            _this.messageReceived(event.data);\n        });\n        webSocket.addEventListener('error', function (event) {\n            _this.logger.error(_this, 'error event received', event);\n        });\n        this.webSocket = webSocket;\n    };\n    WebSocketDiagramServer.prototype.disconnect = function () {\n        if (this.webSocket) {\n            this.webSocket.close();\n            this.webSocket = undefined;\n        }\n    };\n    WebSocketDiagramServer.prototype.sendMessage = function (message) {\n        if (this.webSocket) {\n            this.webSocket.send(JSON.stringify(message));\n        }\n        else {\n            throw new Error('WebSocket is not connected');\n        }\n    };\n    WebSocketDiagramServer = __decorate([\n        inversify_1.injectable()\n    ], WebSocketDiagramServer);\n    return WebSocketDiagramServer;\n}(diagram_server_1.DiagramServer));\nexports.WebSocketDiagramServer = WebSocketDiagramServer;\n//# sourceMappingURL=websocket.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/model-source/websocket.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nvar Deferred = /** @class */ (function () {\n    function Deferred() {\n        var _this = this;\n        this.promise = new Promise(function (resolve, reject) {\n            _this.resolve = resolve;\n            _this.reject = reject;\n        });\n    }\n    return Deferred;\n}());\nexports.Deferred = Deferred;\n//# sourceMappingURL=async.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/async.js","\"use strict\";\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction rgb(red, green, blue) {\n    return {\n        red: red,\n        green: green,\n        blue: blue\n    };\n}\nexports.rgb = rgb;\nfunction toSVG(c) {\n    return 'rgb(' + c.red + ',' + c.green + ',' + c.blue + ')';\n}\nexports.toSVG = toSVG;\nvar ColorMap = /** @class */ (function () {\n    function ColorMap(stops) {\n        this.stops = stops;\n    }\n    ColorMap.prototype.getColor = function (t) {\n        t = Math.max(0, Math.min(0.99999999, t));\n        var i = Math.floor(t * this.stops.length);\n        return this.stops[i];\n    };\n    return ColorMap;\n}());\nexports.ColorMap = ColorMap;\n//# sourceMappingURL=color.js.map\n\n\n// WEBPACK FOOTER //\n// ./~/sprotty/lib/utils/color.js","/**\n * This file automatically generated from `pre-publish.js`.\n * Do not manually edit.\n */\n\nmodule.exports = {\n  \"area\": true,\n  \"base\": true,\n  \"br\": true,\n  \"col\": true,\n  \"embed\": true,\n  \"hr\": true,\n  \"img\": true,\n  \"input\": true,\n  \"keygen\": true,\n  \"link\": true,\n  \"menuitem\": true,\n  \"meta\": true,\n  \"param\": true,\n  \"source\": true,\n  \"track\": true,\n  \"wbr\": true\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/void-elements/index.js","module.exports = function() {\r\n\tthrow new Error(\"define cannot be used indirect\");\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-define.js\n// module id = 192\n// module chunks = 0 1 2","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elkgraph_json_1 = require(\"./elkgraph-json\");\nvar ElkGraphJsonToSprotty = /** @class */ (function () {\n    function ElkGraphJsonToSprotty() {\n        this.nodeIds = new Set();\n        this.edgeIds = new Set();\n        this.portIds = new Set();\n        this.labelIds = new Set();\n        this.sectionIds = new Set();\n    }\n    ElkGraphJsonToSprotty.prototype.transform = function (elkGraph) {\n        var _this = this;\n        var sGraph = {\n            type: 'graph',\n            id: elkGraph.id || 'root',\n            children: []\n        };\n        if (elkGraph.children) {\n            var children = elkGraph.children.map(function (n) { return _this.transformElkNode(n); });\n            (_a = sGraph.children).push.apply(_a, children);\n        }\n        if (elkGraph.edges) {\n            var sEdges = elkGraph.edges.map(function (e) { return _this.transformElkEdge(e); });\n            (_b = sGraph.children).push.apply(_b, sEdges);\n        }\n        return sGraph;\n        var _a, _b;\n    };\n    ElkGraphJsonToSprotty.prototype.transformElkNode = function (elkNode) {\n        var _this = this;\n        this.checkAndRememberId(elkNode, this.nodeIds);\n        var sNode = {\n            type: 'node',\n            id: elkNode.id,\n            position: this.pos(elkNode),\n            size: this.size(elkNode),\n            children: []\n        };\n        // children\n        if (elkNode.children) {\n            var sNodes = elkNode.children.map(function (n) { return _this.transformElkNode(n); });\n            (_a = sNode.children).push.apply(_a, sNodes);\n        }\n        // ports\n        if (elkNode.ports) {\n            var sPorts = elkNode.ports.map(function (p) { return _this.transformElkPort(p); });\n            (_b = sNode.children).push.apply(_b, sPorts);\n        }\n        // labels\n        if (elkNode.labels) {\n            var sLabels = elkNode.labels.map(function (l) { return _this.transformElkLabel(l); });\n            (_c = sNode.children).push.apply(_c, sLabels);\n        }\n        // edges\n        if (elkNode.edges) {\n            var sEdges = elkNode.edges.map(function (e) { return _this.transformElkEdge(e); });\n            (_d = sNode.children).push.apply(_d, sEdges);\n        }\n        return sNode;\n        var _a, _b, _c, _d;\n    };\n    ElkGraphJsonToSprotty.prototype.transformElkPort = function (elkPort) {\n        var _this = this;\n        this.checkAndRememberId(elkPort, this.portIds);\n        var sPort = {\n            type: 'port',\n            id: elkPort.id,\n            position: this.pos(elkPort),\n            size: this.size(elkPort),\n            children: []\n        };\n        // labels\n        if (elkPort.labels) {\n            var sLabels = elkPort.labels.map(function (l) { return _this.transformElkLabel(l); });\n            (_a = sPort.children).push.apply(_a, sLabels);\n        }\n        return sPort;\n        var _a;\n    };\n    ElkGraphJsonToSprotty.prototype.transformElkLabel = function (elkLabel) {\n        this.checkAndRememberId(elkLabel, this.labelIds);\n        return {\n            type: 'label',\n            id: elkLabel.id,\n            text: elkLabel.text,\n            position: this.pos(elkLabel),\n            size: this.size(elkLabel)\n        };\n    };\n    ElkGraphJsonToSprotty.prototype.transformElkEdge = function (elkEdge) {\n        var _this = this;\n        this.checkAndRememberId(elkEdge, this.edgeIds);\n        var sEdge = {\n            type: 'edge',\n            id: elkEdge.id,\n            sourceId: '',\n            targetId: '',\n            routingPoints: [],\n            children: []\n        };\n        if (elkgraph_json_1.isPrimitive(elkEdge)) {\n            sEdge.sourceId = elkEdge.source;\n            sEdge.targetId = elkEdge.target;\n            if (elkEdge.sourcePoint)\n                sEdge.routingPoints.push(elkEdge.sourcePoint);\n            if (elkEdge.bendPoints)\n                (_a = sEdge.routingPoints).push.apply(_a, elkEdge.bendPoints);\n            if (elkEdge.targetPoint)\n                sEdge.routingPoints.push(elkEdge.targetPoint);\n        }\n        else if (elkgraph_json_1.isExtended(elkEdge)) {\n            sEdge.sourceId = elkEdge.sources[0];\n            sEdge.targetId = elkEdge.targets[0];\n            if (elkEdge.sections) {\n                elkEdge.sections.forEach(function (section) {\n                    _this.checkAndRememberId(section, _this.sectionIds);\n                    sEdge.routingPoints.push(section.startPoint);\n                    if (section.bendPoints) {\n                        (_a = sEdge.routingPoints).push.apply(_a, section.bendPoints);\n                    }\n                    sEdge.routingPoints.push(section.endPoint);\n                    var _a;\n                });\n            }\n        }\n        if (elkEdge.junctionPoints) {\n            elkEdge.junctionPoints.forEach(function (jp, i) {\n                var sJunction = {\n                    type: 'junction',\n                    id: elkEdge.id + \"_j\" + i,\n                    position: jp\n                };\n                sEdge.children.push(sJunction);\n            });\n        }\n        // TODO labels\n        return sEdge;\n        var _a;\n    };\n    ElkGraphJsonToSprotty.prototype.pos = function (elkShape) {\n        return { x: elkShape.x || 0, y: elkShape.y || 0 };\n    };\n    ElkGraphJsonToSprotty.prototype.size = function (elkShape) {\n        return { width: elkShape.width || 0, height: elkShape.height || 0 };\n    };\n    ElkGraphJsonToSprotty.prototype.checkAndRememberId = function (e, set) {\n        if (e.id == undefined) {\n            throw Error(\"An element is missing an id.\");\n        }\n        else if (set.has(e.id)) {\n            throw Error(\"Duplicate id: \" + e.id + \".\");\n        }\n        else {\n            set.add(e.id);\n        }\n    };\n    return ElkGraphJsonToSprotty;\n}());\nexports.ElkGraphJsonToSprotty = ElkGraphJsonToSprotty;\n//# sourceMappingURL=elkgraph-to-sprotty.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/json/elkgraph-to-sprotty.js","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.ELK = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*******************************************************************************\n * Copyright (c) 2017 Kiel University and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nvar ELK = function () {\n  function ELK() {\n    var _this = this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$defaultLayoutOpt = _ref.defaultLayoutOptions,\n        defaultLayoutOptions = _ref$defaultLayoutOpt === undefined ? {} : _ref$defaultLayoutOpt,\n        _ref$algorithms = _ref.algorithms,\n        algorithms = _ref$algorithms === undefined ? ['layered', 'stress', 'mrtree', 'radial', 'force', 'disco', 'sporeOverlap', 'sporeCompaction'] : _ref$algorithms,\n        workerFactory = _ref.workerFactory,\n        workerUrl = _ref.workerUrl;\n\n    _classCallCheck(this, ELK);\n\n    this.defaultLayoutOptions = defaultLayoutOptions;\n    this.initialized = false;\n\n    // check valid worker construction possible\n    if (typeof workerUrl === 'undefined' && typeof workerFactory === 'undefined') {\n      throw new Error(\"Cannot construct an ELK without both 'workerUrl' and 'workerFactory'.\");\n    }\n    var factory = workerFactory;\n    if (typeof workerUrl !== 'undefined' && typeof workerFactory === 'undefined') {\n      // use default Web Worker\n      factory = function factory(url) {\n        return new Worker(url);\n      };\n    }\n\n    // create the worker\n    var worker = factory(workerUrl);\n    if (typeof worker.postMessage !== 'function') {\n      throw new TypeError(\"Created worker does not provide\" + \" the required 'postMessage' function.\");\n    }\n\n    // wrap the worker to return promises\n    this.worker = new PromisedWorker(worker);\n\n    // initially register algorithms\n    this.worker.postMessage({\n      cmd: 'register',\n      algorithms: algorithms\n    }).then(function (r) {\n      return _this.initialized = true;\n    }).catch(console.err);\n  }\n\n  _createClass(ELK, [{\n    key: 'layout',\n    value: function layout(graph) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref2$layoutOptions = _ref2.layoutOptions,\n          layoutOptions = _ref2$layoutOptions === undefined ? this.defaultLayoutOptions : _ref2$layoutOptions;\n\n      if (!graph) {\n        return Promise.reject(new Error(\"Missing mandatory parameter 'graph'.\"));\n      }\n      return this.worker.postMessage({\n        cmd: 'layout',\n        graph: graph,\n        options: layoutOptions\n      });\n    }\n  }, {\n    key: 'knownLayoutAlgorithms',\n    value: function knownLayoutAlgorithms() {\n      return this.worker.postMessage({ cmd: 'algorithms' });\n    }\n  }, {\n    key: 'knownLayoutOptions',\n    value: function knownLayoutOptions() {\n      return this.worker.postMessage({ cmd: 'options' });\n    }\n  }, {\n    key: 'knownLayoutCategories',\n    value: function knownLayoutCategories() {\n      return this.worker.postMessage({ cmd: 'categories' });\n    }\n  }, {\n    key: 'terminateWorker',\n    value: function terminateWorker() {\n      this.worker.terminate();\n    }\n  }]);\n\n  return ELK;\n}();\n\nexports.default = ELK;\n\nvar PromisedWorker = function () {\n  function PromisedWorker(worker) {\n    var _this2 = this;\n\n    _classCallCheck(this, PromisedWorker);\n\n    if (worker === undefined) {\n      throw new Error(\"Missing mandatory parameter 'worker'.\");\n    }\n    this.resolvers = {};\n    this.worker = worker;\n    this.worker.onmessage = function (answer) {\n      // why is this necessary?\n      setTimeout(function () {\n        _this2.receive(_this2, answer);\n      }, 0);\n    };\n  }\n\n  _createClass(PromisedWorker, [{\n    key: 'postMessage',\n    value: function postMessage(msg) {\n      var id = this.id || 0;\n      this.id = id + 1;\n      msg.id = id;\n      var self = this;\n      return new Promise(function (resolve, reject) {\n        // prepare the resolver\n        self.resolvers[id] = function (err, res) {\n          if (err) {\n            reject(err);\n          } else {\n            resolve(res);\n          }\n        };\n        // post the message\n        self.worker.postMessage(msg);\n      });\n    }\n  }, {\n    key: 'receive',\n    value: function receive(self, answer) {\n      var json = answer.data;\n      var resolver = self.resolvers[json.id];\n      if (resolver) {\n        delete self.resolvers[json.id];\n        if (json.error) {\n          resolver(json.error);\n        } else {\n          resolver(null, json.data);\n        }\n      }\n    }\n  }, {\n    key: 'terminate',\n    value: function terminate() {\n      if (this.worker.terminate) {\n        this.worker.terminate();\n      }\n    }\n  }]);\n\n  return PromisedWorker;\n}();\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nvar ELK = require('./elk-api.js').default;\n\nObject.defineProperty(module.exports, \"__esModule\", {\n  value: true\n});\nmodule.exports = ELK;\nELK.default = ELK;\n},{\"./elk-api.js\":1}]},{},[2])(2)\n});\n\n\n\n// WEBPACK FOOTER //\n// ./~/elkjs/lib/elk-api.js","// json5.js\n// Modern JSON. See README.md for details.\n//\n// This file is based directly off of Douglas Crockford's json_parse.js:\n// https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\n\nvar JSON5 = (typeof exports === 'object' ? exports : {});\n\nJSON5.parse = (function () {\n    \"use strict\";\n\n// This is a function that can parse a JSON5 text, producing a JavaScript\n// data structure. It is a simple, recursive descent parser. It does not use\n// eval or regular expressions, so it can be used as a model for implementing\n// a JSON5 parser in other languages.\n\n// We are defining the function inside of another function to avoid creating\n// global variables.\n\n    var at,           // The index of the current character\n        lineNumber,   // The current line number\n        columnNumber, // The current column number\n        ch,           // The current character\n        escapee = {\n            \"'\":  \"'\",\n            '\"':  '\"',\n            '\\\\': '\\\\',\n            '/':  '/',\n            '\\n': '',       // Replace escaped newlines in strings w/ empty string\n            b:    '\\b',\n            f:    '\\f',\n            n:    '\\n',\n            r:    '\\r',\n            t:    '\\t'\n        },\n        ws = [\n            ' ',\n            '\\t',\n            '\\r',\n            '\\n',\n            '\\v',\n            '\\f',\n            '\\xA0',\n            '\\uFEFF'\n        ],\n        text,\n\n        renderChar = function (chr) {\n            return chr === '' ? 'EOF' : \"'\" + chr + \"'\";\n        },\n\n        error = function (m) {\n\n// Call error when something is wrong.\n\n            var error = new SyntaxError();\n            // beginning of message suffix to agree with that provided by Gecko - see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse\n            error.message = m + \" at line \" + lineNumber + \" column \" + columnNumber + \" of the JSON5 data. Still to read: \" + JSON.stringify(text.substring(at - 1, at + 19));\n            error.at = at;\n            // These two property names have been chosen to agree with the ones in Gecko, the only popular\n            // environment which seems to supply this info on JSON.parse\n            error.lineNumber = lineNumber;\n            error.columnNumber = columnNumber;\n            throw error;\n        },\n\n        next = function (c) {\n\n// If a c parameter is provided, verify that it matches the current character.\n\n            if (c && c !== ch) {\n                error(\"Expected \" + renderChar(c) + \" instead of \" + renderChar(ch));\n            }\n\n// Get the next character. When there are no more characters,\n// return the empty string.\n\n            ch = text.charAt(at);\n            at++;\n            columnNumber++;\n            if (ch === '\\n' || ch === '\\r' && peek() !== '\\n') {\n                lineNumber++;\n                columnNumber = 0;\n            }\n            return ch;\n        },\n\n        peek = function () {\n\n// Get the next character without consuming it or\n// assigning it to the ch varaible.\n\n            return text.charAt(at);\n        },\n\n        identifier = function () {\n\n// Parse an identifier. Normally, reserved words are disallowed here, but we\n// only use this for unquoted object keys, where reserved words are allowed,\n// so we don't check for those here. References:\n// - http://es5.github.com/#x7.6\n// - https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Variables\n// - http://docstore.mik.ua/orelly/webprog/jscript/ch02_07.htm\n// TODO Identifiers can have Unicode \"letters\" in them; add support for those.\n\n            var key = ch;\n\n            // Identifiers must start with a letter, _ or $.\n            if ((ch !== '_' && ch !== '$') &&\n                    (ch < 'a' || ch > 'z') &&\n                    (ch < 'A' || ch > 'Z')) {\n                error(\"Bad identifier as unquoted key\");\n            }\n\n            // Subsequent characters can contain digits.\n            while (next() && (\n                    ch === '_' || ch === '$' ||\n                    (ch >= 'a' && ch <= 'z') ||\n                    (ch >= 'A' && ch <= 'Z') ||\n                    (ch >= '0' && ch <= '9'))) {\n                key += ch;\n            }\n\n            return key;\n        },\n\n        number = function () {\n\n// Parse a number value.\n\n            var number,\n                sign = '',\n                string = '',\n                base = 10;\n\n            if (ch === '-' || ch === '+') {\n                sign = ch;\n                next(ch);\n            }\n\n            // support for Infinity (could tweak to allow other words):\n            if (ch === 'I') {\n                number = word();\n                if (typeof number !== 'number' || isNaN(number)) {\n                    error('Unexpected word for number');\n                }\n                return (sign === '-') ? -number : number;\n            }\n\n            // support for NaN\n            if (ch === 'N' ) {\n              number = word();\n              if (!isNaN(number)) {\n                error('expected word to be NaN');\n              }\n              // ignore sign as -NaN also is NaN\n              return number;\n            }\n\n            if (ch === '0') {\n                string += ch;\n                next();\n                if (ch === 'x' || ch === 'X') {\n                    string += ch;\n                    next();\n                    base = 16;\n                } else if (ch >= '0' && ch <= '9') {\n                    error('Octal literal');\n                }\n            }\n\n            switch (base) {\n            case 10:\n                while (ch >= '0' && ch <= '9' ) {\n                    string += ch;\n                    next();\n                }\n                if (ch === '.') {\n                    string += '.';\n                    while (next() && ch >= '0' && ch <= '9') {\n                        string += ch;\n                    }\n                }\n                if (ch === 'e' || ch === 'E') {\n                    string += ch;\n                    next();\n                    if (ch === '-' || ch === '+') {\n                        string += ch;\n                        next();\n                    }\n                    while (ch >= '0' && ch <= '9') {\n                        string += ch;\n                        next();\n                    }\n                }\n                break;\n            case 16:\n                while (ch >= '0' && ch <= '9' || ch >= 'A' && ch <= 'F' || ch >= 'a' && ch <= 'f') {\n                    string += ch;\n                    next();\n                }\n                break;\n            }\n\n            if(sign === '-') {\n                number = -string;\n            } else {\n                number = +string;\n            }\n\n            if (!isFinite(number)) {\n                error(\"Bad number\");\n            } else {\n                return number;\n            }\n        },\n\n        string = function () {\n\n// Parse a string value.\n\n            var hex,\n                i,\n                string = '',\n                delim,      // double quote or single quote\n                uffff;\n\n// When parsing for string values, we must look for ' or \" and \\ characters.\n\n            if (ch === '\"' || ch === \"'\") {\n                delim = ch;\n                while (next()) {\n                    if (ch === delim) {\n                        next();\n                        return string;\n                    } else if (ch === '\\\\') {\n                        next();\n                        if (ch === 'u') {\n                            uffff = 0;\n                            for (i = 0; i < 4; i += 1) {\n                                hex = parseInt(next(), 16);\n                                if (!isFinite(hex)) {\n                                    break;\n                                }\n                                uffff = uffff * 16 + hex;\n                            }\n                            string += String.fromCharCode(uffff);\n                        } else if (ch === '\\r') {\n                            if (peek() === '\\n') {\n                                next();\n                            }\n                        } else if (typeof escapee[ch] === 'string') {\n                            string += escapee[ch];\n                        } else {\n                            break;\n                        }\n                    } else if (ch === '\\n') {\n                        // unescaped newlines are invalid; see:\n                        // https://github.com/aseemk/json5/issues/24\n                        // TODO this feels special-cased; are there other\n                        // invalid unescaped chars?\n                        break;\n                    } else {\n                        string += ch;\n                    }\n                }\n            }\n            error(\"Bad string\");\n        },\n\n        inlineComment = function () {\n\n// Skip an inline comment, assuming this is one. The current character should\n// be the second / character in the // pair that begins this inline comment.\n// To finish the inline comment, we look for a newline or the end of the text.\n\n            if (ch !== '/') {\n                error(\"Not an inline comment\");\n            }\n\n            do {\n                next();\n                if (ch === '\\n' || ch === '\\r') {\n                    next();\n                    return;\n                }\n            } while (ch);\n        },\n\n        blockComment = function () {\n\n// Skip a block comment, assuming this is one. The current character should be\n// the * character in the /* pair that begins this block comment.\n// To finish the block comment, we look for an ending */ pair of characters,\n// but we also watch for the end of text before the comment is terminated.\n\n            if (ch !== '*') {\n                error(\"Not a block comment\");\n            }\n\n            do {\n                next();\n                while (ch === '*') {\n                    next('*');\n                    if (ch === '/') {\n                        next('/');\n                        return;\n                    }\n                }\n            } while (ch);\n\n            error(\"Unterminated block comment\");\n        },\n\n        comment = function () {\n\n// Skip a comment, whether inline or block-level, assuming this is one.\n// Comments always begin with a / character.\n\n            if (ch !== '/') {\n                error(\"Not a comment\");\n            }\n\n            next('/');\n\n            if (ch === '/') {\n                inlineComment();\n            } else if (ch === '*') {\n                blockComment();\n            } else {\n                error(\"Unrecognized comment\");\n            }\n        },\n\n        white = function () {\n\n// Skip whitespace and comments.\n// Note that we're detecting comments by only a single / character.\n// This works since regular expressions are not valid JSON(5), but this will\n// break if there are other valid values that begin with a / character!\n\n            while (ch) {\n                if (ch === '/') {\n                    comment();\n                } else if (ws.indexOf(ch) >= 0) {\n                    next();\n                } else {\n                    return;\n                }\n            }\n        },\n\n        word = function () {\n\n// true, false, or null.\n\n            switch (ch) {\n            case 't':\n                next('t');\n                next('r');\n                next('u');\n                next('e');\n                return true;\n            case 'f':\n                next('f');\n                next('a');\n                next('l');\n                next('s');\n                next('e');\n                return false;\n            case 'n':\n                next('n');\n                next('u');\n                next('l');\n                next('l');\n                return null;\n            case 'I':\n                next('I');\n                next('n');\n                next('f');\n                next('i');\n                next('n');\n                next('i');\n                next('t');\n                next('y');\n                return Infinity;\n            case 'N':\n              next( 'N' );\n              next( 'a' );\n              next( 'N' );\n              return NaN;\n            }\n            error(\"Unexpected \" + renderChar(ch));\n        },\n\n        value,  // Place holder for the value function.\n\n        array = function () {\n\n// Parse an array value.\n\n            var array = [];\n\n            if (ch === '[') {\n                next('[');\n                white();\n                while (ch) {\n                    if (ch === ']') {\n                        next(']');\n                        return array;   // Potentially empty array\n                    }\n                    // ES5 allows omitting elements in arrays, e.g. [,] and\n                    // [,null]. We don't allow this in JSON5.\n                    if (ch === ',') {\n                        error(\"Missing array element\");\n                    } else {\n                        array.push(value());\n                    }\n                    white();\n                    // If there's no comma after this value, this needs to\n                    // be the end of the array.\n                    if (ch !== ',') {\n                        next(']');\n                        return array;\n                    }\n                    next(',');\n                    white();\n                }\n            }\n            error(\"Bad array\");\n        },\n\n        object = function () {\n\n// Parse an object value.\n\n            var key,\n                object = {};\n\n            if (ch === '{') {\n                next('{');\n                white();\n                while (ch) {\n                    if (ch === '}') {\n                        next('}');\n                        return object;   // Potentially empty object\n                    }\n\n                    // Keys can be unquoted. If they are, they need to be\n                    // valid JS identifiers.\n                    if (ch === '\"' || ch === \"'\") {\n                        key = string();\n                    } else {\n                        key = identifier();\n                    }\n\n                    white();\n                    next(':');\n                    object[key] = value();\n                    white();\n                    // If there's no comma after this pair, this needs to be\n                    // the end of the object.\n                    if (ch !== ',') {\n                        next('}');\n                        return object;\n                    }\n                    next(',');\n                    white();\n                }\n            }\n            error(\"Bad object\");\n        };\n\n    value = function () {\n\n// Parse a JSON value. It could be an object, an array, a string, a number,\n// or a word.\n\n        white();\n        switch (ch) {\n        case '{':\n            return object();\n        case '[':\n            return array();\n        case '\"':\n        case \"'\":\n            return string();\n        case '-':\n        case '+':\n        case '.':\n            return number();\n        default:\n            return ch >= '0' && ch <= '9' ? number() : word();\n        }\n    };\n\n// Return the json_parse function. It will have access to all of the above\n// functions and variables.\n\n    return function (source, reviver) {\n        var result;\n\n        text = String(source);\n        at = 0;\n        lineNumber = 1;\n        columnNumber = 1;\n        ch = ' ';\n        result = value();\n        white();\n        if (ch) {\n            error(\"Syntax error\");\n        }\n\n// If there is a reviver function, we recursively walk the new structure,\n// passing each name/value pair to the reviver function for possible\n// transformation, starting with a temporary root object that holds the result\n// in an empty key. If there is not a reviver function, we simply return the\n// result.\n\n        return typeof reviver === 'function' ? (function walk(holder, key) {\n            var k, v, value = holder[key];\n            if (value && typeof value === 'object') {\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = walk(value, k);\n                        if (v !== undefined) {\n                            value[k] = v;\n                        } else {\n                            delete value[k];\n                        }\n                    }\n                }\n            }\n            return reviver.call(holder, key, value);\n        }({'': result}, '')) : result;\n    };\n}());\n\n// JSON5 stringify will not quote keys where appropriate\nJSON5.stringify = function (obj, replacer, space) {\n    if (replacer && (typeof(replacer) !== \"function\" && !isArray(replacer))) {\n        throw new Error('Replacer must be a function or an array');\n    }\n    var getReplacedValueOrUndefined = function(holder, key, isTopLevel) {\n        var value = holder[key];\n\n        // Replace the value with its toJSON value first, if possible\n        if (value && value.toJSON && typeof value.toJSON === \"function\") {\n            value = value.toJSON();\n        }\n\n        // If the user-supplied replacer if a function, call it. If it's an array, check objects' string keys for\n        // presence in the array (removing the key/value pair from the resulting JSON if the key is missing).\n        if (typeof(replacer) === \"function\") {\n            return replacer.call(holder, key, value);\n        } else if(replacer) {\n            if (isTopLevel || isArray(holder) || replacer.indexOf(key) >= 0) {\n                return value;\n            } else {\n                return undefined;\n            }\n        } else {\n            return value;\n        }\n    };\n\n    function isWordChar(c) {\n        return (c >= 'a' && c <= 'z') ||\n            (c >= 'A' && c <= 'Z') ||\n            (c >= '0' && c <= '9') ||\n            c === '_' || c === '$';\n    }\n\n    function isWordStart(c) {\n        return (c >= 'a' && c <= 'z') ||\n            (c >= 'A' && c <= 'Z') ||\n            c === '_' || c === '$';\n    }\n\n    function isWord(key) {\n        if (typeof key !== 'string') {\n            return false;\n        }\n        if (!isWordStart(key[0])) {\n            return false;\n        }\n        var i = 1, length = key.length;\n        while (i < length) {\n            if (!isWordChar(key[i])) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    }\n\n    // export for use in tests\n    JSON5.isWord = isWord;\n\n    // polyfills\n    function isArray(obj) {\n        if (Array.isArray) {\n            return Array.isArray(obj);\n        } else {\n            return Object.prototype.toString.call(obj) === '[object Array]';\n        }\n    }\n\n    function isDate(obj) {\n        return Object.prototype.toString.call(obj) === '[object Date]';\n    }\n\n    var objStack = [];\n    function checkForCircular(obj) {\n        for (var i = 0; i < objStack.length; i++) {\n            if (objStack[i] === obj) {\n                throw new TypeError(\"Converting circular structure to JSON\");\n            }\n        }\n    }\n\n    function makeIndent(str, num, noNewLine) {\n        if (!str) {\n            return \"\";\n        }\n        // indentation no more than 10 chars\n        if (str.length > 10) {\n            str = str.substring(0, 10);\n        }\n\n        var indent = noNewLine ? \"\" : \"\\n\";\n        for (var i = 0; i < num; i++) {\n            indent += str;\n        }\n\n        return indent;\n    }\n\n    var indentStr;\n    if (space) {\n        if (typeof space === \"string\") {\n            indentStr = space;\n        } else if (typeof space === \"number\" && space >= 0) {\n            indentStr = makeIndent(\" \", space, true);\n        } else {\n            // ignore space parameter\n        }\n    }\n\n    // Copied from Crokford's implementation of JSON\n    // See https://github.com/douglascrockford/JSON-js/blob/e39db4b7e6249f04a195e7dd0840e610cc9e941e/json2.js#L195\n    // Begin\n    var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        meta = { // table of character substitutions\n        '\\b': '\\\\b',\n        '\\t': '\\\\t',\n        '\\n': '\\\\n',\n        '\\f': '\\\\f',\n        '\\r': '\\\\r',\n        '\"' : '\\\\\"',\n        '\\\\': '\\\\\\\\'\n    };\n    function escapeString(string) {\n\n// If the string contains no control characters, no quote characters, and no\n// backslash characters, then we can safely slap some quotes around it.\n// Otherwise we must also replace the offending characters with safe escape\n// sequences.\n        escapable.lastIndex = 0;\n        return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n            var c = meta[a];\n            return typeof c === 'string' ?\n                c :\n                '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n        }) + '\"' : '\"' + string + '\"';\n    }\n    // End\n\n    function internalStringify(holder, key, isTopLevel) {\n        var buffer, res;\n\n        // Replace the value, if necessary\n        var obj_part = getReplacedValueOrUndefined(holder, key, isTopLevel);\n\n        if (obj_part && !isDate(obj_part)) {\n            // unbox objects\n            // don't unbox dates, since will turn it into number\n            obj_part = obj_part.valueOf();\n        }\n        switch(typeof obj_part) {\n            case \"boolean\":\n                return obj_part.toString();\n\n            case \"number\":\n                if (isNaN(obj_part) || !isFinite(obj_part)) {\n                    return \"null\";\n                }\n                return obj_part.toString();\n\n            case \"string\":\n                return escapeString(obj_part.toString());\n\n            case \"object\":\n                if (obj_part === null) {\n                    return \"null\";\n                } else if (isArray(obj_part)) {\n                    checkForCircular(obj_part);\n                    buffer = \"[\";\n                    objStack.push(obj_part);\n\n                    for (var i = 0; i < obj_part.length; i++) {\n                        res = internalStringify(obj_part, i, false);\n                        buffer += makeIndent(indentStr, objStack.length);\n                        if (res === null || typeof res === \"undefined\") {\n                            buffer += \"null\";\n                        } else {\n                            buffer += res;\n                        }\n                        if (i < obj_part.length-1) {\n                            buffer += \",\";\n                        } else if (indentStr) {\n                            buffer += \"\\n\";\n                        }\n                    }\n                    objStack.pop();\n                    if (obj_part.length) {\n                        buffer += makeIndent(indentStr, objStack.length, true)\n                    }\n                    buffer += \"]\";\n                } else {\n                    checkForCircular(obj_part);\n                    buffer = \"{\";\n                    var nonEmpty = false;\n                    objStack.push(obj_part);\n                    for (var prop in obj_part) {\n                        if (obj_part.hasOwnProperty(prop)) {\n                            var value = internalStringify(obj_part, prop, false);\n                            isTopLevel = false;\n                            if (typeof value !== \"undefined\" && value !== null) {\n                                buffer += makeIndent(indentStr, objStack.length);\n                                nonEmpty = true;\n                                key = isWord(prop) ? prop : escapeString(prop);\n                                buffer += key + \":\" + (indentStr ? ' ' : '') + value + \",\";\n                            }\n                        }\n                    }\n                    objStack.pop();\n                    if (nonEmpty) {\n                        buffer = buffer.substring(0, buffer.length-1) + makeIndent(indentStr, objStack.length) + \"}\";\n                    } else {\n                        buffer = '{}';\n                    }\n                }\n                return buffer;\n            default:\n                // functions and undefined should be ignored\n                return undefined;\n        }\n    }\n\n    // special case...when undefined is used inside of\n    // a compound object/array, return null.\n    // but when top-level, return undefined\n    var topLevelHolder = {\"\":obj};\n    if (obj === undefined) {\n        return getReplacedValueOrUndefined(topLevelHolder, '', true);\n    }\n    return internalStringify(topLevelHolder, '', true);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/json5/lib/json5.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isPrimitive(edge) {\n    return edge.source !== undefined && edge.target !== undefined;\n}\nexports.isPrimitive = isPrimitive;\nfunction isExtended(edge) {\n    return edge.sources !== undefined && edge.targets !== undefined;\n}\nexports.isExtended = isExtended;\n//# sourceMappingURL=elkgraph-json.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/json/elkgraph-json.js","// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\nvar LZString = (function() {\n\n// private property\nvar f = String.fromCharCode;\nvar keyStrBase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nvar keyStrUriSafe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\nvar baseReverseDic = {};\n\nfunction getBaseValue(alphabet, character) {\n  if (!baseReverseDic[alphabet]) {\n    baseReverseDic[alphabet] = {};\n    for (var i=0 ; i<alphabet.length ; i++) {\n      baseReverseDic[alphabet][alphabet.charAt(i)] = i;\n    }\n  }\n  return baseReverseDic[alphabet][character];\n}\n\nvar LZString = {\n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var res = LZString._compress(input, 6, function(a){return keyStrBase64.charAt(a);});\n    switch (res.length % 4) { // To produce valid Base64\n    default: // When could this happen ?\n    case 0 : return res;\n    case 1 : return res+\"===\";\n    case 2 : return res+\"==\";\n    case 3 : return res+\"=\";\n    }\n  },\n\n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrBase64, input.charAt(index)); });\n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 15, function(a){return f(a+32);}) + \" \";\n  },\n\n  decompressFromUTF16: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 16384, function(index) { return compressed.charCodeAt(index) - 32; });\n  },\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        var result = [];\n        buf.forEach(function (c) {\n          result.push(f(c));\n        });\n        return LZString.decompress(result.join(''));\n\n    }\n\n  },\n\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 6, function(a){return keyStrUriSafe.charAt(a);});\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    input = input.replace(/ /g, \"+\");\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrUriSafe, input.charAt(index)); });\n  },\n\n  compress: function (uncompressed) {\n    return LZString._compress(uncompressed, 16, function(a){return f(a);});\n  },\n  _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data=[],\n        context_data_val=0,\n        context_data_position=0,\n        ii;\n\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n\n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position ==bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n\n\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n\n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == bitsPerChar-1) {\n            context_data_position = 0;\n            context_data.push(getCharFromInt(context_data_val));\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n\n\n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n\n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data_position = 0;\n        context_data.push(getCharFromInt(context_data_val));\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n\n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data.push(getCharFromInt(context_data_val));\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data.join('');\n  },\n\n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 32768, function(index) { return compressed.charCodeAt(index); });\n  },\n\n  _decompress: function (length, resetValue, getNextValue) {\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = [],\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        data = {val:getNextValue(0), position:resetValue, index:1};\n\n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n\n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = resetValue;\n        data.val = getNextValue(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n\n    switch (next = bits) {\n      case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2:\n        return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n      if (data.index > length) {\n        return \"\";\n      }\n\n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = resetValue;\n          data.val = getNextValue(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2:\n          return result.join('');\n      }\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result.push(entry);\n\n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n\n      w = entry;\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n    }\n  }\n};\n  return LZString;\n})();\n\nif (typeof define === 'function' && define.amd) {\n  define(function () { return LZString; });\n} else if( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/lz-string/libs/lz-string.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*******************************************************************************\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io) and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nrequire(\"reflect-metadata\");\nvar lib_1 = require(\"sprotty/lib\");\nvar url_parameters_1 = require(\"../url-parameters\");\nvar sprotty_config_1 = require(\"../sprotty-config\");\nvar elkgraph_to_sprotty_1 = require(\"./elkgraph-to-sprotty\");\nvar elk_api_1 = require(\"elkjs/lib/elk-api\");\nvar JSON5 = require(\"json5\");\nvar LZString = require(\"lz-string\");\nvar urlParameters = url_parameters_1.getParameters();\nvar initialContent;\nif (urlParameters.compressedContent !== undefined) {\n    initialContent = LZString.decompressFromEncodedURIComponent(urlParameters.compressedContent);\n}\nelse if (urlParameters.initialContent !== undefined) {\n    initialContent = decodeURIComponent(urlParameters.initialContent);\n}\nelse {\n    initialContent = \"{\\n  id: \\\"root\\\",\\n  properties: { 'algorithm': 'layered' },\\n  children: [\\n    { id: \\\"n1\\\", width: 30, height: 30 },\\n    { id: \\\"n2\\\", width: 30, height: 30 },\\n    { id: \\\"n3\\\", width: 30, height: 30 }\\n  ],\\n  edges: [\\n    { id: \\\"e1\\\", sources: [ \\\"n1\\\" ], targets: [ \\\"n2\\\" ] },\\n    { id: \\\"e2\\\", sources: [ \\\"n1\\\" ], targets: [ \\\"n3\\\" ] } \\n  ]\\n}\";\n}\n// Create Monaco editor\nmonaco.languages.register({\n    id: 'json',\n    extensions: ['.json'],\n    aliases: ['JSON', 'json'],\n    mimetypes: ['application/json'],\n});\nvar editor = monaco.editor.create(document.getElementById('monaco-editor'), {\n    model: monaco.editor.createModel(initialContent, 'json', monaco.Uri.parse('inmemory:/model.json'))\n});\neditor.updateOptions({\n    minimap: { enabled: false }\n});\n// Create Sprotty viewer\nvar sprottyContainer = sprotty_config_1.default();\nsprottyContainer.bind(lib_1.TYPES.ModelSource).to(lib_1.LocalModelSource).inSingletonScope();\nvar modelSource = sprottyContainer.get(lib_1.TYPES.ModelSource);\n// Set up ELK\nvar elk = new elk_api_1.default({\n    workerUrl: './elk/elk-worker.min.js'\n});\n// Register listener\neditor.getModel().onDidChangeContent(function (e) { return updateModel(); });\n// Initial layout\nupdateModel();\nurl_parameters_1.setupModelLink(editor, function (event) {\n    return {\n        compressedContent: LZString.compressToEncodedURIComponent(editor.getValue())\n    };\n});\nfunction updateModel() {\n    try {\n        var json = JSON5.parse(editor.getValue());\n        monaco.editor.setModelMarkers(editor.getModel(), \"\", []);\n        elk.layout(json)\n            .then(function (g) {\n            var sGraph = new elkgraph_to_sprotty_1.ElkGraphJsonToSprotty().transform(g);\n            modelSource.updateModel(sGraph);\n        })\n            .catch(function (e) {\n            var markers = [errorToMarker(e)];\n            monaco.editor.setModelMarkers(editor.getModel(), \"\", markers);\n        });\n    }\n    catch (e) {\n        var markers = [errorToMarker(e)];\n        monaco.editor.setModelMarkers(editor.getModel(), \"\", markers);\n    }\n}\nfunction errorToMarker(e) {\n    return {\n        severity: monaco.Severity.Error,\n        startLineNumber: e.lineNumber || 0,\n        startColumn: e.columnNumber || 0,\n        message: e.message\n    };\n}\n//# sourceMappingURL=editor.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/json/editor.js","/*******************************************************************************\n * Copyright (c) 2017 TypeFox GmbH (http://www.typefox.io) and others.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *******************************************************************************/\nwindow.onload = function () {\n    // Load Monaco code\n    var w = window;\n    w.require(['vs/editor/editor.main'], function () {\n        // Load application code\n        require('./editor');\n    });\n};\n//# sourceMappingURL=main.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/json/main.js"],"sourceRoot":""}